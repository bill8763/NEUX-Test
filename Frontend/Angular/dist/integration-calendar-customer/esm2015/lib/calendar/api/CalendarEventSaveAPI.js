/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { EqualRestriction, TableUtils } from "@allianzSND/core";
import { Observable } from 'rxjs';
import { ClientCustomDao } from '@allianzSND/core';
export class CalendarEventSaveAPI {
    /**
     * @param {?} DaoFactory
     */
    constructor(DaoFactory) {
        this._DaoFactory = DaoFactory;
    }
    /**
     * @return {?}
     */
    getAPIName() {
        return 'saveCalendarEvent';
    }
    /**
     * @return {?}
     */
    getMockPath() {
        return './assets/mock/addCalendarEvent.json';
    }
    /**
     * @return {?}
     */
    executeSQL() {
        console.log("CalendarEventSaveAPI executeSQL:", this.Data);
        /** @type {?} */
        let Alerts = [this.Data.Alert1, this.Data.Alert2];
        if (this.Data.IsAlert === 'Y') {
            Alerts.sort((/**
             * @param {?} a
             * @param {?} b
             * @return {?}
             */
            (a, b) => parseInt(a) - parseInt(b)));
            this.Data.Alert1 = Alerts[0];
            this.Data.Alert2 = Alerts[1];
        }
        return Observable.create((/**
         * @param {?} observer
         * @return {?}
         */
        (observer) => {
            /** @type {?} */
            let calendarObj = this._DaoFactory.getDefaultTable("TW_LH_SD_Calendar");
            /** @type {?} */
            let calendarExtObj = this._DaoFactory.getDefaultTable("TW_LH_SD_Calendar_Extension");
            /** @type {?} */
            let dao = this._DaoFactory.getDefaultDao();
            if (calendarObj != undefined) {
                dao = new ClientCustomDao(dao);
                if (this.Data.ClientID) {
                    calendarObj.setValue('ClientID', this.Data.ClientID);
                    calendarExtObj.setValue('ClientID', this.Data.ClientID);
                }
                calendarObj.setValue('CustomerClientID', this.Data.CustomerClientID);
                calendarObj.setValue('Title', this.Data.Title);
                calendarObj.setValue('Location', this.Data.Location);
                calendarObj.setValue('CalendarType', this.Data.CalendarType);
                calendarObj.setValue('IsAllDay', this.Data.IsAllDay);
                calendarObj.setValue('StartTime', this.Data.StartDateTime.getTime());
                calendarObj.setValue('EndTime', this.Data.EndDateTime.getTime());
                calendarObj.setValue('IsAlert', this.Data.IsAlert);
                if (this.Data.IsAlert === 'Y') {
                    calendarObj.setValue('Alert1', this.Data.Alert1);
                    calendarObj.setValue('Alert2', this.Data.Alert2);
                }
                else {
                    calendarObj.setValue('Alert1', null);
                    calendarObj.setValue('Alert2', null);
                }
                calendarObj.setValue('Alert3', null);
                calendarObj.setValue('Remark', this.Data.Remark);
                console.log("save calendarObj:", calendarObj);
                // fill extension
                calendarExtObj = TableUtils.fillTableColumn(calendarExtObj, this.Data);
                if (this.Data["EditType"] === "edit") {
                    calendarObj.addRestriction(new EqualRestriction("ClientID", [this.Data.ClientID]));
                    calendarExtObj.addRestriction(new EqualRestriction("ClientID", [this.Data.ClientID]));
                    dao.transactionUpdate(calendarObj);
                    dao.transactionUpdate(calendarExtObj);
                }
                else {
                    dao.transactionInsert(calendarObj);
                    dao.transactionInsert(calendarExtObj);
                }
                dao.runTransaction().subscribe((/**
                 * @param {?} resp
                 * @return {?}
                 */
                resp => {
                    observer.next(resp);
                    observer.complete();
                }));
            }
            else {
                observer.next(false);
                observer.complete();
            }
        }));
    }
}
if (false) {
    /**
     * @type {?}
     * @private
     */
    CalendarEventSaveAPI.prototype.Data;
    /**
     * @type {?}
     * @private
     */
    CalendarEventSaveAPI.prototype._DaoFactory;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2FsZW5kYXJFdmVudFNhdmVBUEkuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYWxsaWFuelNORC9pbnRlZ3JhdGlvbi1jYWxlbmRhci1jdXN0b21lci8iLCJzb3VyY2VzIjpbImxpYi9jYWxlbmRhci9hcGkvQ2FsZW5kYXJFdmVudFNhdmVBUEkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBUSxnQkFBZ0IsRUFBRSxVQUFVLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUV0RSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBRWxDLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUluRCxNQUFNOzs7O0lBR0YsWUFBWSxVQUFVO1FBQ2xCLElBQUksQ0FBQyxXQUFXLEdBQUcsVUFBVSxDQUFDO0lBQ2xDLENBQUM7Ozs7SUFLRCxVQUFVO1FBQ04sT0FBTyxtQkFBbUIsQ0FBQztJQUMvQixDQUFDOzs7O0lBRUQsV0FBVztRQUNQLE9BQU8scUNBQXFDLENBQUM7SUFDakQsQ0FBQzs7OztJQUVELFVBQVU7UUFDTixPQUFPLENBQUMsR0FBRyxDQUFDLGtDQUFrQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzs7WUFDdkQsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDakQsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sS0FBSyxHQUFHLEVBQUU7WUFDM0IsTUFBTSxDQUFDLElBQUk7Ozs7O1lBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUE7WUFDaEQsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzdCLElBQUksQ0FB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V0FBVyxDQUFDLGNBQWMsQ0FBQyxJQUFJLGdCQUFnQixDQUFDLFVBQVUsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNuRixjQUFjLENBQUMsY0FBYyxDQUFDLElBQUksZ0JBQWdCLENBQUMsVUFBVSxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3RGLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxXQUFXLENBQUMsQ0FBQztvQkFDbkMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLGNBQWMsQ0FBQyxDQUFDO2lCQUN6QztxQkFDSTtvQkFDRCxHQUFHLENBQUMsaUJBQWlCLENBQUMsV0FBVyxDQUFDLENBQUM7b0JBQ25DLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxjQUFjLENBQUMsQ0FBQztpQkFDekM7Z0JBRUQsR0FBRyxDQUFDLGNBQWMsRUFBRSxDQUFDLFNBQVM7Ozs7Z0JBQUMsSUFBSSxDQUFDLEVBQUU7b0JBQ2xDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ3BCLFFBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQztnQkFDeEIsQ0FBQyxFQUFDLENBQUE7YUFDTDtpQkFBTTtnQkFDSCxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNyQixRQUFRLENBQUMsUUFBUSxFQUFFLENBQUM7YUFDdkI7UUFDTCxDQUFDLEVBQUMsQ0FBQztJQUNQLENBQUM7Q0FDSjs7Ozs7O0lBbEZHLG9DQUFrQjs7Ozs7SUFDbEIsMkNBQWdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSUFQSSwgRXF1YWxSZXN0cmljdGlvbiwgVGFibGVVdGlscyB9IGZyb20gXCJAYWxsaWFuelNORC9jb3JlXCI7XG5pbXBvcnQgeyBJTW9ja0FQSSB9IGZyb20gXCJAYWxsaWFuelNORC9jb3JlXCI7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBEYW9GYWN0b3J5IH0gZnJvbSAnQGFsbGlhbnpTTkQvY29yZSc7XG5pbXBvcnQgeyBDbGllbnRDdXN0b21EYW8gfSBmcm9tICdAYWxsaWFuelNORC9jb3JlJztcbmltcG9ydCB7IElTUUxpdGVBUEkgfSBmcm9tICdAYWxsaWFuelNORC9jb3JlJztcbmltcG9ydCB7IENhbGVuZGFyRXZlbnREZXRhaWwgfSBmcm9tICcuLi9zZXJ2aWNlL21vZGVsL0NhbGVuZGFyRXZlbnREZXRhaWwnO1xuXG5leHBvcnQgY2xhc3MgQ2FsZW5kYXJFdmVudFNhdmVBUEkgaW1wbGVtZW50cyBJQVBJLCBJTW9ja0FQSSwgSVNRTGl0ZUFQSSB7XG4gICAgcHJpdmF0ZSBEYXRhOiBhbnk7XG4gICAgcHJpdmF0ZSBfRGFvRmFjdG9yeTogRGFvRmFjdG9yeTtcbiAgICBjb25zdHJ1Y3RvcihEYW9GYWN0b3J5KSB7XG4gICAgICAgIHRoaXMuX0Rhb0ZhY3RvcnkgPSBEYW9GYWN0b3J5O1xuICAgIH1cblxuXG5cblxuICAgIGdldEFQSU5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuICdzYXZlQ2FsZW5kYXJFdmVudCc7XG4gICAgfVxuXG4gICAgZ2V0TW9ja1BhdGgoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuICcuL2Fzc2V0cy9tb2NrL2FkZENhbGVuZGFyRXZlbnQuanNvbic7XG4gICAgfVxuXG4gICAgZXhlY3V0ZVNRTCgpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkNhbGVuZGFyRXZlbnRTYXZlQVBJIGV4ZWN1dGVTUUw6XCIsIHRoaXMuRGF0YSk7XG4gICAgICAgIGxldCBBbGVydHMgPSBbdGhpcy5EYXRhLkFsZXJ0MSwgdGhpcy5EYXRhLkFsZXJ0Ml07XG4gICAgICAgIGlmICh0aGlzLkRhdGEuSXNBbGVydCA9PT0gJ1knKSB7XG4gICAgICAgICAgICBBbGVydHMuc29ydCgoYSwgYikgPT4gcGFyc2VJbnQoYSkgLSBwYXJzZUludChiKSlcbiAgICAgICAgICAgIHRoaXMuRGF0YS5BbGVydDEgPSBBbGVydHNbMF07XG4gICAgICAgICAgICB0aGlzLkRhdGEuQWxlcnQyID0gQWxlcnRzWzFdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIE9ic2VydmFibGUuY3JlYXRlKChvYnNlcnZlcikgPT4ge1xuICAgICAgICAgICAgbGV0IGNhbGVuZGFyT2JqID0gdGhpcy5fRGFvRmFjdG9yeS5nZXREZWZhdWx0VGFibGUoXCJUV19MSF9TRF9DYWxlbmRhclwiKTtcbiAgICAgICAgICAgIGxldCBjYWxlbmRhckV4dE9iaiA9IHRoaXMuX0Rhb0ZhY3RvcnkuZ2V0RGVmYXVsdFRhYmxlKFwiVFdfTEhfU0RfQ2FsZW5kYXJfRXh0ZW5zaW9uXCIpO1xuICAgICAgICAgICAgbGV0IGRhbyA9IHRoaXMuX0Rhb0ZhY3RvcnkuZ2V0RGVmYXVsdERhbygpO1xuICAgICAgICAgICAgaWYgKGNhbGVuZGFyT2JqICE9IHVuZGVmaW5lZCkge1xuXG4gICAgICAgICAgICAgICAgZGFvID0gbmV3IENsaWVudEN1c3RvbURhbyhkYW8pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLkRhdGEuQ2xpZW50SUQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsZW5kYXJPYmouc2V0VmFsdWUoJ0NsaWVudElEJywgdGhpcy5EYXRhLkNsaWVudElEKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsZW5kYXJFeHRPYmouc2V0VmFsdWUoJ0NsaWVudElEJywgdGhpcy5EYXRhLkNsaWVudElEKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FsZW5kYXJPYmouc2V0VmFsdWUoJ0N1c3RvbWVyQ2xpZW50SUQnLCB0aGlzLkRhdGEuQ3VzdG9tZXJDbGllbnRJRCk7XG4gICAgICAgICAgICAgICAgY2FsZW5kYXJPYmouc2V0VmFsdWUoJ1RpdGxlJywgdGhpcy5EYXRhLlRpdGxlKTtcbiAgICAgICAgICAgICAgICBjYWxlbmRhck9iai5zZXRWYWx1ZSgnTG9jYXRpb24nLCB0aGlzLkRhdGEuTG9jYXRpb24pO1xuICAgICAgICAgICAgICAgIGNhbGVuZGFyT2JqLnNldFZhbHVlKCdDYWxlbmRhclR5cGUnLCB0aGlzLkRhdGEuQ2FsZW5kYXJUeXBlKTtcbiAgICAgICAgICAgICAgICBjYWxlbmRhck9iai5zZXRWYWx1ZSgnSXNBbGxEYXknLCB0aGlzLkRhdGEuSXNBbGxEYXkpO1xuICAgICAgICAgICAgICAgIGNhbGVuZGFyT2JqLnNldFZhbHVlKCdTdGFydFRpbWUnLCB0aGlzLkRhdGEuU3RhcnREYXRlVGltZS5nZXRUaW1lKCkpO1xuICAgICAgICAgICAgICAgIGNhbGVuZGFyT2JqLnNldFZhbHVlKCdFbmRUaW1lJywgdGhpcy5EYXRhLkVuZERhdGVUaW1lLmdldFRpbWUoKSk7XG4gICAgICAgICAgICAgICAgY2FsZW5kYXJPYmouc2V0VmFsdWUoJ0lzQWxlcnQnLCB0aGlzLkRhdGEuSXNBbGVydCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuRGF0YS5Jc0FsZXJ0ID09PSAnWScpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsZW5kYXJPYmouc2V0VmFsdWUoJ0FsZXJ0MScsIHRoaXMuRGF0YS5BbGVydDEpO1xuICAgICAgICAgICAgICAgICAgICBjYWxlbmRhck9iai5zZXRWYWx1ZSgnQWxlcnQyJywgdGhpcy5EYXRhLkFsZXJ0Mik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjYWxlbmRhck9iai5zZXRWYWx1ZSgnQWxlcnQxJywgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIGNhbGVuZGFyT2JqLnNldFZhbHVlKCdBbGVydDInLCBudWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FsZW5kYXJPYmouc2V0VmFsdWUoJ0FsZXJ0MycsIG51bGwpO1xuICAgICAgICAgICAgICAgIGNhbGVuZGFyT2JqLnNldFZhbHVlKCdSZW1hcmsnLCB0aGlzLkRhdGEuUmVtYXJrKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInNhdmUgY2FsZW5kYXJPYmo6XCIsIGNhbGVuZGFyT2JqKTtcblxuXG4gICAgICAgICAgICAgICAgLy8gZmlsbCBleHRlbnNpb25cbiAgICAgICAgICAgICAgICBjYWxlbmRhckV4dE9iaiA9IFRhYmxlVXRpbHMuZmlsbFRhYmxlQ29sdW1uKGNhbGVuZGFyRXh0T2JqLCB0aGlzLkRhdGEpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLkRhdGFbXCJFZGl0VHlwZVwiXSA9PT0gXCJlZGl0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsZW5kYXJPYmouYWRkUmVzdHJpY3Rpb24obmV3IEVxdWFsUmVzdHJpY3Rpb24oXCJDbGllbnRJRFwiLCBbdGhpcy5EYXRhLkNsaWVudElEXSkpO1xuICAgICAgICAgICAgICAgICAgICBjYWxlbmRhckV4dE9iai5hZGRSZXN0cmljdGlvbihuZXcgRXF1YWxSZXN0cmljdGlvbihcIkNsaWVudElEXCIsIFt0aGlzLkRhdGEuQ2xpZW50SURdKSk7XG4gICAgICAgICAgICAgICAgICAgIGRhby50cmFuc2FjdGlvblVwZGF0ZShjYWxlbmRhck9iaik7XG4gICAgICAgICAgICAgICAgICAgIGRhby50cmFuc2FjdGlvblVwZGF0ZShjYWxlbmRhckV4dE9iaik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkYW8udHJhbnNhY3Rpb25JbnNlcnQoY2FsZW5kYXJPYmopO1xuICAgICAgICAgICAgICAgICAgICBkYW8udHJhbnNhY3Rpb25JbnNlcnQoY2FsZW5kYXJFeHRPYmopO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRhby5ydW5UcmFuc2FjdGlvbigpLnN1YnNjcmliZShyZXNwID0+IHtcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChyZXNwKTtcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXX0=