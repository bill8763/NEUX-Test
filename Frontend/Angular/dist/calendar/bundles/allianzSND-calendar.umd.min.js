!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("date-fns"),require("@angular/core"),require("@allianzSND/ui"),require("@angular/common"),require("@angular/forms"),require("@allianz/ngx-ndbx"),require("@allianz/ngx-ndbx/icon"),require("@allianz/ngx-ndbx/formfield"),require("@allianz/ngx-ndbx/datefield"),require("rxjs"),require("@allianzSND/core")):"function"==typeof define&&define.amd?define("@allianzSND/calendar",["exports","date-fns","@angular/core","@allianzSND/ui","@angular/common","@angular/forms","@allianz/ngx-ndbx","@allianz/ngx-ndbx/icon","@allianz/ngx-ndbx/formfield","@allianz/ngx-ndbx/datefield","rxjs","@allianzSND/core"],e):e((t.allianzSND=t.allianzSND||{},t.allianzSND.calendar={}),t.dateFns,t.ng.core,t.ui,t.ng.common,t.ng.forms,t.ngxNdbx,t.icon,t.formfield,t.datefield,t.rxjs,t.i1)}(this,function(t,h,o,n,e,a,i,r,l,s,c,y){"use strict";var m=function(){function t(t,e){this._primary=t,this._secondary=e}return t.prototype.setCalendarEventColor=function(t,e){this._primary=t,this._secondary=e},Object.defineProperty(t.prototype,"primary",{get:function(){return this._primary},set:function(t){this._primary=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"secondary",{get:function(){return this._secondary},set:function(t){this._secondary=t},enumerable:!0,configurable:!0}),t}(),d=function(){function t(t,e,n,a,i,r,o,l,s,c,d,p,u,g){this._clientID=t,this._calendarID=e,this._title=n,this._location=a,this._activity=i,this._isAllDay="Y"==r,this._start=new Date(o),this._end=new Date(l),this._isAlert="Y"==s,this._alert1=c,this._alert2=d,this._alert3=p,this._remark=u,y.StringUtils.isEmpty(this._activity)&&(this._activity=null),y.StringUtils.isEmpty(this._title)&&(this._title=""),y.StringUtils.isEmpty(this._location)&&(this._location=""),y.StringUtils.isEmpty(this._alert1)&&(this._alert1=""),y.StringUtils.isEmpty(this._alert2)&&(this._alert2=null),y.StringUtils.isEmpty(this._alert3)&&(this._alert3=""),y.StringUtils.isEmpty(this._remark)&&(this._remark="");var h=JSON.parse(g);null!=h&&(this._color=new m(h.color,h.backgroundColor))}return Object.defineProperty(t.prototype,"clientID",{get:function(){return this._clientID},set:function(t){this._clientID=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"calendarID",{get:function(){return this._calendarID},set:function(t){this._calendarID=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(t){this._title=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"location",{get:function(){return this._location},set:function(t){this._location=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activity",{get:function(){return this._activity},set:function(t){this._activity=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allDay",{get:function(){return this._isAllDay},set:function(t){this._isAllDay=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this._start},set:function(t){this._start=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._end},set:function(t){this._end=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAlert",{get:function(){return this._isAlert},set:function(t){this._isAlert=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alert1",{get:function(){return this._alert1},set:function(t){this._alert1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alert2",{get:function(){return this._alert2},set:function(t){this._alert2=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alert3",{get:function(){return this._alert3},set:function(t){this._alert3=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"remark",{get:function(){return this._remark},set:function(t){this._remark=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(t){var e=JSON.parse(t);null!=e&&(this._color=new m(e.color,e.backgroundColor))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayActivity",{get:function(){return this._displayActivity},set:function(t){this._displayActivity=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayAlert1",{get:function(){return this._displayAlert1},set:function(t){this._displayAlert1=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayAlert2",{get:function(){return this._displayAlert2},set:function(t){this._displayAlert2=t},enumerable:!0,configurable:!0}),t}(),p=function(){function t(t,e,n){this.dispatch=t,this.profileCodeService=e,this.APIFactory=n}return t.prototype.getCalendarEventList=function(t,e,n){var l=this;console.debug("calendar-service-getCalendarEventList",t,e,n);var a=this.APIFactory.getAPI("getCalendarEventList");return a.startTime=t,a.endTime=e,c.Observable.create(function(o){l.dispatch.dispatch(a).subscribe(function(t){console.debug("calendar-service-getCAlendarEventList response",t);var e=[],n=t.Body;if(n){for(var a=0;a<n.length;a++){var i=n[a],r=new d(i.ClientID,i.CalendarID,i.Title,i.Location,i.CalendarType,i.IsAllDay,new Date(i.StartTime),new Date(i.EndTime),i.Remark,i.IsAlert,i.Alert1,i.Alert2,i.Alert3,l.profileCodeService.getArgumentsByCode("Calendar_Type",i.CalendarType));e.push(r)}e=l.sortCalendarEventList(e),o.next(e),o.complete()}else o.next([]),o.complete()})})},t.prototype.getCalendarEventDetail=function(t){var i=this,e=this.APIFactory.getAPI("getCalendarEventDetail");return e.ClientID=t,c.Observable.create(function(a){i.dispatch.dispatch(e).subscribe(function(t){var e,n=t.Body;n=n[0],e=new d(n.ClientID,n.CalendarID,n.Title,n.Location,n.CalendarType,n.IsAllDay,new Date(n.StartTime),new Date(n.EndTime),n.IsAlert,n.Alert1,n.Alert2,n.Alert3,n.Remark,i.profileCodeService.getArgumentsByCode("Calendar_Type",n.CalendarType)),a.next(e),a.complete()})})},t.prototype.deleteCalendarEvent=function(t){var n=this,a=this.APIFactory.getAPI("deleteCalendarEvent");return a.clientID=t,c.Observable.create(function(e){n.dispatch.dispatch(a).subscribe(function(t){e.next(t.Header),e.complete()})})},t.prototype.addCalendarEvent=function(t){var n=this;t=this.adjustAlert(t);var a=this.APIFactory.getAPI("addCalendarEvent");return a.setCalendarEvent(t),c.Observable.create(function(e){n.dispatch.dispatch(a).subscribe(function(t){e.next(t.Header),e.complete()})})},t.prototype.updateCalendarEvent=function(t,e){var n=this;e=this.adjustAlert(e);var a=this.APIFactory.getAPI("updateCalendarEvent");return a.ClientID=t,a.setCalendarEvent(e),c.Observable.create(function(e){n.dispatch.dispatch(a).subscribe(function(t){e.next(t.Header),e.complete()})})},t.prototype.adjustAlert=function(t){if("Default"==t.alert1&&(t.alert1=""),"Default"==t.alert2&&(t.alert2=""),t.isAlert&&y.StringUtils.isNotEmpty(t.alert1)&&y.StringUtils.isNotEmpty(t.alert2)){if(t.allDay){if(JSON.parse(this.profileCodeService.getArgumentsByCode("Calendar_RemindTime",t.alert1)).day>JSON.parse(this.profileCodeService.getArgumentsByCode("Calendar_RemindTime",t.alert2)).day){var e=t.alert1;t.alert1=t.alert2,t.alert2=e}}else if(JSON.parse(this.profileCodeService.getArgumentsByCode("Calendar_RemindTime",t.alert1)).min>JSON.parse(this.profileCodeService.getArgumentsByCode("Calendar_RemindTime",t.alert2)).min){e=t.alert1;t.alert1=t.alert2,t.alert2=e}}else t.isAlert||(t.alert1="",t.alert2="",t.alert3="");return t.color=this.profileCodeService.getArgumentsByCode("Calendar_Type",t.activity),t},t.prototype.calendarValidation=function(t){var e=new y.ValidationResult;return""==t.title&&e.setErrorMap("title","required"),60<t.title.length&&e.setErrorMap("title","maxLength"),""==t.location&&e.setErrorMap("location","required"),100<t.location.length&&e.setErrorMap("location","maxLength"),"Default"!=t.activity&&""!=t.activity||e.setErrorMap("activity","required"),1==t.isAlert&&"Default"==t.alert1&&"Default"==t.alert2&&e.setErrorMap("alert1","required"),1==t.isAlert&&t.alert1==t.alert2&&"Default"!=t.alert1&&e.setErrorMap("alert2","sameAlert"),h.differenceInMinutes(t.end,t.start)<15&&0<=h.differenceInMinutes(t.end,t.start)&&1!=t.allDay?e.setErrorMap("time","minTime"):h.differenceInMinutes(t.end,t.start)<0&&e.setErrorMap("time","errorTime"),500<t.remark.length&&e.setErrorMap("remark","maxLength"),e},t.prototype.sortCalendarEventList=function(t){for(var e=0;e<t.length-1;e++)for(var n=e+1;n<t.length;n++)if(t[n].allDay&&!t[e].allDay){var a=t[e];t[e]=t[n],t[n]=a}for(e=0;e<t.length-1;e++)for(n=e+1;n<t.length;n++)if(t[n].allDay==t[e].allDay)if(t[e].allDay){if(t[n].start<t[e].start){a=t[e];t[e]=t[n],t[n]=a}else if(h.isSameDay(t[n].start,t[e].start)&&t[n].end>t[e].end){a=t[e];t[e]=t[n],t[n]=a}}else if(t[n].start<t[e].start){a=t[e];t[e]=t[n],t[n]=a}return t},t.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:y.APIDispatch},{type:y.ProfileCodeService},{type:y.APIFactory}]},t.ngInjectableDef=o.defineInjectable({factory:function(){return new t(o.inject(y.APIDispatch),o.inject(y.ProfileCodeService),o.inject(y.APIFactory))},token:t,providedIn:"root"}),t}();var u=function(){function t(t,e,n,a,i,r){this.changeDetector=t,this.elementRef=e,this.settingService=n,this.translateService=a,this.calendarService=i,this.profileCodeService=r,this._parentHeight=0,this.parentHeightChange=new o.EventEmitter,this.YEAR="year",this.MONTH="month",this.WEEK="week",this.DAY="day",this.viewTypeIndex=2,this.viewType=this.MONTH,this.viewDate=new Date,this.weekStartsOn=1,this.calendarHeight=0,this.clientID="",this.translateMap=new Map,this.optionMap=new Map,this.storeStartDate=new Date,this.storeEndDate=new Date,this.calendarEventList=[],this.calendarEventListAfterFilter=[],this.viewDateCalendarEventList=[],this.activityTypeList=[],this.alertTypeList=[],this.language=new y.Language,this.currentFilterOptionList=[],this.isExpandFilter=!1,this.isExpandDetail=!1,this.isExpandEdit=!1,this.isDelete=!1,this.isSave=!1,this.isSaveClick=!1,this.isCalendarDelete=!1,this.isLoading=!1,this.dayTypesList=["Cross_Day","All_Day"],this.weekdaysList=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.monthsList=["January","February","March","April","May","June","July","August","September","October","November","December"],this.noSchedule="No_Schedule",this.outsideSpace={top:0,left:0},this.paddindData={top:10,right:10,bottom:10,left:1023<window.innerWidth?170:10}}return Object.defineProperty(t.prototype,"parentHeight",{get:function(){return this._parentHeight},set:function(t){this._parentHeight=t,0==this._parentHeight&&(this._parentHeight=window.innerHeight),this.parentHeightChange.emit(this._parentHeight);var e=this.titleBtnsBlock.nativeElement,n=e.getBoundingClientRect();this.calendarHeight=this._parentHeight-n.height-parseInt(window.getComputedStyle(e).marginBottom),this.changeDetector.markForCheck()},enumerable:!0,configurable:!0}),t.prototype.onResize=function(t){this.windowWidth=t.target.innerWidth,this.changeDetector.markForCheck()},t.prototype.ngOnInit=function(){var e=this;this.activityTypeList=this.profileCodeService.getCodeArray("Calendar_Type"),this.alertTypeList=this.profileCodeService.getCodeArray("Calendar_RemindTime"),this.optionMap.set("Calendar_Type",this.activityTypeList),this.optionMap.set("Calendar_RemindTime",this.alertTypeList),this.dayTypesList.forEach(function(t){e.translateMap.set(t,e.translateService.translate(t))}),this.weekdaysList.forEach(function(t){e.translateMap.set(t,e.translateService.translate(t))}),this.monthsList.forEach(function(t){e.translateMap.set(t,e.translateService.translate(t))}),this.translateMap.set(this.noSchedule,this.translateService.translate(this.noSchedule)),this.windowWidth=window.innerWidth,this.windowWidth<1024&&(this.viewTypeIndex=0,this.changeDetector.markForCheck());var t=this.settingService.getSetting("CalendarFilterSetting").SettingVal;if(y.StringUtils.isNotEmpty(t)){var a=JSON.parse(t);0==Object.keys(a).length?this.activityTypeList.forEach(function(t){t.isCheck=!0}):this.activityTypeList.forEach(function(t){var e=t.getCode(),n=a[e]!=undefined&&a[e];t.isCheck=n})}this.setCurrentFilterOption(undefined),this.typeChange(this.viewTypeIndex),this.loadCalendarData()},t.prototype.ngAfterViewInit=function(){this.typeChange(this.viewTypeIndex)},t.prototype.switchPadViewMode=function(t){console.debug("switchPadViewMode"),t!=this.viewTypeIndex&&(this.typeChange(t),this.changeDetector.detectChanges(),this.loadCalendarData())},t.prototype.typeChange=function(t){var e,n;switch(console.debug("calendar-component-typeChange",t,this.viewType),this.viewTypeIndex=t){case 3:this.viewType=this.YEAR,this.calcuContentHeight();break;case 2:this.viewType=this.MONTH,this.calcuContentHeight(),e=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),1,0,0,0),n=new Date(h.getYear(h.addMonths(this.viewDate,1)),h.getMonth(h.addMonths(this.viewDate,1)),1,0,0,0);break;case 1:this.viewType=this.WEEK,e=new Date(h.getYear(h.addDays(this.viewDate,1-h.getDay(this.viewDate))),h.getMonth(h.addDays(this.viewDate,1-h.getDay(this.viewDate))),h.getDate(h.addDays(this.viewDate,1-h.getDay(this.viewDate))),0,0,0),n=new Date(h.getYear(h.addDays(this.viewDate,7-h.getDay(this.viewDate))),h.getMonth(h.addDays(this.viewDate,7-h.getDay(this.viewDate))),h.getDate(h.addDays(this.viewDate,7-h.getDay(this.viewDate))),0,0,0),this.scrollToCurrentTime();break;case 0:this.viewType=this.DAY,e=new Date(h.getYear(this.viewDate),h.getMonth(this.viewDate),h.getDate(this.viewDate),0,0,0),n=new Date(h.getYear(h.addDays(this.viewDate,1)),h.getMonth(h.addDays(this.viewDate,1)),h.getDate(h.addDays(this.viewDate,1)),0,0,0),this.scrollToCurrentTime()}this.viewType!=this.YEAR&&y.StringUtils.isNotEmpty(e)&&y.StringUtils.isNotEmpty(n)&&(this.storeStartDate=e,this.storeEndDate=n),console.debug("calendar-component-typeChange done")},t.prototype.mobileBackViewType=function(){switch(console.debug("mobileBackViewType",this.viewType),this.viewType){case this.MONTH:this.typeChange(3);break;case this.WEEK:case this.DAY:this.typeChange(2)}this.loadCalendarData()},t.prototype.clickToday=function(){this.viewDate=new Date,console.warn("clickToday",this.viewDate),this.changeDetector.detectChanges(),this.loadCalendarData(),this.loadViewDateCalendarEventList()},t.prototype.onViewDateChange=function(t){var e=new Date(t.viewDate),n=t.action;console.debug("calendar-component update viewDate"),h.isSameMonth(this.viewDate,e)&&this.isPad()?this.viewDate=e:(this.viewDate=e,this.viewType==this.YEAR&&n==y.ChangeAction.CLICK?this.typeChange(2):this.viewType!=this.MONTH||this.isPad()||n!=y.ChangeAction.CLICK?this.typeChange(this.viewTypeIndex):this.typeChange(0),this.loadViewDateCalendarEventList(),this.loadCalendarData())},t.prototype.loadCalendarData=function(){var e=this;console.debug("loadCalendar data"),this.viewType!==this.YEAR&&(20<this.calendarEventListAfterFilter.length&&(this.calendarEventListAfterFilter=[]),y.StringUtils.isNotEmpty(this.storeStartDate)&&y.StringUtils.isNotEmpty(this.storeEndDate)&&this.calendarService.getCalendarEventList(this.storeStartDate,this.storeEndDate,"").subscribe(function(t){e.calendarEventList=t,e.refreshCalendarEventList()})),console.debug("loadCalendar data done")},t.prototype.loadCalendarEventDetail=function(t){var e=this;this.calendarService.getCalendarEventDetail(t).subscribe(function(t){console.warn("getCalendarEventDetail",t),e.isLoading=!1,e.calendarEventDetail=t,e.calendarEventDetail.displayActivity=e.profileCodeService.convertCode2Text("Calendar_Type",e.calendarEventDetail.activity),e.calendarEventDetail.displayAlert1=e.profileCodeService.convertCode2Text("Calendar_RemindTime",e.calendarEventDetail.alert1),e.calendarEventDetail.displayAlert2=e.profileCodeService.convertCode2Text("Calendar_RemindTime",e.calendarEventDetail.alert2),e.onToggleDetailModal(!0)})},t.prototype.loadViewDateCalendarEventList=function(){var e=this,t=new Date(h.getYear(this.viewDate),h.getMonth(this.viewDate),h.getDate(this.viewDate),0,0,0);this.calendarService.getCalendarEventList(t,h.subMinutes(h.addDays(this.viewDate,1),1),"").subscribe(function(t){console.warn("loadViewDateCalendarEventList",t),e.viewDateCalendarEventList=t})},t.prototype.onClickDetail=function(t){this.clientID=t.clientID,this.loadCalendarEventDetail(this.clientID),this.loadViewDateCalendarEventList(),console.warn("clickDetail",this.clientID)},t.prototype.onClickDeleteCancel=function(){},t.prototype.onClickDeleteConfirm=function(){var e=this;this.calendarService.deleteCalendarEvent(this.clientID).subscribe(function(t){t.status&&(e.isDelete=t.status)}),this.loadCalendarData(),this.isExpandDetail&&this.onToggleDetailModal(!1)},t.prototype.onClickAppointmentSave=function(){this.isSaveClick=!0},t.prototype.onSaveCalendarEvent=function(e){var n=this;console.warn("saveCalendarEvent"),e&&(y.StringUtils.isNotEmpty(this.clientID)?(console.warn("updateCalendarEvent",e),this.calendarService.updateCalendarEvent(e.clientID,e).subscribe(function(t){t.status&&(n.calendarEventDetail=e,n.loadCalendarEventDetail(n.clientID),n.isLoading=!0,n.onToggleAppointmentModal(!1),n.loadCalendarData(),n.loadViewDateCalendarEventList())})):this.calendarService.addCalendarEvent(e).subscribe(function(t){t.status&&(n.isSave=!0,console.warn("addCalendarEvent"),e.clientID=t.clientID,n.calendarEventDetail=e,n.onToggleAppointmentModal(!1),n.loadCalendarData())})),this.isSaveClick=!1},t.prototype.isPad=function(){return 1024<=this.windowWidth},t.prototype.editEvent=function(){this.onToggleAppointmentModal(!0)},t.prototype.addEvent=function(){var t;this.clientID="",t=new Date(h.getYear(this.viewDate),h.getMonth(this.viewDate),h.getDate(this.viewDate),h.getHours(new Date),h.getMinutes(new Date)),t=h.addMinutes(t,5-h.getMinutes(t)%5),t=h.addHours(t,1),this.calendarEventDetail=new d("","","","",null,"N",t,h.addHours(t,1),"Y","8","","","",null),this.loadViewDateCalendarEventList(),this.onToggleAppointmentModal(!0)},t.prototype.onActivityTypeListChange=function(t){var e=this;this.alertTypeList=t,this.currentFilterOptionList=[];var n={};this.activityTypeList.forEach(function(t){console.debug("activityType codeItem",t),n!=undefined&&(n[t.getCode()]=t.isCheck),t.isCheck&&e.currentFilterOptionList.push(t.getCode())}),this.filterOptionChange(this.currentFilterOptionList),this.settingValueChange(n)},t.prototype.settingValueChange=function(t){var e=new y.Setting(this.settingService.getSetting("CalendarFilterSetting").SettingID,this.settingService.getSetting("CalendarFilterSetting").SettingName,JSON.stringify(t));this.settingService.updateSetting(e).subscribe(function(t){console.debug("calendar.component-update setting",t)})},t.prototype.filterOptionChange=function(t){console.warn("currentFilterOption",t),this.currentFilterOptionList=t,this.refreshCalendarEventList()},t.prototype.setCurrentFilterOption=function(e){var n=this;this.currentFilterOptionList=[],this.activityTypeList.forEach(function(t){console.debug("activityType codeItem",t),e!=undefined&&(e[t.getCode()]=t.isCheck),t.isCheck&&n.currentFilterOptionList.push(t.getCode())})},t.prototype.refreshCalendarEventList=function(){var e=this;this.calendarEventListAfterFilter=[],console.debug("start refreshCalendarEventList",this.calendarEventList.length),this.calendarEventListAfterFilter=this.calendarEventList.filter(function(t){return-1<e.currentFilterOptionList.indexOf(t.activity)}),console.debug("start refreshCalendarEventList done",this.calendarEventListAfterFilter.length),this.viewType!=this.DAY&&this.viewType!=this.WEEK||this.scrollToCurrentTime()},t.prototype.scrollToCurrentTime=function(){var u=this,g=this;setTimeout(function(){var t,e,n=g.elementRef.nativeElement.querySelectorAll("div.cal-time-events");try{for(var a=function d(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}(n),i=a.next();!i.done;i=a.next()){var r=i.value,o=g.elementRef.nativeElement.querySelector("div.cal-day-headers"),l=g.elementRef.nativeElement.querySelector("div.cal-all-day-events"),s=null!=l?l.getBoundingClientRect().height:0;if(null!=o){r.style.maxHeight=g.calendarHeight-o.getBoundingClientRect().height-s-parseInt(window.getComputedStyle(o).marginBottom)+"px";var c=h.getHours(new Date);console.log("current Hour:",h.getHours(new Date)),3<c&&(r.scrollTop=80*Math.floor((c-3)/2)+82*(Math.floor((c-3)/2)+(c-3)%2))}}}catch(p){t={error:p}}finally{try{i&&!i.done&&(e=a["return"])&&e.call(a)}finally{if(t)throw t.error}}u.changeDetector.markForCheck()},200)},t.prototype.calcuContentHeight=function(){var a=this;console.debug("calcuContentHeight");var i=this;setTimeout(function(){console.warn("calcuContentHeight",a.calendarHeight);var t=i.elementRef.nativeElement.querySelector(".ui-calendar-year"),e=i.elementRef.nativeElement.querySelector("app-ui-calendar-year");null!=t&&null!=e&&(1023<i.windowWidth?(e.style.minHeight=i.calendarHeight-parseInt(window.getComputedStyle(t).marginTop)+"px",e.style.height=i.calendarHeight-parseInt(window.getComputedStyle(t).marginTop)+"px"):t.style.height=i.calendarHeight-parseInt(window.getComputedStyle(t).marginTop)+"px");var n=i.elementRef.nativeElement.querySelector(".cal-month-view");null!=n&&1023<i.windowWidth&&(n.style.maxHeight=i.calendarHeight+"px",n.style.minHeight=i.calendarHeight+"px"),"0px"==n.style.maxHeight&&(console.warn("Here"),n.style.maxHeight="97vh",n.style.minHeight="97vh"),a.changeDetector.markForCheck()},100)},t.prototype.onToggleAppointmentModal=function(t){var e=this;setTimeout(function(){e.isExpandEdit=t,e.isExpandFilter&&e.onCloseInfo(),e.changeDetector.markForCheck()},0)},t.prototype.onToggleDetailModal=function(t){this.isExpandDetail=t,this.isExpandFilter&&this.onCloseInfo()},t.prototype.onToggleFilterModal=function(t){this.isExpandFilter||this.onCloseInfo()},t.prototype.onInfoTabClick=function(t){console.warn("infoTabClick"),console.warn("nowShowBtn",this.nowShowBtn),this.nowShowBtn!==undefined?t!==undefined&&(console.warn("messageContent",t.messageContent,this.nowShowBtn.messageContent),t.messageContent!==this.nowShowBtn.messageContent?(this.nowShowBtn.closeInfo(),this.nowShowBtn=t):this.resetInfoPos()):this.nowShowBtn=t,this.nowShowBtn.messageContent===this.filterInfo&&(this.isExpandFilter=!0)},t.prototype.resetInfoPos=function(){this.nowShowBtn!==undefined&&this.nowShowBtn.countPos()},t.prototype.onCloseInfo=function(){this.isExpandFilter=!1,this.nowShowBtn!==undefined&&this.nowShowBtn.closeInfo()},t.decorators=[{type:o.Component,args:[{selector:"snd-calendar",template:'<app-ui-main-full>\n  <div main class="main-calendar">\n\n    <div #titleBtnsBlock class="calendar-title-actionBtns">\n\n      <div class="calendar-title-block">\n        <ng-template *ngIf="windowWidth < 1024; then title_mobileBlock else title_pcBlock"></ng-template>\n\n        <ng-template #title_pcBlock>\n          <p class="calendar-title-year font-size_h5">{{ this.viewDate | date: \'yyyy\' }}</p>\n          <p class="calendar-title-month font-size_h5" [hidden]="this.viewType === \'year\'">{{ this.translateMap.get(this.viewDate | date: \'MMMM\') ? this.translateMap.get(this.viewDate | date: \'MMMM\') :  this.viewDate | date: \'MMMM\'}}</p>\n        </ng-template>\n        \x3c!-- end: title_pcBlock --\x3e\n\n        <ng-template #title_mobileBlock>\n          <div (click)="mobileBackViewType()">\n            \x3c!-- <nx-icon name="chevron-left" [hidden]="(this.viewType === \'year\')"></nx-icon> --\x3e\n            <div class="img-block" [hidden]="(this.viewType === \'year\')">\n              <img src="assets/img/icon-cal-back.svg" />\n            </div>\n            <p class="calendar-title-year" [hidden]="this.viewType === \'day\'">{{ this.viewDate | date: \'yyyy\' }}</p>\n            <p class="calendar-title-month" [hidden]="(this.viewType === \'month\' || this.viewType === \'year\')">{{ this.translateMap.get(this.viewDate | date: \'MMMM\') ? this.translateMap.get(this.viewDate | date: \'MMMM\') :  this.viewDate | date: \'MMMM\'}}</p>\n          </div>\n        </ng-template>\n        \x3c!-- end: title_mobileBlock --\x3e\n\n      </div>\n      \x3c!-- end calendar-title-block --\x3e\n\n      <div class="calendar-switch-btn">\n        <app-ui-tab-style2 (onTabChildClick)="switchPadViewMode($event)" [tabIndex]="this.viewTypeIndex">\n          <app-ui-tab-child>{{language.day |translate }}</app-ui-tab-child>\n          <app-ui-tab-child>{{language.week |translate }}</app-ui-tab-child>\n          <app-ui-tab-child>{{language.month |translate }}</app-ui-tab-child>\n          <app-ui-tab-child>{{language.year |translate }}</app-ui-tab-child>\n        </app-ui-tab-style2>\n        \x3c!-- end tab style2 --\x3e\n      </div>\n      \x3c!-- end calendar-switch-btn --\x3e\n\n      <div class="calendar-action-btn">\n        <ul class="ui-list-block">\n          <li class="list-item-block">\n            <div class="calendar-btn" (click)="clickToday()">\n              <div class="text-block">\n                <p>{{language.today |translate }}</p>\n              </div>\n            </div>\n          </li>\n          <li class="list-item-block">\n            <div class="calendar-btn" Action action="calendarAddEvent" (actionClick)="addEvent()">\n              <div class="img-block">\n                <img [src]="\'assets/img/icon-cal-new.svg\'" />\n              </div>\n            </div>\n          </li>\n          <li class="list-item-block calendar-filter-btn">\n            <app-ui-information-btn [outsideSpace]="outsideSpace"\n                                    [messageContent]="filterInfo"\n                                    (onClick)="onInfoTabClick($event)" >\n\n              <div class="calendar-btn">\n                <div class="img-block">\n                  <img [src]="\'assets/img/icon-cal-filter.svg\'" />\n                </div>\n              </div>\n            </app-ui-information-btn>\n          </li>\n        </ul>\n      </div>\n      \x3c!-- end calendar-action-btn --\x3e\n    </div>\n    \x3c!-- end calendar-title-actionBtns --\x3e\n    \x3c!-- </app-ui-infinite-scroll> --\x3e\n\n    \x3c!-- Filter content --\x3e\n    <ng-template #filterContent>\n      <snd-calendar-filter [optionMap]="optionMap" (activityTypeListChange)="onActivityTypeListChange($event)"></snd-calendar-filter>\n    </ng-template>\n\n    \x3c!--info content--\x3e\n    <app-ui-information-content #filterInfo class="filter-pc"\n                                (btnOnClick)="onCloseInfo()"\n                                [defaultPos]="\'bottom\'"\n                                [paddindData]="paddindData"\n                                [showArrow]="false">\n      <ng-container *ngTemplateOutlet="filterContent"></ng-container>\n    </app-ui-information-content>\n    \x3c!-- end: Filter content --\x3e\n\n    \x3c!--\n      [(isSwitchView)]="isLoading"\n    --\x3e\n    <utils-calendar class="calendar-container"\n                    [ngClass]="(isExpandDetail || isExpandEdit ? \'no-scroll\':\'\')"\n                    [viewType]="viewType"\n                    [weekStartsOn]="weekStartsOn"\n                    [viewDate]="viewDate"\n                    [translateMap]="translateMap"\n                    [eventList]="calendarEventListAfterFilter"\n                    (viewDateChange)="onViewDateChange($event)"\n                    (uiCalendarClickEventItem)="onClickDetail($event)"\n                    (uiCalendarMoreInfoClicked)="onInfoTabClick($event)"></utils-calendar>\n  </div>\n  \x3c!-- end: main --\x3e\n\n  <div global-main>\n    \x3c!--delete block --\x3e\n    <app-ui-alert-confirm #calendarDelete [(isPopupOpen)]="isCalendarDelete" (onCancel)="onClickDeleteCancel()" (onConfirm)="onClickDeleteConfirm()" [title]="language.delete | translate"\n                          [message]="language.deleteMessage | translate" [cancelBtnText]="language.no | translate" [confirmBtnText]="language.yes | translate">\n    </app-ui-alert-confirm>\n    \x3c!-- end: Appointment delete --\x3e\n\n    \x3c!-- detail block --\x3e\n    <app-ui-modal-style-text1 class="wd-md"\n                              [(isPopupOpen)]="isExpandDetail"\n                              (close)="onToggleDetailModal($event)"\n                              [ngClass]="{\'no-scroll\': isExpandEdit}">\n      <ng-container textType="modal-title-detail">{{language.appointmentDetail | translate}}</ng-container>\n      <ng-container textType="modal-content-detail">\n        <snd-calendar-detail [calendarEventDetail]="calendarEventDetail"></snd-calendar-detail>\n      </ng-container>\n      \x3c!-- end: popup-content --\x3e\n      <ng-container textType="modal-btm-detail">\n        <app-ui-btn-layout>\n          <app-ui-btn [btnHeight]="\'sm\'" [btnStyle]="\'border\'" (ClickBtn)="isCalendarDelete = true">\n            <ng-container TextType="cust">{{language.delete | translate}}</ng-container>\n          </app-ui-btn>\n          <app-ui-btn [btnHeight]="\'sm\'" (ClickBtn)="editEvent()">\n            \x3c!-- <ng-container TextType="cust"><span [routerLink]="[\'editEvent\']">EDIT</span></ng-container> --\x3e\n            <ng-container TextType="cust">{{language.edit | translate}}</ng-container>\n          </app-ui-btn>\n        </app-ui-btn-layout>\n      </ng-container>\n      \x3c!-- end: modal-btm-detail --\x3e\n    </app-ui-modal-style-text1>\n    \x3c!-- end: Appointment Detail --\x3e\n\n    \x3c!--add/edit calendar popup--\x3e\n    <app-ui-modal-style-text1 class="wd-lg calendar-edit-content"\n                              [(isPopupOpen)]="isExpandEdit"\n                              [isScrollToTop]="true"\n                              (close)="onToggleAppointmentModal(false)"\n                              [isBackdropClose]="false">\n      <ng-container textType="modal-title-detail">{{language.appointment | translate}}</ng-container>\n      <ng-container textType="modal-content-detail">\n        <snd-calendar-edit [calendarEventDetail]="calendarEventDetail"\n                           [todayCalendarEvent]="viewDateCalendarEventList"\n                           [isSaveClick]="isSaveClick"\n                           [viewDate]="viewDate"\n                           [translateMap]="translateMap"\n                           [optionMap]="optionMap"\n                           (saveEvent)="onSaveCalendarEvent($event)"></snd-calendar-edit>\n\n      </ng-container>\n      \x3c!-- end popup-content --\x3e\n      <ng-container textType="modal-btm-detail">\n        <app-ui-btn-layout>\n          <app-ui-btn [btnWd]="\'md\'" [btnHeight]="\'sm\'" (ClickBtn)="onClickAppointmentSave()">\n            <ng-container TextType="cust">{{language.save | translate}}</ng-container>\n          </app-ui-btn>\n        </app-ui-btn-layout>\n      </ng-container>\n      \x3c!-- end modal-btm-detail --\x3e\n    </app-ui-modal-style-text1>\n    \x3c!-- end: add/edit calendar --\x3e\n\n    <app-ui-popup-style-feedback [(isPopupOpen)]="isSave">\n      <ng-container textType="modal-img-detail">\n        <nx-icon name=\'check\' size=\'auto\'></nx-icon>\n      </ng-container>\n      <ng-container textType="modal-content-detail">{{language.saved | translate}}</ng-container>\n    </app-ui-popup-style-feedback>\n    \x3c!-- end: Appointment save --\x3e\n\n    \x3c!-- Delete Success --\x3e\n    <app-ui-popup-style-feedback [(isPopupOpen)]="isDelete">\n      <ng-container textType="modal-img-detail">\n        <nx-icon name=\'check\' size=\'auto\'></nx-icon>\n      </ng-container>\n      <ng-container textType="modal-content-detail">{{language.delete | translate}}</ng-container>\n    </app-ui-popup-style-feedback>\n    \x3c!-- end of Delete Success --\x3e\n\n    <app-ui-popup-style-feedback [(isPopupOpen)]="isLoading" [hasAutoDisappear]="false">\n      <ng-container textType="modal-img-detail">\n        <app-ui-refresh-icon></app-ui-refresh-icon>\n      </ng-container>\n      <ng-container textType="modal-content-detail">Loading</ng-container>\n    </app-ui-popup-style-feedback>\n\n    \x3c!-- filter block --\x3e\n    <app-ui-modal-style-text1 class="wd-sm" [(isPopupOpen)]="isExpandFilter" [isHasBtmBlock]="false" (close)="onToggleFilterModal($event)" class="filter-mobile">\n      <ng-container textType="modal-title-detail">{{language.filter |translate }}</ng-container>\n      <ng-container textType="modal-content-detail">\n        <ng-container *ngTemplateOutlet="filterContent"></ng-container>\n      </ng-container>\n      \x3c!-- end: popup-content --\x3e\n    </app-ui-modal-style-text1>\n    \x3c!-- end: Filter --\x3e\n  </div>\n  \x3c!-- end: global-main --\x3e\n</app-ui-main-full>\n',changeDetection:o.ChangeDetectionStrategy.OnPush,styles:["@keyframes fadein{from{opacity:0}to{opacity:1}}@-webkit-keyframes fadein{from{opacity:0}to{opacity:1}}:host{background-color:transparent}:host *{-webkit-tap-highlight-color:transparent}:host ::ng-deep .ui-refresher-content{background-color:#f5f5f5}:host ::ng-deep .ui-page-content .ui-main-full-content{padding:0!important}:host .link-btn{cursor:pointer}:host .main-calendar{display:inline-block;width:100%;height:100%}:host .calendar-title-actionBtns{display:flex;justify-content:space-between;align-items:center;padding:25px 30px 0}:host .calendar-title-actionBtns:not(:last-child){margin-bottom:35px}:host .calendar-title-block{min-width:195px}:host .calendar-title-block .link-btn{display:flex}:host .calendar-title-block p{display:inline-block;margin:0;font-weight:700;line-height:1.33;letter-spacing:.2px;color:#414141}:host .calendar-title-block p:not(:last-child){margin-right:20px}:host .calendar-title-block p[hidden]{display:none}:host .calendar-switch-btn{max-width:280px;margin-right:40px}:host .calendar-action-btn .ui-list-block{display:flex;justify-content:flex-start;align-items:stretch;list-style-type:none}:host .calendar-action-btn .ui-list-block .list-item-block:not(:last-child){margin-right:20px}:host .calendar-action-btn .ui-list-block .calendar-btn{display:flex;min-width:40px;height:100%;cursor:pointer}:host .calendar-action-btn .ui-list-block .calendar-btn .img-block,:host .calendar-action-btn .ui-list-block .calendar-btn .text-block{flex:1;margin:auto 0}:host .calendar-action-btn .ui-list-block .img-block{display:inline-block;width:40px;height:40px}:host .calendar-action-btn .ui-list-block .img-block img{display:inline-block;width:100%}:host .calendar-action-btn .ui-list-block .text-block{display:flex}:host .calendar-action-btn .ui-list-block .text-block>p{margin:auto 0;flex:1;font-size:.875rem;font-weight:700;line-height:1.43;letter-spacing:.2px;color:#007ab3}:host .calendar-action-btn .ui-list-block .calendar-filter-btn ::ng-deep .info-content .info-info-content{padding:20px}:host .calendar-action-btn .ui-list-block .calendar-filter-btn ::ng-deep .info-content .control-btn:after{display:none}:host ::ng-deep .cal-month-view{background-color:#f5f5f5}:host .filter-pc ::ng-deep .info-info-content{padding:25px 20px;border-radius:5px}:host .filter-mobile::ng-deep{display:none}:host .calendar-filter-item:not(:last-child){margin-bottom:25px}:host .calendar-filter-item ::ng-deep .nx-checkbox .nx-checkbox__control{margin-top:0}:host .calendar-filter-item ::ng-deep .form-checkbox .check-text{line-height:1.4;letter-spacing:.2px}:host .no-scroll *,:host .no-scroll ::ng-deep *{overflow-y:hidden!important}:host .calendar-detail-content ::ng-deep .gas-layout-form .gas-row-block:first-child{margin-top:0}:host .calendar-detail-content ::ng-deep app-ui-info-text2 .info-unit-block .title-block{margin-bottom:0}:host .calendar-detail-content ::ng-deep app-ui-info-text2 .info-unit-block .text-block>p{color:#414141;font-weight:300}:host .calendar-edit-content ::ng-deep .modal-block{padding-left:0;padding-right:0}:host .calendar-edit-content ::ng-deep .modal-block .nx-modal__container .nx-modal__content{padding-right:0}:host .calendar-edit-content ::ng-deep .modal-block app-calendar-edit>[class*=gas-col-]:last-child{padding-right:0;padding-left:20px}@media screen and (max-width:1023px){:host ::ng-deep .ui-page-content{background-color:#fff!important}:host ::ng-deep .ui-page-content .ui-main-full-content{min-height:auto!important;background-color:transparent!important}:host ::ng-deep .ui-calendar-year{overflow:hidden;overflow-y:auto;margin-top:-5px}:host ::ng-deep .ui-calendar-month-m .cal-days .cal-day-cell:not(.cal-today) .event-date.event-day-active{background-color:transparent!important;color:#414141!important}:host ::ng-deep .ui-calendar-month-m .cal-days .cal-today .event-date{background-color:#003781!important;color:#fff!important}:host .calendar-title-block{position:relative;padding-left:10px}:host .calendar-title-block nx-icon::ng-deep{font-size:1.25rem;font-weight:700;color:#003781}:host .calendar-title-block nx-icon[hidden]::ng-deep{display:none}:host .calendar-title-block .img-block{display:inline-block;vertical-align:middle;width:16px}:host .calendar-title-block .img-block[hidden]{display:none}:host .calendar-title-block .img-block img{display:inline-block;width:6px;height:10px;position:absolute;top:calc(50% - 5px)}:host .calendar-title-block p{font-size:1.25rem}:host .calendar-title-block p:not(:last-child){margin-right:10px}:host .calendar-title-actionBtns{padding:5px 5px 0}:host .calendar-title-actionBtns:not(:last-child){margin-bottom:15px}:host .calendar-switch-btn{display:none}:host .calendar-action-btn .ui-list-block .list-item-block:not(:last-child){margin-right:10px}:host .filter-mobile::ng-deep{display:block}:host .filter-pc::ng-deep .info-info-content{display:none}:host .calendar-filter-item:not(:last-child){margin-bottom:35px}}@media screen and (max-width:374px){:host .calendar-title-block{min-width:auto}}"]}]}],t.ctorParameters=function(){return[{type:o.ChangeDetectorRef},{type:o.ElementRef},{type:y.SettingService},{type:y.TranslateService},{type:p},{type:y.ProfileCodeService}]},t.propDecorators={parentHeight:[{type:o.Input}],parentHeightChange:[{type:o.Output}],titleBtnsBlock:[{type:o.ViewChild,args:["titleBtnsBlock"]}],onResize:[{type:o.HostListener,args:["window:resize",["$event"]]}],nowShowBtn:[{type:o.ViewChild,args:[n.UiInformationBtnComponent]}],infoContent:[{type:o.ViewChild,args:[n.UiInformationContentComponent]}],filterInfo:[{type:o.ViewChild,args:["filterInfo"]}]},t}(),g=function(){function t(){this.language=new y.Language,this.isSameDay=!0}return Object.defineProperty(t.prototype,"calendarEventDetail",{get:function(){return this._calendarEventDetail},set:function(t){y.StringUtils.isNotEmpty(t)&&(this._calendarEventDetail=t,this.isSameDay=h.isSameDay(this._calendarEventDetail.end,this._calendarEventDetail.start))},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){},t.decorators=[{type:o.Component,args:[{selector:"snd-calendar-detail",template:'<div class="calendar-detail-content">\n  <ng-container *ngIf="calendarEventDetail">\n\n          <app-ui-info-text2>\n            <ng-container textType="title">{{language.title | translate}}</ng-container>\n            <ng-container textType="text">{{calendarEventDetail.title}}</ng-container>\n          </app-ui-info-text2>\n\n        <ng-container *ngIf="calendarEventDetail.location != \'\'">\n          <app-ui-info-text2>\n            <ng-container textType="title">{{language.location | translate}}</ng-container>\n            <ng-container textType="text">{{calendarEventDetail.location}}</ng-container>\n          </app-ui-info-text2>\n        </ng-container>\n\n          <app-ui-info-text2>\n            <ng-container textType="title">{{language.activity | translate}}</ng-container>\n            <ng-container textType="text">{{calendarEventDetail.displayActivity}}</ng-container>\n          </app-ui-info-text2>\n\n          <app-ui-info-text2>\n            <ng-container textType="title">{{language.date | translate}}</ng-container>\n            <ng-container textType="text" *ngIf="calendarEventDetail.allDay == true">\n              {{ calendarEventDetail.start | date: \'MM/dd/y\' }}-{{\n              calendarEventDetail.end | date: \'MM/dd/y\' }}</ng-container>\n            <ng-container textType="text" *ngIf="calendarEventDetail.allDay == false && isSameDay">\n              {{ calendarEventDetail.start | date: \'MM/dd/y HH:mm\' }}-{{\n              calendarEventDetail.end | date: \'HH:mm\' }}</ng-container>\n            <ng-container textType="text" *ngIf="calendarEventDetail.allDay == false && !isSameDay">\n              {{ calendarEventDetail.start | date: \'MM/dd/y HH:mm\' }}-<br />\n              {{ calendarEventDetail.end | date: \'MM/dd/y HH:mm\' }}</ng-container>\n          </app-ui-info-text2>\n\n        <ng-container *ngIf="calendarEventDetail.isAlert != false">\n          <app-ui-info-text2>\n            <ng-container textType="title">{{language.alert | translate}}</ng-container>\n            <ng-container textType="text">\n              {{calendarEventDetail.displayAlert1}}\n              <br />\n              {{calendarEventDetail.displayAlert2}}\n            </ng-container>\n          </app-ui-info-text2>\n        </ng-container>\n\n        <ng-container *ngIf="calendarEventDetail.remark != \'\' && calendarEventDetail.remark != null">\n          <app-ui-info-text2>\n            <ng-container textType="title">{{language.remark | translate}}</ng-container>\n            <ng-container textType="text">{{calendarEventDetail.remark}}</ng-container>\n          </app-ui-info-text2>\n        </ng-container>\n  </ng-container>\n</div>\n',styles:["@keyframes fadein{from{opacity:0}to{opacity:1}}@-webkit-keyframes fadein{from{opacity:0}to{opacity:1}}.calendar-detail-content{padding-top:30px}.calendar-detail-content ::ng-deep .gas-layout-form .gas-row-block:first-child{margin-top:0}.calendar-detail-content ::ng-deep app-ui-info-text2:not(:last-child){display:block;margin-bottom:30px}.calendar-detail-content ::ng-deep app-ui-info-text2 .info-unit-block .title-block{margin-bottom:0}.calendar-detail-content ::ng-deep app-ui-info-text2 .info-unit-block .text-block>p{color:#414141;font-weight:300}@media screen and (max-width:1023px){.calendar-detail-content{padding-top:0}}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={calendarEventDetail:[{type:o.Input}]},t}(),f=function(){function t(t){this.elementRef=t,this.saveEvent=new o.EventEmitter,this.startDateChange=new o.EventEmitter,this._viewDate=new Date,this._isSaveClick=!1,this._optionMap=new Map,this.language=new y.Language,this._translateMap=new Map,this.calendarEventList=[],this.activityOptionList=[],this.alertOptionList=[],this.validationResult=new y.ValidationResult,this.eventListBGColor="#f9f9f9",this.isInit=!0}return Object.defineProperty(t.prototype,"isSaveClick",{get:function(){return this._isSaveClick},set:function(t){this._isSaveClick=t,1==this._isSaveClick&&this.saveEventClick()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"calendarEventDetail",{get:function(){return this._calendarEventDetail},set:function(t){t&&(this._calendarEventDetail=t,console.warn("this.calendarEventDetail",this._calendarEventDetail),this.editEvent())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"optionMap",{get:function(){return this._optionMap},set:function(t){this._optionMap=t,this.activityOptionList=[];for(var e=0;e<this._optionMap.get("Calendar_Type").length;e++)this.activityOptionList.push(new n.SelectOption(this._optionMap.get("Calendar_Type")[e].getCode(),this._optionMap.get("Calendar_Type")[e].displayText))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"translateMap",{get:function(){return this._translateMap},set:function(t){this._translateMap=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewDate",{get:function(){return this._viewDate},set:function(t){console.warn("viewDateChange"),this._viewDate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"todayCalendarEvent",{get:function(){return this.calendarEventList},set:function(t){this.calendarEventList=t},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.windowWidth=window.innerWidth},t.prototype.onResize=function(t){this.windowWidth=t.target.innerWidth},t.prototype.editEvent=function(){this.isInit=!0,y.StringUtils.isEmpty(this._calendarEventDetail.alert1)&&(this._calendarEventDetail.alert1=""),y.StringUtils.isEmpty(this._calendarEventDetail.alert2)&&(this._calendarEventDetail.alert2=""),this.startDate=this._calendarEventDetail.start,this.startTime=this._calendarEventDetail.start,this.endDate=this._calendarEventDetail.end,this.endTime=this._calendarEventDetail.end,this.getAlertOptions(),this.showDate=(h.getMonth(this._viewDate)+1).toString()+"/"+h.getDate(this._viewDate).toString()+"/"+h.getYear(this._viewDate).toString()},t.prototype.saveEventClick=function(){console.warn("saveEvent"),this.validationForm(),this.validationResult.isTrue()?this.saveEvent.emit(this._calendarEventDetail):this.saveEvent.emit(null)},t.prototype.validationForm=function(){var e=this;[{maxLength:60,field:"title",isRequired:!0},{maxLength:100,field:"location",isRequired:!1},{maxLength:500,field:"remark",isRequired:!1}].forEach(function(t){e.onValidationInput(t.maxLength,t.field,t.isRequired)}),["activity","alert1","alert2"].forEach(function(t){e.onValidationSelect(t)}),this.onValidationTimeFormat(),this.onValidationTime(),null!=this.validationResult&&setTimeout(function(){e.scrollToError()},200)},t.prototype.onValidationInput=function(t,e,n){void 0===n&&(n=!1),this.validationResult.deleteError(e),console.debug("isRequired",n,"length",this._calendarEventDetail[e].length,"val","["+this._calendarEventDetail[e]+"]"),n&&this._calendarEventDetail[e]!=undefined&&y.StringUtils.isEmpty(y.StringUtils.trim(this._calendarEventDetail[e]))&&this.validationResult.setErrorMap(e,"required"),y.StringUtils.isNotEmpty(this._calendarEventDetail[e])&&this._calendarEventDetail[e].length>t&&0!=t&&this.validationResult.setErrorMap(e,"maxLength")},t.prototype.onValidationSelect=function(t){this.validationResult.deleteError(t),console.warn("field",t),"activity"==t&&(null!=this._calendarEventDetail.activity&&""!=this._calendarEventDetail.activity||this.validationResult.setErrorMap(t,"required")),"alert1"!=t&&"alert2"!=t||(this.validationResult.deleteError("alert1"),this.validationResult.deleteError("alert2"),this._calendarEventDetail.isAlert&&""==this._calendarEventDetail.alert1&&""==this._calendarEventDetail.alert2&&this.validationResult.setErrorMap("alert1","required"),this._calendarEventDetail.isAlert&&this._calendarEventDetail.alert1==this._calendarEventDetail.alert2&&""!=this._calendarEventDetail.alert1&&this.validationResult.setErrorMap("alert2","sameAlert"))},t.prototype.onValidationTimeFormat=function(){var e=this;["startDate","startTime","endDate","endTime","time"].forEach(function(t){e.validationResult.deleteError(t),"time"!=t&&null===e[t]&&e.validationResult.setErrorMap(t,"formatError")})},t.prototype.onValidationTime=function(){var e=this;["startDate","startTime","endDate","endTime"].forEach(function(t){e.validationResult.deleteError(t)}),this.combineTime(),h.differenceInMinutes(this._calendarEventDetail.end,this._calendarEventDetail.start)<15&&0<=h.differenceInMinutes(this._calendarEventDetail.end,this._calendarEventDetail.start)&&1!=this._calendarEventDetail.allDay?this.validationResult.setErrorMap("time","minTime"):h.differenceInMinutes(this._calendarEventDetail.end,this._calendarEventDetail.start)<0&&this.validationResult.setErrorMap("time","errorTime")},t.prototype.combineTime=function(){1==this._calendarEventDetail.allDay?(this._calendarEventDetail.start=new Date(h.getYear(this.startDate),h.getMonth(this.startDate),h.getDate(this.startDate),0,0),this._calendarEventDetail.end=new Date(h.getYear(this.endDate),h.getMonth(this.endDate),h.getDate(this.endDate),0,0)):(this._calendarEventDetail.start=new Date(h.getYear(this.startDate),h.getMonth(this.startDate),h.getDate(this.startDate),h.getHours(this.startTime),h.getMinutes(this.startTime)),this._calendarEventDetail.end=new Date(h.getYear(this.endDate),h.getMonth(this.endDate),h.getDate(this.endDate),h.getHours(this.endTime),h.getMinutes(this.endTime)))},t.prototype.onTimeChange=function(t,e){"startDate"==e?this.startDate=t:"startTime"==e?this.startTime=t:"endDate"==e?this.endDate=t:"endTime"==e&&(this.endTime=t),this.onValidationTimeFormat(),this.isInit||("startDate"==e?this.onStartDateChange():"startTime"==e&&this.onStartTimeChange()),this.onValidationTime(),this.isInit=!1},t.prototype.onStartDateChange=function(){this.startTime=h.setDate(this.startTime,h.getDate(this.startDate)),this.endDate=h.addHours(this.startDate,1),this.endTime=h.addHours(this.startTime,1),this.startDateChange.emit(this.startDate)},t.prototype.onStartTimeChange=function(){this.endDate=h.addHours(this.startTime,1),this.endTime=h.addHours(this.startTime,1)},t.prototype.onIsAllDayChange=function(){if(this.onIsAlertChange(),!this._calendarEventDetail.allDay){var t=new Date;t=h.addMinutes(t,5-h.getMinutes(t)%5),t=h.addHours(t,1),this.startDate=t,this.startTime=t}},t.prototype.onIsAlertChange=function(){this.getAlertOptions(),1==this._calendarEventDetail.isAlert&&1==this._calendarEventDetail.allDay?(this._calendarEventDetail.alert1="2",this._calendarEventDetail.alert2=""):1==this._calendarEventDetail.isAlert&&0==this._calendarEventDetail.allDay&&(this._calendarEventDetail.alert1="8",this._calendarEventDetail.alert2="")},t.prototype.getAlertOptions=function(){var e=this;this.alertOptionList=[],this._optionMap.get("Calendar_RemindTime")&&this._optionMap.get("Calendar_RemindTime").forEach(function(t){e._calendarEventDetail.allDay==JSON.parse(t.getArguments()).isAllDay&&e.alertOptionList.push(new n.SelectOption(t.getCode(),t.displayText))})},t.prototype.scrollToError=function(){var t=document.body.getElementsByClassName("error-msg");t.item(0)&&t.item(0).parentElement.parentElement.scrollIntoView({behavior:"smooth",block:"start"})},t.prototype.onTitleChange=function(t){this._calendarEventDetail.title=t,this.onValidationInput(60,"title",!0)},t.decorators=[{type:o.Component,args:[{selector:"snd-calendar-edit",template:'<ng-template *ngIf="windowWidth < 1024; then mobileBlock else pcBlock"></ng-template>\n\n<ng-template #mobileBlock>\n  <ng-container *ngTemplateOutlet="formContent"></ng-container>\n</ng-template>\n\x3c!-- end: mobileBlock --\x3e\n\n<ng-template #pcBlock>\n  <ng-container *ngTemplateOutlet="formContent"></ng-container>\n  <ng-container *ngTemplateOutlet="eventListContent"></ng-container>\n</ng-template>\n\x3c!-- end: pcBlock --\x3e\n\n<ng-template #formContent>\n  <ng-container *ngIf="_calendarEventDetail">\n    <app-ui-form-layout-col [colPC]="8" [colNB]="8" [colPad]="12" [colMobile]="12">\n      <app-ui-form-layout-advanced>\n        \x3c!-- title --\x3e\n        <app-ui-form-layout-row>\n          <app-ui-form-layout-col>\n            <app-ui-form-input [(nxValue)]="_calendarEventDetail.title" (nxValueChange)="onValidationInput(60,\'title\',true)" [inputTitle]="language.title | translate" [name]="\'input1\'" [isDisable]="false" [isError]="validationResult.isError(\'title\')" [maxLength]="60"></app-ui-form-input>\n            <app-ui-form-error-msg *ngIf="validationResult.getErrorMsg(\'title\') == \'required\'">{{language.wrongTitleRequired | translate}}</app-ui-form-error-msg>\n            <app-ui-form-error-msg *ngIf="validationResult.getErrorMsg(\'title\') == \'maxLength\'">{{language.wrongTitleMaximum | translate}}</app-ui-form-error-msg>\n          </app-ui-form-layout-col>\n        </app-ui-form-layout-row>\n        \x3c!-- end of row1 --\x3e\n\n        \x3c!-- location --\x3e\n        <app-ui-form-layout-row>\n          <app-ui-form-layout-col>\n            <app-ui-form-input [(nxValue)]="_calendarEventDetail.location" (nxValueChange)="onValidationInput(100,\'location\',false)" [inputTitle]="language.location | translate" [name]="\'input1\'" [isDisable]="false" [isError]="validationResult.isError(\'location\')" [maxLength]="100"></app-ui-form-input>\n            <app-ui-form-error-msg *ngIf="validationResult.getErrorMsg(\'location\') == \'maxLength\'">{{language.wrongLocationMaximum | translate}}</app-ui-form-error-msg>\n          </app-ui-form-layout-col>\n        </app-ui-form-layout-row>\n        \x3c!-- end of row2 --\x3e\n\n        \x3c!-- Activity --\x3e\n        <app-ui-form-layout-row>\n          <app-ui-form-layout-col>\n            <app-ui-form-select [(nxValue)]="_calendarEventDetail.activity"  (nxValueChange)="onValidationSelect(\'activity\')" [selectTitle]="language.activity | translate" [selectOption]=\'activityOptionList\'[isError]="validationResult.isError(\'activity\')" ></app-ui-form-select>\n            <app-ui-form-error-msg *ngIf="validationResult.isError(\'activity\')">{{language.wrongActivityRequired | translate}}</app-ui-form-error-msg>\n          </app-ui-form-layout-col>\n        </app-ui-form-layout-row>\n        \x3c!-- end of row3 --\x3e\n\n        \x3c!-- AllDay --\x3e\n        <app-ui-form-title-sm>{{language.date | translate}}</app-ui-form-title-sm>\n        <app-ui-form-layout-row>\n          <app-ui-form-layout-col>\n            <app-ui-form-switcher [(nxValue)]="_calendarEventDetail.allDay" [labelTxt]="language.allDay | translate" (nxValueChange)="onIsAllDayChange()"></app-ui-form-switcher>\n          </app-ui-form-layout-col>\n        </app-ui-form-layout-row>\n        \x3c!-- end of row4 --\x3e\n\n        \x3c!-- Datetime picker --\x3e\n        <ng-container *ngIf= \'_calendarEventDetail.allDay == true\'>\n          <app-ui-form-layout-row>\n            <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12" >\n              <app-ui-form-date [title]="language.from | translate" [nxValue]="startDate"  (nxValueChange)="onTimeChange($event,\'startDate\')" [isError]="validationResult.isError(\'startDate\')"></app-ui-form-date>\n              <app-ui-form-error-msg *ngIf="validationResult.getErrorMsg(\'startDate\') == \'formatError\'">{{language.wrongDate | translate}}</app-ui-form-error-msg>\n              <app-ui-form-error-msg *ngIf="validationResult.getErrorMsg(\'time\') == \'errorTime\'">{{language.wrongStartTime | translate}}</app-ui-form-error-msg>\n            </app-ui-form-layout-col>\n\n            <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n              <app-ui-form-date class="calendar-edit-allDay-date" [title]="language.to | translate" [nxValue]="endDate" (nxValueChange)="onTimeChange($event,\'endDate\')" [isError]="validationResult.isError(\'endDate\') || validationResult.isError(\'time\')"></app-ui-form-date>\n              <app-ui-form-error-msg *ngIf="validationResult.getErrorMsg(\'endDate\') == \'formatError\'">{{language.wrongDate | translate}}</app-ui-form-error-msg>\n\n            </app-ui-form-layout-col>\n          </app-ui-form-layout-row>\n        </ng-container>\n\n        <ng-container *ngIf= \'_calendarEventDetail.allDay == false\'>\n          \x3c!-- Start Date --\x3e\n          <app-ui-form-layout-row>\n            <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n              <app-ui-form-date [title]="language.from | translate" [nxValue]="startDate" (nxValueChange)="onTimeChange($event,\'startDate\')" [isError]="validationResult.isError(\'startDate\')"></app-ui-form-date>\n              <app-ui-form-error-msg *ngIf="validationResult.getErrorMsg(\'startDate\') == \'formatError\'">{{language.wrongDate | translate}}</app-ui-form-error-msg>\n              <app-ui-form-error-msg *ngIf="validationResult.getErrorMsg(\'time\') == \'errorTime\'">{{language.wrongStartTime | translate}}</app-ui-form-error-msg>\n            </app-ui-form-layout-col>\n            <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n              <app-ui-form-timepicker [nxValue]="startTime" (nxValueChange)="onTimeChange($event,\'startTime\')"\n                                      [isError]="validationResult.isError(\'startTime\')"></app-ui-form-timepicker>\n              <app-ui-form-error-msg *ngIf="validationResult.getErrorMsg(\'startTime\') == \'formatError\'">{{language.wrongTime | translate}}</app-ui-form-error-msg>\n\n            </app-ui-form-layout-col>\n          </app-ui-form-layout-row>\n          \x3c!-- end: Start Date --\x3e\n\n          \x3c!-- End Date --\x3e\n          <app-ui-form-layout-row>\n            <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n              <app-ui-form-date [title]="language.to | translate" [nxValue]="endDate" (nxValueChange)="onTimeChange($event,\'endDate\')" [isError]="validationResult.isError(\'endDate\') || validationResult.isError(\'time\')"></app-ui-form-date>\n              <app-ui-form-error-msg *ngIf="validationResult.getErrorMsg(\'endDate\') == \'formatError\'">{{language.wrongStartTime | translate}}</app-ui-form-error-msg>\n            </app-ui-form-layout-col>\n            <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n              <app-ui-form-timepicker [nxValue]="endTime" (nxValueChange)="onTimeChange($event,\'endTime\')"\n                                      [isError]="validationResult.isError(\'time\') || validationResult.isError(\'endTime\')"></app-ui-form-timepicker>\n              <app-ui-form-error-msg *ngIf="validationResult.getErrorMsg(\'endTime\') == \'formatError\'">{{language.wrongTime | translate}}</app-ui-form-error-msg>\n              <app-ui-form-error-msg *ngIf="validationResult.getErrorMsg(\'time\') == \'minTime\'">{{language.wrongEndTime | translate}}</app-ui-form-error-msg>\n            </app-ui-form-layout-col>\n          </app-ui-form-layout-row>\n          \x3c!-- end: End Date --\x3e\n        </ng-container>\n        \x3c!-- end of row5 --\x3e\n\n        \x3c!-- Alert --\x3e\n        <app-ui-form-title-sm>{{language.alert | translate}}</app-ui-form-title-sm>\n        <app-ui-form-layout-row calendarEditAlertRow="">\n          <app-ui-form-layout-col [colPC]="\'auto\'" [colNB]="\'auto\'" [colPad]="\'auto\'" [colMobile]="\'auto\'">\n            <app-ui-form-switcher class="calendar-edit-alert-switcher"\n              [(nxValue)]="_calendarEventDetail.isAlert" (nxValueChange)="onIsAlertChange()"></app-ui-form-switcher>\n          </app-ui-form-layout-col>\n          <ng-container *ngIf= \'_calendarEventDetail.isAlert == true\'>\n            <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="9">\n              <app-ui-form-select [(nxValue)]="_calendarEventDetail.alert1"\n                                  (nxValueChange)="onValidationSelect(\'alert1\')"\n                                  [isShowTitle]="false"\n                                  [selectTitle]="\'Alert1\'"\n                                  [selectOption]=\'alertOptionList\'\n                                  [isError]="validationResult.isError(\'alert1\')"\n                                  [placeholder]="language.alertPlaceholder | translate" ></app-ui-form-select>\n              <app-ui-form-error-msg *ngIf="validationResult.getErrorMsg(\'alert1\') == \'required\'">{{language.wrongAlertRequired | translate}}</app-ui-form-error-msg>\n            </app-ui-form-layout-col>\n          </ng-container>\n        </app-ui-form-layout-row>\n        \x3c!-- end of row6 --\x3e\n\n        \x3c!-- Second Alert --\x3e\n        <ng-container *ngIf= \'_calendarEventDetail.isAlert == true\'>\n          <app-ui-form-layout-row calendarEditAlertRow="">\n            <app-ui-form-layout-col [colPC]="\'auto\'" [colNB]="\'auto\'" [colPad]="\'auto\'" [colMobile]="\'auto\'">\n              <div class="calendar-edit-alert-switcher"></div>\n            </app-ui-form-layout-col>\n            <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="9">\n              <app-ui-form-select [(nxValue)]="_calendarEventDetail.alert2"\n                                  (nxValueChange)="onValidationSelect(\'alert2\')"\n                                  [isShowTitle]="false"\n                                  [selectTitle]="\'Alert2\'"\n                                  [selectOption]=\'alertOptionList\'\n                                  [isError]="validationResult.isError(\'alert2\')"\n                                  [placeholder]="language.alertPlaceholder | translate"></app-ui-form-select>\n              <app-ui-form-error-msg *ngIf="validationResult.getErrorMsg(\'alert2\') == \'sameAlert\'">{{language.wrongAlert | translate}}</app-ui-form-error-msg>\n            </app-ui-form-layout-col>\n          </app-ui-form-layout-row>\n        </ng-container>\n        \x3c!-- end of row7 --\x3e\n\n        \x3c!-- Remark --\x3e\n        <app-ui-form-layout-row>\n          <app-ui-form-layout-col>\n            <app-ui-form-input [(nxValue)]="_calendarEventDetail.remark" (nxValueChange)="onValidationInput(500,\'remark\')" [inputTitle]="language.remark | translate" [name]="\'input1\'"  [isDisable]="false" [isError]="validationResult.isError(\'remark\')" [maxLength]="500"></app-ui-form-input>\n            <app-ui-form-error-msg *ngIf="validationResult.isError(\'remark\')">{{language.wrongRemarkMaximum | translate}}</app-ui-form-error-msg>\n          </app-ui-form-layout-col>\n        </app-ui-form-layout-row>\n        \x3c!-- end of row8 --\x3e\n      </app-ui-form-layout-advanced>\n    </app-ui-form-layout-col>\n  </ng-container>\n</ng-template>\n\x3c!-- end: formContent --\x3e\n\n<ng-template #eventListContent>\n  <app-ui-form-layout-col [colPC]="4" [colNB]="4" [colPad]="0" [colMobile]="0" [ngStyle]="{ \'background-color\': eventListBGColor }">\n    <ng-container *ngIf="calendarEventList" >\n\n      <app-ui-calendar-event-list\n        [ngClass]="calendarEventList.length == 0? \'calendar-event-list-no-data\':\'\'"\n        [translateMap]="_translateMap"\n        [title]="calendarEventList.length>0 ? showDate:\'\'"\n        [colorCode]="eventListBGColor"\n        [eventList]="calendarEventList">\n        <div scheduleNoData class="calendar-edit-schedule">\n          <p>{{this.translateMap.get(\'No_Schedule\') ? this.translateMap.get(\'No_Schedule\') : \'You have no schedule for today\'}}</p>\n        </div>\n      </app-ui-calendar-event-list>\n    </ng-container>\n  </app-ui-form-layout-col>\n</ng-template>\n\x3c!-- end: evenListContent --\x3e\n',styles:["@keyframes fadein{from{opacity:0}to{opacity:1}}@-webkit-keyframes fadein{from{opacity:0}to{opacity:1}}:host{display:flex;height:100%}:host>app-ui-form-layout-col{padding-left:0!important;margin-bottom:0!important}:host>app-ui-form-layout-col:first-child{min-width:calc(100% - 200px);padding-left:20px!important;padding-right:20px}:host>app-ui-form-layout-col:last-child{max-width:200px}:host .calendar-edit-alert-switcher{display:inline-block;width:56px}:host ::ng-deep app-ui-text-type ::ng-deep .ui-text-type-container{padding-top:30px}:host ::ng-deep app-ui-text-type ::ng-deep .ui-text-type-container app-ui-text-type-item:last-child{padding-bottom:20px;border-bottom:1px solid #ececec}:host ::ng-deep app-ui-text-type ::ng-deep .ui-text-type-content{width:100%;min-width:1px}:host ::ng-deep app-ui-text-type ::ng-deep .ui-text-type-content>p{display:block;max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}:host ::ng-deep .calendar-event-list-no-data{display:inline-block;width:calc(100% + 6px);height:100%}:host ::ng-deep .calendar-event-list-no-data ::ng-deep app-ui-text-type .ui-text-type-container{width:100%;height:100%;padding:0}:host ::ng-deep .calendar-edit-schedule{width:100%;height:100%;margin:0;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTk4IiBoZWlnaHQ9IjY3NCIgdmlld0JveD0iMCAwIDE5OCA2NzQiPgogICAgPGRlZnM+CiAgICAgICAgPHBhdGggaWQ9ImEiIGQ9Ik0wIDBoMTk4djY3NUgweiIvPgogICAgPC9kZWZzPgogICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xKSI+CiAgICAgICAgPG1hc2sgaWQ9ImIiIGZpbGw9IiNmZmYiPgogICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNhIi8+CiAgICAgICAgPC9tYXNrPgogICAgICAgIDxnIGZpbGw9IiNFQ0VDRUMiIG1hc2s9InVybCgjYikiPgogICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjI0NSAxMC44NWMzLjAwNCAwIDUuMjg5IDMuNTc4IDguMDA0IDIuOTQzIDUuOTMyLTEuMzg5IDguMzctOS4wMjkgMTQuODc5LTkuMDI5IDUuMDI1IDAgNy45MzQgNi4yMzYgMTIuNTcgNS44MTRDMTkxLjA0MiA5LjkwOCAxOTQuMzUyIDAgMjAyLjI2IDBjNy4zMSAwIDEwLjkwMyA4LjQ4MiAxNy42NTcgOS4yMyAzLjk3OS40NDIgNi44ODktNC4zMzYgMTEuMjEtNC4zMzYgOC4xNTUgMCA4Ljg3MiAzLjI0MiAxNi4zOCA1LjU4MiAyLjE1NC42NzIgMy44MDMgNC44NzIgNi4yMzggNC44NzIgMi44NjMgMCA1LjQwMy44OTggNy4wMzMgMi44OThIMTM2LjAwM2MyLjA5Mi00IDYuNzgtNy4zOTYgMTIuMjQyLTcuMzk2Ii8+CiAgICAgICAgPC9nPgogICAgICAgIDxwYXRoIGZpbGw9IiNFQ0VDRUMiIGQ9Ik0yMzEuODYyIDE3NC4zNTJjLTEuNTE3IDAtMi42NyAxLjc2NS00LjA0MSAxLjQ1Mi0yLjk5NS0uNjg2LTQuMjI2LTQuNDU0LTcuNTEzLTQuNDU0LTIuNTM2IDAtNC4wMDUgMy4wNzYtNi4zNDYgMi44NjgtMy43MDktLjMzLTUuMzc5LTUuMjE4LTkuMzcyLTUuMjE4LTMuNjkyIDAtNS41MDUgNC4xODQtOC45MTUgNC41NTMtMi4wMS4yMTgtMy40NzktMi4xMzktNS42NjEtMi4xMzktNC4xMTYgMC00LjQ3OCAxLjYtOC4yNyAyLjc1My0xLjA4OC4zMzItMS45MiAyLjQwNC0zLjE1IDIuNDA0LTEuNDQ0IDAtMi43MjcuNDQyLTMuNTUgMS40MjloNjNjLTEuMDU3LTEuOTczLTMuNDI1LTMuNjQ4LTYuMTgyLTMuNjQ4TTU5Ljc4NCAzMTQuNzA0Yy0zLjAxIDAtNS4yOTggMy41My04LjAxOCAyLjkwMy01Ljk0Mi0xLjM3LTguMzg0LTguOTA3LTE0LjkwNi04LjkwNy01LjAzMiAwLTcuOTQ3IDYuMTUyLTEyLjU5MyA1LjczNUMxNi45MSAzMTMuNzc1IDEzLjU5NiAzMDQgNS42NzQgMzA0Yy03LjMyNiAwLTEwLjkyMyA4LjM2OC0xNy42OSA5LjEwNi0zLjk4Ni40MzYtNi45MDItNC4yNzgtMTEuMjMyLTQuMjc4LTguMTY3IDAtOC44ODUgMy4xOTgtMTYuNDA3IDUuNTA3LTIuMTYuNjYzLTMuODEgNC44MDYtNi4yNTEgNC44MDYtMi44NjYgMC01LjQxMi44ODYtNy4wNDYgMi44NTloMTI1Yy0yLjA5NS0zLjk0Ni02Ljc5My03LjI5Ni0xMi4yNjQtNy4yOTZNMTYuMDU5IDY2My4wMTNjNC4yMDYtNi43NTMgNy41ODItMTQuODc0IDE1LjMyMy0xNy44MzYgNy4yNDQtMi43NyAxNS42NTYgNy44NTMgMjMuMjY4IDYuMTUgMTUuNTcyLTMuNDg4IDE3LjM3Mi01NS4wNjQgMzcuMDc3LTU1LjA2NCAxOC43MDkgMCA1MS4yNzcgNDEuMTkgNzcuMjIyIDI2LjEgMjQuOTAyLTE0LjQ4MyAzOS41ODYtNTguOTcgNjAuMTItNjUuMjUxIDM5LjYtMTIuMTEzIDQ3Ljg3IDc4LjcyNiA3Ni4zMjcgNzguNzI2IDguMDUgMCAxMy45MDQtMjEuNzMgMjAuMDIxLTI0LjQzNiAxOS42OTItOC43MTMgMTAuNDIgNDcuMjYgMzguNDIgNjMuNTk4SC0zLjAxNGM2LjAyLS40NDIgMTQuODY3LTUuMjM0IDE5LjA3NC0xMS45ODd6IiBtYXNrPSJ1cmwoI2IpIi8+CiAgICAgICAgPGcgbWFzaz0idXJsKCNiKSI+CiAgICAgICAgICAgIDxwYXRoIGZpbGw9IiM3MEIxQjQiIGQ9Ik0xMDQuNDY4IDU2NWwtNyAyLjg2MWMuODI1IDcuNTg2LTE0LjA0NyAyMy4wNzQtMTQuMDQ3IDIzLjA3NGwzLjkzNy4yOXMyNS40MzQtMTYuMDk3IDE3LjExLTI2LjIyNSIvPgogICAgICAgICAgICA8cGF0aCBmaWxsPSIjQTdBN0E3IiBkPSJNMTEwLjU4NiA1MTguNDdjMCAzLjU3NC0yLjQ4MSA2LjQ3MS01LjU0MSA2LjQ3MS0zLjA2IDAtNS41NDItMi44OTctNS41NDItNi40NzEgMC0zLjU3MyAyLjQ4MS02LjQ3IDUuNTQyLTYuNDcgMy4wNiAwIDUuNTQgMi44OTcgNS41NCA2LjQ3Ii8+CiAgICAgICAgICAgIDxwYXRoIGZpbGw9IiNGMkEwOEEiIGQ9Ik0xMDQuODY4IDUyMS4yNjVjMi4yMjIuNzU2IDMuNSAyLjg5NiAyLjg1MSA0Ljc4LS42NDcgMS44ODUtMi45NzQgMi44LTUuMTk2IDIuMDQzLTIuMjIzLS43NTctMy40OTktMi44OTYtMi44NTMtNC43OC42NDktMS44ODUgMi45NzYtMi43OTkgNS4xOTgtMi4wNDMiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzc5QkVDMSIgZD0iTTEyMS44IDYwMS41MDRsLTMzLjM1My01LjEyNmM0LjUwOC05Ljk5NiAxMy4wNjYtOS45OTYgOC41NjktMzAuNDc0LTMuNDE3LTE1LjQ5MyAxMC41MjItMTkuOTggMTYuMjUyLTE0LjkxOGExNS4wNDIgMTUuMDQyIDAgMCAxIDIuMDMgMi4yMTFsLjA2NS4wNzdjMy42NjEgNC44MiA2LjkyNSAxMy43MDMgNi41IDI1Ljg2LS4xMjggMy43NDYtLjA2MyA2LjQ0Mi4wNjUgOC43MDUuMjMxIDQuNjc4LjY1NSA3LjQ1My0uMTI4IDEzLjY2NSIvPgogICAgICAgICAgICA8cGF0aCBmaWxsPSIjQkFFMEU3IiBkPSJNMTIwLjYgNjA2Ljg5M2MuNTEzLTEuMzAxIDEuNDAyLTMuODk4IDEuMTM3LTguMzIyTDg4LjExNCA1OTZhMjcuNDE1IDI3LjQxNSAwIDAgMC0uNTc3IDIuMDA0Yy00LjU0My4wNjgtOC44NDguMzk3LTExLjg2MyAxLjMxNS0xNi42MiA1LjA1NC0xOS4zOSAzMy4zNDMtMTkuMzkgMzMuMzQzbDMuMDUgMS4xMzlzNC43NC0xMy45NDggMTIuNTQ2LTIwLjExN2MtLjA2IDExLjA5IDEzLjUwMiAyOC44MzkgMTMuNTAyIDI4LjgzOWwzLjY3LS44ODRzLTEyLjgxNS0yMi44OTItMi4xMDMtMjUuNjAxYzcuNTgzLTEuOTE4IDExLjAyNC0yLjE0IDE3LjczNC0yLjExNiAzLjA5NC4zMyA2LjI3MS40MjUgOS41Mi4wNTQgMy41NDYtLjY1MyA1LjQ0LTQuNjQ1IDYuMzk3LTcuMDgzIi8+CiAgICAgICAgICAgIDxwYXRoIGZpbGw9IiM3MEIxQjQiIGQ9Ik0xMjEuNDYyIDU4Ny44MmMtNi4wNTEgNS44NjYtMTUuNjIyIDkuODkzLTE1LjYyMiA5Ljg5M2wtNS4zMzItMi42MnMyMS4yMzctNS43NzggMTcuNjUyLTE0LjU0OGMtMi45OC03LjMxLTcuNDEzLTE4LjQ3LTguNDQtMjEuNTI2LS44MjItMi4zOS0uNjA1LTExLjkzOSA0Ljc2Ni02LjIyNS4xMTYuMTE2LjIzMS4yNTYuMzQ3LjM4M2wuMDY0LjA3N2MzLjY2MiA0LjgyIDYuOTI1IDEzLjcwMyA2LjUwMSAyNS44Ni0uMTI5IDMuNzQ2LS4wNjMgNi40NDIuMDY0IDguNzA1Ii8+CiAgICAgICAgICAgIDxwYXRoIGZpbGw9IiM3OUJFQzEiIGQ9Ik0xMTQuNDkgNTUyLjY5YzMuODcgMy42MTQgOC4xMjYgMTYuMTMgMTEuMDQ5IDIyLjQ0MSA1LjUwNCAxMS44ODItMjEuMjk0IDIxLjEyMy0yMS4yOTQgMjEuMTIzbC0zLjczNy0xLjI2NXMyMS45Mi0xMC40NCAxNy41MzQtMTguODM3Yy0zLjUzOC02Ljc3Ni01LjkyLTEwLjM2LTEwLjA2Ny0xOC40MjktMi41Ny00Ljk5Ny0uMzY5LTExLjQ1NyA2LjUxNC01LjAzMyIvPgogICAgICAgICAgICA8cGF0aCBmaWxsPSIjRTlENkI4IiBkPSJNMTAyLjEzIDU5NC4zOTNjLTIuMzMtMS4wMS01LjEyMi4wODUtNS41NjkgMS41MTgtLjQ0NiAxLjQzMyAxLjEwOCAyLjE0OCA1LjE2IDIuNTI4IDQuMDUuMzc5IDQuNTYtMi4yMiA0LjU2LTIuMjJsLTQuMTUyLTEuODI2TTg1LjY4MSA2MzkuNDcybC01LjA4OCA1Ljk2N2MtLjU1LjY0OC4yMSAxLjUzNyAxLjAzOCAxLjIxbDcuNjEtMy4wMDJjLjY4Ni0uMjcuOTI5LTEuMDQyLjUwNi0xLjZsLTEuOTA4LTIuNTIxYy0uNTEzLS42NzgtMS42MDMtLjcwNS0yLjE1OC0uMDU0TTU4LjU1OCA2MzEuNTU0bC05LjI4LTQuNWMtLjc5OC0uMy0xLjM4My43MTQtLjc5NSAxLjM4bDcuMzI1IDcuODYyYy40ODYuNTUxIDEuMjk4LjUyIDEuNjg1LS4wNjVsMS43NDEtMi42MzdjLjQ2OC0uNzA5LjEyNy0xLjczOS0uNjc2LTIuMDRNMTA2LjUxIDUzNS43NDNjLjk3IDUuMDggMS40NTIgMTAuNjM3IDMuNTE1IDE0LjU4OS41MjQgMS4wMDEuMzk2IDIuMTEyLS40MiAyLjY2Ni0xLjI3Ny44NjQtMy40OCAxLjYxMi02LjU3Mi4wMTctMS4wNzQtLjU1NS0xLjY5LTEuNzMzLTEuNDgtMi43NDkuNDY1LTIuMjM5IDEuMTItNi40NTQuNDA5LTkuOTE2LTEuMDI0LTQuOTcyIDMuNzctOC42ODUgNC41NDgtNC42MDciLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iI0U5RDZCOCIgZD0iTTk0LjQ0NCA1NDEuODE0YzQuODAxIDkuMTggOS42NTQgMTAuMDc0IDEyLjg4LTMuOTc2IDMuMjI2LTE0LjA1MS0yMS45MzMtMTMuMzMzLTEyLjg4IDMuOTc2Ii8+CiAgICAgICAgICAgIDxwYXRoIGZpbGw9IiNBN0E3QTciIGQ9Ik0xMDIuOTE4IDUyM2MtMi4yNSAwLTQuMjYzIDEuMTg2LTUuNjEgMy4wNS0xLjUuNTQ1LTMuMDg0IDEuMzgtNC42ODMgMi41MzctMy42MjcgMi42MjQtOS4yMjUgMTIuMTM2LTguMDM2IDEyLjQyNiA0LjEyOCAxLjAwOCAxMC4yOTQuNDA4IDE1LjA3MS0xLjc3Ni45ODMuNTcgMi4wODYuODk5IDMuMjU4Ljg5OSA0LjA1MyAwIDcuMzM4LTMuODM2IDcuMzM4LTguNTY4IDAtNC43MzItMy4yODUtOC41NjgtNy4zMzgtOC41NjgiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iI0U5RDZCOCIgZD0iTTEwNC43NDUgNTM4LjQxOWMtLjY5OSAyLjUxNC4yMjggMy4zNTcgMy42OTQuOTQ4IDMuNDY2LTIuNDA4LTIuMzc2LTUuNjktMy42OTQtLjk0OCIvPgogICAgICAgICAgICA8cGF0aCBmaWxsPSIjRDNDNkNDIiBkPSJNMTA4LjkwOCA2MDAuMTU0SDgzLjQ3YTEuMDU0IDEuMDU0IDAgMCAxLTEuMDU0LTEuMDQ4di0uMDU4YzAtLjU3Ni40NzUtMS4wNDggMS4wNTQtMS4wNDhoMjUuNDM4Yy41NzkgMCAxLjA1My40NzIgMS4wNTMgMS4wNDh2LjA1OGMwIC41NzctLjQ3NCAxLjA0OC0xLjA1MyAxLjA0OCIvPgogICAgICAgICAgICA8cGF0aCBmaWxsPSIjRTRFNERGIiBkPSJNOTcuODM4IDYwMC41NzZoLTIzLjExYy0xLjIxOSAwLTIuNDI4LS45OTItMi42ODYtMi4yMDZsLTMuNjQ4LTE3LjE2M2MtLjI1OC0xLjIxNC41MjktMi4yMDcgMS43NS0yLjIwN2gyMy4xMDljMS4yMTkgMCAyLjQyOC45OTMgMi42ODYgMi4yMDdsMy42NDkgMTcuMTYzYy4yNTggMS4yMTQtLjUzIDIuMjA2LTEuNzUgMi4yMDYiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPgo=);background-repeat:no-repeat;background-size:cover;background-position:center bottom}:host ::ng-deep .calendar-edit-schedule p{padding:0 25px;font-size:.875rem;font-weight:300;line-height:2;letter-spacing:.2px;text-align:center;color:#414141}:host ::ng-deep .calendar-edit-schedule p:first-child{padding-top:200px}@media screen and (max-width:1023px){:host>app-ui-form-layout-col:first-child{padding-left:0!important}:host>app-ui-form-layout-col:first-child,:host>app-ui-form-layout-col:last-child{max-width:100%}:host .calendar-edit-allDay-date ::ng-deep .ui-datepicker{margin-top:15px}:host [calendarEditAlertRow] app-ui-form-layout-col:last-child{flex:1!important;max-width:100%!important}}"]}]}],t.ctorParameters=function(){return[{type:o.ElementRef}]},t.propDecorators={isSaveClick:[{type:o.Input}],calendarEventDetail:[{type:o.Input}],optionMap:[{type:o.Input}],translateMap:[{type:o.Input}],viewDate:[{type:o.Input}],todayCalendarEvent:[{type:o.Input}],saveEvent:[{type:o.Output}],startDateChange:[{type:o.Output}],onResize:[{type:o.HostListener,args:["window:resize",["$event"]]}]},t}(),D=function(){function t(){this._optionMap=new Map,this.activityTypeList=[],this.currentFilterOptionList=[],this.activityTypeListChange=new o.EventEmitter}return t.prototype.ngOnInit=function(){},Object.defineProperty(t.prototype,"optionMap",{get:function(){return this._optionMap},set:function(t){var e=this;this._optionMap=t,this.activityTypeList=this._optionMap.get("Calendar_Type"),this.activityTypeList.forEach(function(t){t.isCheck&&e.currentFilterOptionList.push(t.getCode())})},enumerable:!0,configurable:!0}),t.prototype.onActivityFilter=function(){this.activityTypeListChange.emit(this.activityTypeList)},t.prototype.toActivityColor=function(t){return JSON.parse(t.getArguments()).color},t.decorators=[{type:o.Component,args:[{selector:"snd-calendar-filter",template:'<ng-container *ngIf="activityTypeList">\n  <div class="calendar-filter-item" *ngFor=" let codeItem of activityTypeList">\n    <app-ui-form-checkbox [(nxValue)]="codeItem.isCheck" [isDisable]="false" (nxValueChange)="onActivityFilter()" [colorCode]="toActivityColor(codeItem)" >\n      <ng-container checkboxText="style2">{{codeItem.displayText}}</ng-container>\n    </app-ui-form-checkbox>\n  </div>\n</ng-container>\n',styles:["@keyframes fadein{from{opacity:0}to{opacity:1}}@-webkit-keyframes fadein{from{opacity:0}to{opacity:1}}.calendar-filter-item:not(:last-child){margin-bottom:25px}.calendar-filter-item ::ng-deep .nx-checkbox .nx-checkbox__control{margin-top:0}.calendar-filter-item ::ng-deep .form-checkbox .check-text{line-height:1.4;letter-spacing:.2px}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={optionMap:[{type:o.Input}],activityTypeListChange:[{type:o.Output}]},t}(),M=function(){function t(){}return t.decorators=[{type:o.NgModule,args:[{declarations:[u,f,g,D],imports:[r.NxIconModule,i.NxButtonModule,l.NxFormfieldModule,s.NxDatefieldModule,s.NxNativeDateModule,n.UIModule,y.CoreModule,e.CommonModule,a.FormsModule],exports:[f,u,g]}]}],t}(),v=function(){function t(t){this._DaoFactory=t}return t.prototype.setCalendarEvent=function(t){this._calendarEvent=t},t.prototype.getAPIName=function(){return"addCalendarEvent"},t.prototype.getMockPath=function(){return"./assets/mock/addCalendarEvent.json"},t.prototype.executeSQL=function(){var a=this;return c.Observable.create(function(e){var t=a._DaoFactory.getDefaultTable("TW_LH_SD_Calendar"),n=a._DaoFactory.getDefaultDao();t!=undefined?(n=new y.ClientCustomDao(n),t.setValue("Title",a._calendarEvent.title),t.setValue("Location",a._calendarEvent.location),t.setValue("CalendarType",a._calendarEvent.activity),1==a._calendarEvent.allDay?t.setValue("IsAllDay","Y"):t.setValue("IsAllDay","N"),t.setValue("StartTime",a._calendarEvent.start.getTime()),t.setValue("EndTime",a._calendarEvent.end.getTime()),1==a._calendarEvent.isAlert?t.setValue("IsAlert","Y"):t.setValue("IsAlert","N"),t.setValue("Alert1",a._calendarEvent.alert1),t.setValue("Alert2",a._calendarEvent.alert2),t.setValue("Alert3",null),t.setValue("Remark",a._calendarEvent.remark),n.insertByTable(t).subscribe(function(t){e.next(t),e.complete()})):(e.next(!1),e.complete())})},t}(),C=function(){function t(t){this._DaoFactory=t}return Object.defineProperty(t.prototype,"clientID",{set:function(t){this._clientID=t},enumerable:!0,configurable:!0}),t.prototype.getAPIName=function(){return"deleteCalendarEvent"},t.prototype.getMockPath=function(){return"./assets/mock/deleteCalendarEvent.json"},t.prototype.executeSQL=function(){var a=this;return c.Observable.create(function(e){var t=a._DaoFactory.getDefaultTable("TW_LH_SD_Calendar"),n=a._DaoFactory.getDefaultDao();t!=undefined&&n!=undefined?(n=new y.ClientCustomDao(n),t.addRestriction(new y.EqualRestriction("ClientID",[a._clientID])),n.deleteByTable(t).subscribe(function(t){e.next(t),e.complete()})):(e.next(!1),e.complete())})},t}(),T=function(){function t(t){this._DaoFactory=t}return Object.defineProperty(t.prototype,"ClientID",{set:function(t){this._clientID=t},enumerable:!0,configurable:!0}),t.prototype.getAPIName=function(){return"getCalendarEventDetail"},t.prototype.getMockPath=function(){return"./assets/mock/getCalendarEventDetail.json"},t.prototype.executeSQL=function(){var a=this;return c.Observable.create(function(e){var t=a._DaoFactory.getDefaultTable("TW_LH_SD_Calendar"),n=a._DaoFactory.getDefaultDao();t!=undefined&&n!=undefined?(n=new y.ClientCustomDao(n),t.addRestriction(new y.EqualRestriction("ClientID",[a._clientID])),n.queryByTable(t).subscribe(function(t){e.next(t),e.complete()})):(e.next(!1),e.complete())})},t}(),I=function(){function t(t){this._DaoFactory=t}return Object.defineProperty(t.prototype,"startTime",{set:function(t){this._startTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{set:function(t){this._endTime=t},enumerable:!0,configurable:!0}),t.prototype.getAPIName=function(){return"getCalendarEventList"},t.prototype.getMockPath=function(){return"./assets/mock/getCalendarEventList.json"},t.prototype.executeSQL=function(){var a=this;return c.Observable.create(function(e){var t=a._DaoFactory.getDefaultTable("TW_LH_SD_Calendar"),n=a._DaoFactory.getDefaultDao();t!=undefined&&n!=undefined?(n=new y.ClientCustomDao(n),t.addRestriction(new y.GreaterOrEqualRestriction("EndTime",[a._startTime.getTime()])),t.addRestriction(new y.LessOrEqualRestriction("StartTime",[a._endTime.getTime()])),t.addRestriction(new y.OrderByRestriction([{column:"StartTime",order:"ASC"}])),n.queryByTable(t).subscribe(function(t){console.log(t),e.next(t),e.complete()})):(e.next(!1),e.complete())})},t}(),x=function(){function t(t){this._DaoFactory=t}return Object.defineProperty(t.prototype,"ClientID",{set:function(t){this._clientID=t},enumerable:!0,configurable:!0}),t.prototype.setCalendarEvent=function(t){this._calendarEvent=t},t.prototype.getAPIName=function(){return"updateCalendarEvent"},t.prototype.getMockPath=function(){return"./assets/mock/updateCalendarEvent.json"},t.prototype.executeSQL=function(){var a=this;return c.Observable.create(function(e){var t=a._DaoFactory.getDefaultTable("TW_LH_SD_Calendar"),n=a._DaoFactory.getDefaultDao();t!=undefined&&n!=undefined?(n=new y.ClientCustomDao(n),t.addRestriction(new y.EqualRestriction("ClientID",[a._clientID])),t.setValue("CalendarID",a._calendarEvent.calendarID),t.setValue("Title",a._calendarEvent.title),t.setValue("Location",a._calendarEvent.location),t.setValue("CalendarType",a._calendarEvent.activity),1==a._calendarEvent.allDay?t.setValue("IsAllDay","Y"):t.setValue("IsAllDay","N"),t.setValue("StartTime",a._calendarEvent.start.getTime()),t.setValue("EndTime",a._calendarEvent.end.getTime()),1==a._calendarEvent.isAlert?t.setValue("IsAlert","Y"):t.setValue("IsAlert","N"),t.setValue("Alert1",a._calendarEvent.alert1),t.setValue("Alert2",a._calendarEvent.alert2),t.setValue("Alert3",a._calendarEvent.alert3),t.setValue("Remark",a._calendarEvent.remark),n.updateByTable(t).subscribe(function(t){e.next(t),e.complete()})):(e.next(!1),e.complete())})},t}();t.CalendarService=p,t.CalendarEventDetail=d,t.CalendarComponent=u,t.CalendarDetailComponent=g,t.CalendarEditComponent=f,t.CalendarFilterComponent=D,t.CalendarModule=M,t.CalendarEventAddAPI=v,t.CalendarEventDeleteAPI=C,t.CalendarEventDetailAPI=T,t.CalendarEventListAPI=I,t.CalendarEventUpdateAPI=x,t.d=g,t.c=f,t.e=D,t.a=u,t.b=p,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=allianzSND-calendar.umd.min.js.map