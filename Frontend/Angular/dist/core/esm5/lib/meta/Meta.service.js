/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable, Injector } from "@angular/core";
import { APIFactory } from "../api/APIFactory";
import { APIDispatch } from "../api/APIDispatch";
import { DaoFactory } from "../device/sqlite/DaoFactory";
import { AOPTokenService } from "../injectionToken/AOPToken.service";
import { ProfileCodeService } from "../service/profile/profile-code.service";
import * as i0 from "@angular/core";
import * as i1 from "../injectionToken/AOPToken.service";
import * as i2 from "../api/APIFactory";
import * as i3 from "../api/APIDispatch";
import * as i4 from "../device/sqlite/DaoFactory";
import * as i5 from "../service/profile/profile-code.service";
var MetaService = /** @class */ (function () {
    function MetaService(injector, AOPTokenService, APIFactory, dispatcher, DaoFactory, profileCodeService) {
        this.injector = injector;
        this.AOPTokenService = AOPTokenService;
        this.APIFactory = APIFactory;
        this.dispatcher = dispatcher;
        this.DaoFactory = DaoFactory;
        this.profileCodeService = profileCodeService;
    }
    //Get Meta setting by id
    //Get Meta setting by id
    /**
     * @param {?} id
     * @return {?}
     */
    MetaService.prototype.getMetaJson = 
    //Get Meta setting by id
    /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var configAPI = this.APIFactory.getAPI("getMetaConfig");
        ((/** @type {?} */ (configAPI))).configName = id;
        return this.dispatcher.dispatch(configAPI).toPromise();
    };
    MetaService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    MetaService.ctorParameters = function () { return [
        { type: Injector },
        { type: AOPTokenService },
        { type: APIFactory },
        { type: APIDispatch },
        { type: DaoFactory },
        { type: ProfileCodeService }
    ]; };
    /** @nocollapse */ MetaService.ngInjectableDef = i0.defineInjectable({ factory: function MetaService_Factory() { return new MetaService(i0.inject(i0.INJECTOR), i0.inject(i1.AOPTokenService), i0.inject(i2.APIFactory), i0.inject(i3.APIDispatch), i0.inject(i4.DaoFactory), i0.inject(i5.ProfileCodeService)); }, token: MetaService, providedIn: "root" });
    return MetaService;
}());
export { MetaService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    MetaService.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    MetaService.prototype.AOPTokenService;
    /**
     * @type {?}
     * @private
     */
    MetaService.prototype.APIFactory;
    /**
     * @type {?}
     * @private
     */
    MetaService.prototype.dispatcher;
    /**
     * @type {?}
     * @private
     */
    MetaService.prototype.DaoFactory;
    /**
     * @type {?}
     * @private
     */
    MetaService.prototype.profileCodeService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWV0YS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGFsbGlhbnpTTkQvY29yZS8iLCJzb3VyY2VzIjpbImxpYi9tZXRhL01ldGEuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDckQsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQy9DLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUVqRCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDekQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQ3JFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHlDQUF5QyxDQUFDOzs7Ozs7O0FBTzdFO0lBS0kscUJBQ1ksUUFBa0IsRUFDbEIsZUFBZ0MsRUFDaEMsVUFBc0IsRUFDdEIsVUFBdUIsRUFDdkIsVUFBc0IsRUFDdEIsa0JBQXNDO1FBTHRDLGFBQVEsR0FBUixRQUFRLENBQVU7UUFDbEIsb0JBQWUsR0FBZixlQUFlLENBQWlCO1FBQ2hDLGVBQVUsR0FBVixVQUFVLENBQVk7UUFDdEIsZUFBVSxHQUFWLFVBQVUsQ0FBYTtRQUN2QixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQ3RCLHVCQUFrQixHQUFsQixrQkFBa0IsQ0FBb0I7SUFHbEQsQ0FBQztJQUVELHdCQUF3Qjs7Ozs7O0lBQ2pCLGlDQUFXOzs7Ozs7SUFBbEIsVUFBbUIsRUFBVTs7WUFDckIsU0FBUyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQztRQUN2RCxDQUFDLG1CQUFlLFNBQVMsRUFBQSxDQUFDLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztRQUMzQyxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQzNELENBQUM7O2dCQXJCSixVQUFVLFNBQUM7b0JBQ1IsVUFBVSxFQUFFLE1BQU07aUJBQ3JCOzs7Z0JBZm9CLFFBQVE7Z0JBS3BCLGVBQWU7Z0JBSmYsVUFBVTtnQkFDVixXQUFXO2dCQUVYLFVBQVU7Z0JBRVYsa0JBQWtCOzs7c0JBTjNCO0NBeUxDLEFBNUtELElBNEtDO1NBektZLFdBQVc7Ozs7OztJQUdoQiwrQkFBMEI7Ozs7O0lBQzFCLHNDQUF3Qzs7Ozs7SUFDeEMsaUNBQThCOzs7OztJQUM5QixpQ0FBK0I7Ozs7O0lBQy9CLGlDQUE4Qjs7Ozs7SUFDOUIseUNBQThDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgSW5qZWN0b3IgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgQVBJRmFjdG9yeSB9IGZyb20gXCIuLi9hcGkvQVBJRmFjdG9yeVwiO1xuaW1wb3J0IHsgQVBJRGlzcGF0Y2ggfSBmcm9tIFwiLi4vYXBpL0FQSURpc3BhdGNoXCI7XG5pbXBvcnQgeyBTZWxlY3RPcHRpb24gfSBmcm9tIFwiLi4vYmVhbi9TZWxlY3RPcHRpb25cIjtcbmltcG9ydCB7IERhb0ZhY3RvcnkgfSBmcm9tIFwiLi4vZGV2aWNlL3NxbGl0ZS9EYW9GYWN0b3J5XCI7XG5pbXBvcnQgeyBBT1BUb2tlblNlcnZpY2UgfSBmcm9tIFwiLi4vaW5qZWN0aW9uVG9rZW4vQU9QVG9rZW4uc2VydmljZVwiO1xuaW1wb3J0IHsgUHJvZmlsZUNvZGVTZXJ2aWNlIH0gZnJvbSBcIi4uL3NlcnZpY2UvcHJvZmlsZS9wcm9maWxlLWNvZGUuc2VydmljZVwiO1xuaW1wb3J0IHsgTWV0YUNvbmZpZ0FQSSB9IGZyb20gXCIuLi9hcGkvcmVnaXN0ZXIvTWV0YUNvbmZpZ0FQSVwiO1xuaW1wb3J0IHsgU1FMaXRlVGFibGUgfSBmcm9tIFwiLi4vZGV2aWNlL3NxbGl0ZS9TUUxpdGVUYWJsZVwiO1xuaW1wb3J0IHsgTWV0YUFPUCB9IGZyb20gXCIuL01ldGFBT1AuaW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBDbGllbnRDdXN0b21EYW8gfSBmcm9tIFwiLi4vZGV2aWNlL3NxbGl0ZS9DbGllbnRDdXN0b21EYW9cIjtcblxuXG5ASW5qZWN0YWJsZSh7XG4gICAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIE1ldGFTZXJ2aWNlIHtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcbiAgICAgICAgcHJpdmF0ZSBBT1BUb2tlblNlcnZpY2U6IEFPUFRva2VuU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBBUElGYWN0b3J5OiBBUElGYWN0b3J5LFxuICAgICAgICBwcml2YXRlIGRpc3BhdGNoZXI6IEFQSURpc3BhdGNoLFxuICAgICAgICBwcml2YXRlIERhb0ZhY3Rvcnk6IERhb0ZhY3RvcnksXG4gICAgICAgIHByaXZhdGUgcHJvZmlsZUNvZGVTZXJ2aWNlOiBQcm9maWxlQ29kZVNlcnZpY2VcbiAgICApIHtcblxuICAgIH1cblxuICAgIC8vR2V0IE1ldGEgc2V0dGluZyBieSBpZFxuICAgIHB1YmxpYyBnZXRNZXRhSnNvbihpZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgbGV0IGNvbmZpZ0FQSSA9IHRoaXMuQVBJRmFjdG9yeS5nZXRBUEkoXCJnZXRNZXRhQ29uZmlnXCIpO1xuICAgICAgICAoPE1ldGFDb25maWdBUEk+Y29uZmlnQVBJKS5jb25maWdOYW1lID0gaWQ7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc3BhdGNoZXIuZGlzcGF0Y2goY29uZmlnQVBJKS50b1Byb21pc2UoKTtcbiAgICB9XG5cbiAgICAvLyBwdWJsaWMgYXN5bmMgZ2V0RGF0YShtZXRhOiBhbnksIHBhcmFtczogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgICAvLyAgICAgbGV0IEFPUCA9IG1ldGFbXCJBT1BcIl07XG4gICAgLy8gICAgIGxldCBjb2RlQXJyYXkgPSB0aGlzLmdldENvZGVBcnJheShtZXRhKTtcbiAgICAvLyAgICAgbGV0IHNvdXJjZSA9IG1ldGEuc291cmNlO1xuICAgIC8vICAgICBsZXQgZGF0YSA9IG51bGw7XG4gICAgLy8gICAgIGlmIChzb3VyY2UudHlwZSA9PT0gJ0FQSScpIHtcbiAgICAvLyAgICAgICAgIGxldCBBUEkgPSB0aGlzLkFQSUZhY3RvcnkuZ2V0QVBJKHNvdXJjZS5yZWFkKTtcbiAgICAvLyAgICAgICAgIGlmIChwYXJhbXMpIHtcbiAgICAvLyAgICAgICAgICAgICBPYmplY3Qua2V5cyhwYXJhbXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgIC8vICAgICAgICAgICAgICAgICBBUElba2V5XSA9IHBhcmFtc1trZXldO1xuICAgIC8vICAgICAgICAgICAgIH0pXG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgICAgICBsZXQgYXBpX3Jlc3AgPSBhd2FpdCB0aGlzLmRpc3BhdGNoZXIuZGlzcGF0Y2goQVBJKS50b1Byb21pc2UoKTtcbiAgICAvLyAgICAgICAgIGRhdGEgPSBhcGlfcmVzcFtcIkJvZHlcIl1bMF07XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgZWxzZSBpZiAoc291cmNlLnR5cGUgPT09ICdUQUJMRScpIHtcbiAgICAvLyAgICAgICAgIC8vUVVFUlkgVEFCTEVcbiAgICAvLyAgICAgICAgIGxldCBiZWZvcmVBT1AgPSBudWxsO1xuICAgIC8vICAgICAgICAgbGV0IGFmdGVyQU9QID0gbnVsbDtcbiAgICAvLyAgICAgICAgIGlmIChBT1ApIHtcbiAgICAvLyAgICAgICAgICAgICBsZXQgYmVmb3JlQU9QTmFtZSA9IEFPUFtcIlJlYWRCZWZvcmVcIl07XG4gICAgLy8gICAgICAgICAgICAgbGV0IGFmdGVyQU9QTmFtZSA9IEFPUFtcIlJlYWRBZnRlclwiXTtcbiAgICAvLyAgICAgICAgICAgICAvL0lmIGhhcyBBT1AsIHVzZSBJbmplY3RvciB0byBmaW5kIGludGVyZmFjZVxuICAgIC8vICAgICAgICAgICAgIGxldCBiZWZvcmVUb2tlbiA9IHRoaXMuQU9QVG9rZW5TZXJ2aWNlLmdldFRva2VuKGJlZm9yZUFPUE5hbWUpO1xuICAgIC8vICAgICAgICAgICAgIGxldCBhZnRlclRva2VuID0gdGhpcy5BT1BUb2tlblNlcnZpY2UuZ2V0VG9rZW4oYWZ0ZXJBT1BOYW1lKTtcbiAgICAvLyAgICAgICAgICAgICBiZWZvcmVBT1AgPSB0aGlzLmluamVjdG9yLmdldChiZWZvcmVUb2tlbik7XG4gICAgLy8gICAgICAgICAgICAgYWZ0ZXJBT1AgPSB0aGlzLmluamVjdG9yLmdldChhZnRlclRva2VuKTtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgICAgIGxldCB0YWJsZSA9IHRoaXMuRGFvRmFjdG9yeS5nZXREZWZhdWx0VGFibGUoc291cmNlLnRhYmxlKTtcbiAgICAvLyAgICAgICAgIGRhdGEgPSBhd2FpdCB0aGlzLnF1ZXJ5VGFibGUodGFibGUsIHBhcmFtcywgYmVmb3JlQU9QLCBhZnRlckFPUCk7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgaWYgKGNvZGVBcnJheS5sZW5ndGggPiAwKSB7XG4gICAgLy8gICAgICAgICAvL0FkZCBSZWYgT3B0aW9uc1xuICAgIC8vICAgICAgICAgZGF0YSA9IHRoaXMuY29udmVydENvZGVBcnJheVRvRGF0YShjb2RlQXJyYXksIGRhdGEpO1xuICAgIC8vICAgICB9XG4gICAgLy8gICAgIC8vQWRkIEJ0biBvcHRpb25cbiAgICAvLyAgICAgbWV0YS5mb290ZXIuZm9yRWFjaChlbGUgPT4ge1xuICAgIC8vICAgICAgICAgaWYgKGVsZS50eXBlID09PSAnc3VibWl0JyB8fCBlbGUudHlwZSA9PT0gJ2J1dHRvbicpXG4gICAgLy8gICAgICAgICAgICAgZGF0YVtlbGUuaWQgKyBcIkJ0blwiXSA9IE9iamVjdC5hc3NpZ24oe1xuICAgIC8vICAgICAgICAgICAgICAgICBkaXNhYmxlOiBmYWxzZVxuICAgIC8vICAgICAgICAgICAgIH0sIGVsZSk7XG4gICAgLy8gICAgIH0pO1xuXG4gICAgLy8gICAgIHJldHVybiBkYXRhO1xuICAgIC8vIH1cblxuICAgIC8vIHB1YmxpYyBhc3luYyBzYXZlRGF0YShtZXRhOiBhbnksIGRhdGE6IGFueSwgcGFyYW1zPzogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgICAvLyAgICAgbGV0IHJlc3AgPSBudWxsO1xuICAgIC8vICAgICBsZXQgc291cmNlID0gbWV0YS5zb3VyY2U7XG4gICAgLy8gICAgIGxldCBBT1AgPSBtZXRhW1wiQU9QXCJdO1xuICAgIC8vICAgICBpZiAoc291cmNlLnR5cGUgPT09ICdBUEknIHx8IHNvdXJjZS50eXBlID09PSAnSU5QVVQnKSB7XG4gICAgLy8gICAgICAgICBsZXQgQVBJID0gdGhpcy5BUElGYWN0b3J5LmdldEFQSShzb3VyY2Uud3JpdGUpO1xuICAgIC8vICAgICAgICAgQVBJW1wiRGF0YVwiXSA9IGRhdGE7XG4gICAgLy8gICAgICAgICBpZiAocGFyYW1zKSB7XG4gICAgLy8gICAgICAgICAgICAgT2JqZWN0LmtleXMocGFyYW1zKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAvLyAgICAgICAgICAgICAgICAgQVBJW2tleV0gPSBwYXJhbXNba2V5XTtcbiAgICAvLyAgICAgICAgICAgICB9KVxuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICAgICAgcmVzcCA9IGF3YWl0IHRoaXMuZGlzcGF0Y2hlci5kaXNwYXRjaChBUEkpLnRvUHJvbWlzZSgpO1xuICAgIC8vICAgICB9XG4gICAgLy8gICAgIGVsc2UgaWYgKHNvdXJjZS50eXBlID09PSAnVEFCTEUnKSB7XG4gICAgLy8gICAgICAgICAvL1FVRVJZIFRBQkxFXG4gICAgLy8gICAgICAgICBsZXQgYmVmb3JlQU9QID0gbnVsbDtcbiAgICAvLyAgICAgICAgIGxldCBhZnRlckFPUCA9IG51bGw7XG4gICAgLy8gICAgICAgICBpZiAoQU9QKSB7XG4gICAgLy8gICAgICAgICAgICAgbGV0IGJlZm9yZUFPUE5hbWUgPSBBT1BbXCJXcml0ZUJlZm9yZVwiXTtcbiAgICAvLyAgICAgICAgICAgICBsZXQgYWZ0ZXJBT1BOYW1lID0gQU9QW1wiV3JpdGVBZnRlclwiXTtcbiAgICAvLyAgICAgICAgICAgICAvL0lmIGhhcyBBT1AsIHVzZSBJbmplY3RvciB0byBmaW5kIGludGVyZmFjZVxuICAgIC8vICAgICAgICAgICAgIGxldCBiZWZvcmVUb2tlbiA9IHRoaXMuQU9QVG9rZW5TZXJ2aWNlLmdldFRva2VuKGJlZm9yZUFPUE5hbWUpO1xuICAgIC8vICAgICAgICAgICAgIGxldCBhZnRlclRva2VuID0gdGhpcy5BT1BUb2tlblNlcnZpY2UuZ2V0VG9rZW4oYWZ0ZXJBT1BOYW1lKTtcbiAgICAvLyAgICAgICAgICAgICBiZWZvcmVBT1AgPSB0aGlzLmluamVjdG9yLmdldChiZWZvcmVUb2tlbik7XG4gICAgLy8gICAgICAgICAgICAgYWZ0ZXJBT1AgPSB0aGlzLmluamVjdG9yLmdldChhZnRlclRva2VuKTtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgICAgIGxldCB0YWJsZSA9IHRoaXMuRGFvRmFjdG9yeS5nZXREZWZhdWx0VGFibGUoc291cmNlLnRhYmxlKTtcbiAgICAvLyAgICAgICAgIHJlc3AgPSBhd2FpdCB0aGlzLnNhdmVUYWJsZShkYXRhLCB0YWJsZSwgcGFyYW1zLCBiZWZvcmVBT1AsIGFmdGVyQU9QKTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICByZXR1cm4gcmVzcDtcbiAgICAvLyB9XG5cbiAgICAvLyBwdWJsaWMgZ2V0Q29kZUFycmF5KG1ldGE6IGFueSk6IEFycmF5PGFueT4ge1xuICAgIC8vICAgICByZXR1cm4gbWV0YS5jb2x1bW5zLmZpbHRlcih4ID0+IHgucmVmICYmIHgucmVmLmxlbmd0aCA+IDApLm1hcCh4ID0+IHtcbiAgICAvLyAgICAgICAgIHJldHVybiB7XG4gICAgLy8gICAgICAgICAgICAga2V5OiB4LmlkLFxuICAgIC8vICAgICAgICAgICAgIHZhbDogdGhpcy5wcm9maWxlQ29kZVNlcnZpY2UuZ2V0Q29kZUFycmF5KHgucmVmKSxcbiAgICAvLyAgICAgICAgICAgICB0eXBlOiB4LnR5cGVcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfSk7XG4gICAgLy8gfVxuXG4gICAgLy8gcHVibGljIGNvbnZlcnRDb2RlQXJyYXlUb0RhdGEoY29kZUFycmF5LCBkYXRhKSB7XG4gICAgLy8gICAgIGNvZGVBcnJheS5mb3JFYWNoKGVsZSA9PiB7XG4gICAgLy8gICAgICAgICBpZiAoZWxlLnR5cGUgPT09ICdTZWxlY3QnKVxuICAgIC8vICAgICAgICAgICAgIGRhdGFbZWxlLmtleSArIFwiT3B0aW9uXCJdID0gZWxlLnZhbC5tYXAoeCA9PiBuZXcgU2VsZWN0T3B0aW9uKHguZ2V0Q29kZSgpLCB4LmRpc3BsYXlUZXh0KSk7XG4gICAgLy8gICAgICAgICBlbHNlXG4gICAgLy8gICAgICAgICAgICAgZGF0YVtlbGUua2V5ICsgXCJPcHRpb25cIl0gPSBlbGUudmFsLm1hcCh4ID0+IHtcbiAgICAvLyAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIGlkOiB4LmdldENvZGUoKSxcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHguZGlzcGxheVRleHQsXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IEpTT04ucGFyc2UoeC5nZXRBcmd1bWVudHMoKSlcbiAgICAvLyAgICAgICAgICAgICAgICAgfVxuICAgIC8vICAgICAgICAgICAgIH0pO1xuICAgIC8vICAgICB9KTtcbiAgICAvLyAgICAgcmV0dXJuIGRhdGE7XG4gICAgLy8gfVxuXG4gICAgLy8gcHVibGljIGFzeW5jIHF1ZXJ5VGFibGUodGFibGVPYmo6IFNRTGl0ZVRhYmxlLCBwYXJhbXM6IGFueSA9IG51bGwsIGJlZm9yZUFPUDogTWV0YUFPUCwgYWZ0ZXJBT1A6IE1ldGFBT1ApIHtcbiAgICAvLyAgICAgaWYgKGJlZm9yZUFPUCkge1xuICAgIC8vICAgICAgICAgbGV0IGNvbmRpdGlvbnMgPSBhd2FpdCBiZWZvcmVBT1AucnVuKHsgcGFyYW1zIH0pO1xuICAgIC8vICAgICAgICAgaWYgKGNvbmRpdGlvbnMubGVuZ3RoID4gMCkge1xuICAgIC8vICAgICAgICAgICAgIGNvbmRpdGlvbnMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAvLyAgICAgICAgICAgICAgICAgdGFibGVPYmouYWRkUmVzdHJpY3Rpb24oY29uZGl0aW9ucyk7XG4gICAgLy8gICAgICAgICAgICAgfSk7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgbGV0IGRhbyA9IHRoaXMuRGFvRmFjdG9yeS5nZXREZWZhdWx0RGFvKCk7XG4gICAgLy8gICAgIGxldCBkYXRhID0gbnVsbDtcbiAgICAvLyAgICAgbGV0IHJlc3AgPSBhd2FpdCBkYW8ucXVlcnlCeVRhYmxlKHRhYmxlT2JqKS50b1Byb21pc2UoKTtcbiAgICAvLyAgICAgaWYgKHJlc3AuSGVhZGVyWydzdGF0dXMnXSkge1xuICAgIC8vICAgICAgICAgZGF0YSA9IHJlc3AuQm9keVswXTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBpZiAoYWZ0ZXJBT1ApIHtcbiAgICAvLyAgICAgICAgIGRhdGEgPSBhd2FpdCBhZnRlckFPUC5ydW4oZGF0YSk7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgcmV0dXJuIGRhdGE7XG4gICAgLy8gfVxuXG5cbiAgICAvLyBwdWJsaWMgYXN5bmMgc2F2ZVRhYmxlKGRhdGE6IGFueSwgdGFibGVPYmo6IFNRTGl0ZVRhYmxlLCBwYXJhbXM6IGFueSA9IG51bGwsIGJlZm9yZUFPUDogTWV0YUFPUCwgYWZ0ZXJBT1A6IE1ldGFBT1ApIHtcbiAgICAvLyAgICAgbGV0IGNvbW1vbkNvbHMgPSBbJ0lzRGVsZXRlJywgJ0NsaWVudFRpbWUnLCAnRGF0YVRpbWUnXTtcbiAgICAvLyAgICAgaWYgKGJlZm9yZUFPUCkge1xuICAgIC8vICAgICAgICAgZGF0YSA9IGF3YWl0IGJlZm9yZUFPUC5ydW4oeyBwYXJhbXMsIGRhdGEgfSk7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgbGV0IGRhbyA9IHRoaXMuRGFvRmFjdG9yeS5nZXREZWZhdWx0RGFvKCk7XG4gICAgLy8gICAgIGRhbyA9IG5ldyBDbGllbnRDdXN0b21EYW8oZGFvKTtcbiAgICAvLyAgICAgbGV0IGNvbHVtbnMgPSB0YWJsZU9iaiA/IHRhYmxlT2JqLmdldENvbHVtbnMoKS5tYXAoeCA9PiB4LmdldE5hbWUoKSkgOiBbXTtcbiAgICAvLyAgICAgLy8gU2V0IHZhbHVlIGlmIGRhdGEgZXhpc3QgdGhlIGNvbHVtblxuICAgIC8vICAgICBjb2x1bW5zLmZpbHRlcih4ID0+ICEhZGF0YVt4XSkuZmlsdGVyKHggPT4gY29tbW9uQ29scy5pbmRleE9mKHgpID09PSAtMSkuZm9yRWFjaChjb2x1bW5OYW1lID0+IHtcbiAgICAvLyAgICAgICAgIHRhYmxlT2JqLnNldFZhbHVlKGNvbHVtbk5hbWUsIGRhdGFbY29sdW1uTmFtZV0pO1xuICAgIC8vICAgICB9KTtcbiAgICAvLyAgICAgaWYgKGRhdGFbXCJFZGl0VHlwZVwiXSA9PT0gJ2FkZCcpIHtcbiAgICAvLyAgICAgICAgIGF3YWl0IGRhby5pbnNlcnRCeVRhYmxlKHRhYmxlT2JqKS50b1Byb21pc2UoKTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBlbHNlIHtcbiAgICAvLyAgICAgICAgIGF3YWl0IGRhby51cGRhdGVCeVRhYmxlKHRhYmxlT2JqKS50b1Byb21pc2UoKTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBpZiAoYWZ0ZXJBT1ApIHtcbiAgICAvLyAgICAgICAgIGF3YWl0IGFmdGVyQU9QLnJ1bih7IHBhcmFtcywgZGF0YSB9KTtcbiAgICAvLyAgICAgfVxuICAgIC8vIH1cbn0iXX0=