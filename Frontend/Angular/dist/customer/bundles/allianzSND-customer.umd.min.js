!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/animations"),require("@allianzSND/calendar"),require("@angular/core"),require("@allianz/ngx-ndbx/formfield"),require("@allianz/ngx-ndbx"),require("@allianz/ngx-ndbx/input"),require("@allianz/ngx-ndbx/datefield"),require("@allianz/ngx-ndbx/progressbar"),require("@allianz/ngx-ndbx/grid"),require("@angular/forms"),require("@allianzSND/ui"),require("@angular/common"),require("date-fns"),require("@allianzSND/core"),require("rxjs")):"function"==typeof define&&define.amd?define("@allianzSND/customer",["exports","@angular/animations","@allianzSND/calendar","@angular/core","@allianz/ngx-ndbx/formfield","@allianz/ngx-ndbx","@allianz/ngx-ndbx/input","@allianz/ngx-ndbx/datefield","@allianz/ngx-ndbx/progressbar","@allianz/ngx-ndbx/grid","@angular/forms","@allianzSND/ui","@angular/common","date-fns","@allianzSND/core","rxjs"],t):t((e.allianzSND=e.allianzSND||{},e.allianzSND.customer={}),e.ng.animations,e.calendar,e.ng.core,e.formfield,e.ngxNdbx,e.input,e.datefield,e.progressbar,e.grid,e.ng.forms,e.ui,e.ng.common,e.dateFns,e.i1,e.rxjs)}(this,function(e,t,o,x,n,i,a,r,s,l,c,p,u,d,A,m){"use strict";function g(t,r,s,l){return new(s||(s=Promise))(function(e,n){function i(e){try{a(l.next(e))}catch(t){n(t)}}function o(e){try{a(l["throw"](e))}catch(t){n(t)}}function a(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(i,o)}a((l=l.apply(t,r||[])).next())})}function f(i,o){var a,r,s,e,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),"throw":t(1),"return":t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function n(e){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,r&&(s=2&e[0]?r["return"]:e[0]?r["throw"]||((s=r["return"])&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,r=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=o.call(i,l)}catch(t){e=[6,t],r=0}finally{a=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([t,e])}}}function E(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),r=[];try{for(;(void 0===t||0<t--)&&!(i=a.next()).done;)r.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=a["return"])&&n.call(a)}finally{if(o)throw o.error}}return r}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}var C=function(){function e(){this._emails=new Array,this._tels=new Array,this._addresses=new Array,A.StringUtils.isEmpty(this.firstName)&&(this.firstName=""),A.StringUtils.isEmpty(this.occupation)&&(this.occupation=""),A.StringUtils.isEmpty(this.company)&&(this.company=""),A.StringUtils.isEmpty(this.ageRange)&&(this.ageRange=undefined),A.StringUtils.isEmpty(this.gender)&&(this.gender=undefined),A.StringUtils.isEmpty(this.income)&&(this.income=undefined),A.StringUtils.isEmpty(this.source)&&(this.source=undefined),A.StringUtils.isEmpty(this.marriage)&&(this.marriage=undefined),A.StringUtils.isEmpty(this.children)&&(this.children=undefined),A.StringUtils.isEmpty(this.familiarity)&&(this.familiarity=undefined),A.StringUtils.isEmpty(this.recentStatus)&&(this.recentStatus=undefined),A.StringUtils.isEmpty(this.manpa)&&(this.manpa=undefined),A.StringUtils.isEmpty(this.contactFrequancy)&&(this._contactFrequancy=undefined),A.StringUtils.isEmpty(this.possibility)&&(this.possibility=""),A.StringUtils.isEmpty(this.clientID)&&(this.clientID=""),this.updateEmptyStatus()}return Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._dataSource},set:function(e){this._dataSource=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientID",{get:function(){return this._clientID},set:function(e){this._clientID=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastName",{get:function(){return this._lastName},set:function(e){this._lastName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstName",{get:function(){return this._firstName},set:function(e){this._firstName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tels",{get:function(){return this._tels},set:function(e){this._tels=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emails",{get:function(){return this._emails},set:function(e){this._emails=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addresses",{get:function(){return this._addresses},set:function(e){this._addresses=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"birthday",{get:function(){return this._birthday},set:function(e){this._birthday=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ageRange",{get:function(){return this._ageRange},set:function(e){this._ageRange=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gender",{get:function(){return this._gender},set:function(e){this._gender=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"occupation",{get:function(){return this._occupation},set:function(e){this._occupation=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"company",{get:function(){return this._company},set:function(e){this._company=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"income",{get:function(){return this._income},set:function(e){this._income=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},set:function(e){this._source=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marriage",{get:function(){return this._marriage},set:function(e){this._marriage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},set:function(e){this._children=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"familiarity",{get:function(){return this._familiarity},set:function(e){this._familiarity=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recentStatus",{get:function(){return this._recentStatus},set:function(e){this._recentStatus=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"manpa",{get:function(){return this._manpa},set:function(e){this._manpa=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contactFrequancy",{get:function(){return this._contactFrequancy},set:function(e){this._contactFrequancy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"possibility",{get:function(){return this._possibility},set:function(e){this._possibility=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFollow",{get:function(){return this._isFollow},set:function(e){this._isFollow=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmptyInfo",{get:function(){return this._isEmptyInfo},set:function(e){this._isEmptyInfo=e},enumerable:!0,configurable:!0}),e.prototype.updateEmptyStatus=function(){null==this.birthday&&A.StringUtils.isEmpty(this.gender)&&A.StringUtils.isEmpty(this.occupation)&&A.StringUtils.isEmpty(this.company)&&A.StringUtils.isEmpty(this.income)&&A.StringUtils.isEmpty(this.source)&&A.StringUtils.isEmpty(this.marriage)&&A.StringUtils.isEmpty(this.children)&&A.StringUtils.isEmpty(this.familiarity)&&A.StringUtils.isEmpty(this.manpa)&&A.StringUtils.isEmpty(this.recentStatus)?this.isEmptyInfo=!0:this.isEmptyInfo=!1},e.prototype.updateFollowStatus=function(e){this.isFollow=e},e.prototype.addEmail=function(e){this.emails.push(e)},e.prototype.addTel=function(e){this.tels.push(e)},e.prototype.addAddress=function(e){this.addresses.push(e)},e.prototype.deleteTel=function(e,t){this.tels.splice(t,1)},e.prototype.deleteEmail=function(e,t){this.emails.splice(t,1)},e.prototype.deleteAddress=function(e,t){this.addresses.slice(t,1)},e.prototype.notOPUSTelNumber=function(){for(var e=0,t=0;t<this.tels.length;t++)"OPUS"!=this.tels[t].dataSource&&e++;return e},e}(),b=function(){function e(e,t,n){this.clientID=e,this.date=t,this.noteMessage=n}return e.prototype.getClientID=function(){return this.clientID},e}(),v=function(){function e(e,t,n,i,o,a,r,s){this._clientID=e,this._firstName=t,this._lastName=n,this._tag=i,this._complementPercent=o,this._isFollow=a,this._isOtherSource=r,"Y"==s&&(this._isHighlight=!0),A.StringUtils.isEmpty(this._firstName)&&(this._firstName="")}return Object.defineProperty(e.prototype,"isOtherSource",{get:function(){return this._isOtherSource},set:function(e){this._isOtherSource=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFollow",{get:function(){return this._isFollow},set:function(e){this._isFollow=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientID",{get:function(){return this._clientID},set:function(e){this._clientID=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstName",{get:function(){return this._firstName},set:function(e){this._firstName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastName",{get:function(){return this._lastName},set:function(e){this._lastName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(e){this._tag=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"complementPercent",{get:function(){return this._complementPercent},set:function(e){this._complementPercent=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHighlight",{get:function(){return this._isHighlight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHighLight",{set:function(e){this._isHighlight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showName",{get:function(){return this._showName},set:function(e){this._showName=e},enumerable:!0,configurable:!0}),e}(),k=function(){function e(e,t){this._clientID=e,this._name=t}return Object.defineProperty(e.prototype,"clientID",{get:function(){return this._clientID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e}(),D=function(){function e(e,t,n,i,o,a,r,s){this.clientID=e,this.addressType=t,this.country=n,this.city=i,this.area=o,this.zipcode=a,this.address=r,this.dataSource=s}return e.prototype.toFullAddress=function(){var e=[];return A.StringUtils.isNotEmpty(this.country)&&e.push(this.country),A.StringUtils.isNotEmpty(this.city)&&e.push(this.city),A.StringUtils.isNotEmpty(this.area)&&e.push(this.area),A.StringUtils.isNotEmpty(this.zipcode)&&e.push(this.zipcode),A.StringUtils.isNotEmpty(this.address)&&e.push(this.address),e.join(", ")},e.prototype.isEmpty=function(){return A.StringUtils.isEmpty(this.country)&&A.StringUtils.isEmpty(this.city)&&A.StringUtils.isEmpty(this.area)&&A.StringUtils.isEmpty(this.zipcode)&&A.StringUtils.isEmpty(this.address)},e}(),w=function(){function e(e,t,n,i){this.clientID=e,this.emailType=t,this.email=n,this.dataSource=i}return e.prototype.isEmpty=function(){return A.StringUtils.isEmpty(this.email)},e}(),T=function(){function e(e,t,n,i){this.clientID=e,this.telType=t,this.tel=n,this.dataSource=i}return e.prototype.isEmpty=function(){return A.StringUtils.isEmpty(this.tel)},e}(),S=function fe(e,t,n,i,o){this._clientID=e,this.firstName=t,this.lastName=n,this.birthdayMonth=i,this.birthdayDate=o,A.StringUtils.isEmpty(this.firstName)&&(this.firstName="")},I=function(){function e(e,t,n,i){this.dispatcher=e,this.dateUtils=t,this.APIFactory=n,this.profileCodeService=i,this._isFirstTime=!0}return e.prototype.isFirstTime=function(){return this._isFirstTime?!(this._isFirstTime=!1):this._isFirstTime},Object.defineProperty(e.prototype,"profileResult",{get:function(){return this._profileResult},set:function(e){this._profileResult=e},enumerable:!0,configurable:!0}),e.prototype.updateMessageToRead=function(e,t){var n=this,i=this.APIFactory.getAPI("updateDashboardToRead");return i.setMessageType(e),i.setMessageDataCategory(t),m.Observable.create(function(t){n.dispatcher.dispatch(i).subscribe(function(e){console.debug("dashboard-service-updateMessageToRead",e),t.next(e.Header),t.complete()})})},e.prototype.getOverTimeCustomerList=function(e){var t=this,n=this.APIFactory.getAPI("getCustomerOverTime");return n.setClientID(e),m.Observable.create(function(l){t.dispatcher.dispatch(n).subscribe(function(e){console.debug("customer-service-getOverTimeList",e);for(var t=new Array,n=e.Body,i=0;i<n.length;i++)for(var o=n[i],a=JSON.parse(o.Arguments).customers,r=0;r<a.length;r++){var s=new k(a[r].id,a[r].name);t.push(s)}l.next(t),l.complete()})})},e.prototype.getAutoDeleteCustomerList=function(e){var t=this,n=this.APIFactory.getAPI("getCustomerAutoDelete");return n.setClientID(e),m.Observable.create(function(l){t.dispatcher.dispatch(n).subscribe(function(e){console.log("customer-service-getAutoDeleteCustomerList",e);for(var t=new Array,n=e.Body,i=0;i<n.length;i++)for(var o=n[i],a=JSON.parse(o.Arguments).customers,r=0;r<a.length;r++){var s=new k(a[r].id,a[r].name);t.push(s)}l.next(t),l.complete()})})},e.prototype.updateCustomerFollowStatus=function(e,t){var n=this,i=this.APIFactory.getAPI("updateCustomerFollowStatus");return i.setClient(e),i.setIsFollow(t),m.Observable.create(function(t){n.dispatcher.dispatch(i).subscribe(function(e){console.debug("customer-service-updateCustomerFollowStatus",e),t.next(e.Header),t.complete()})})},e.prototype.getFilterCriteriaPreset=function(){var e=this,t=this.APIFactory.getAPI("getCustomerFilterPreset");return m.Observable.create(function(i){e.dispatcher.dispatch(t).subscribe(function(e){console.debug("customer-service-getFilterCriteria",e);var t,n=e.Body;(n.length=!0)&&(t=JSON.parse(n[0].SettingVal)),console.debug("customer-service-getFilterCriteriaPreset",t),i.next(t),i.complete()})})},e.prototype.saveFilterCriteria=function(e){var n=this,i=this.APIFactory.getAPI("saveCustomerFilterPreset");return i.setFilterCriteria(e),m.Observable.create(function(t){n.dispatcher.dispatch(i).subscribe(function(e){console.debug("customer-service-saveFilterCriteria",e),t.next(e),t.complete()})})},e.prototype.checkInFilterCriteria=function(e,t){var n=this,i=this.APIFactory.getAPI("getCustomerList");return i.filterCriteria=t,i.clientID=e,m.Observable.create(function(t){n.dispatcher.dispatch(i).subscribe(function(e){console.debug("customer-service-checkInFilterCriteria",e),t.next(0!=e.Body.length),t.complete()})})},e.prototype.getCustomerList=function(e,t){var n=this,i=this.APIFactory.getAPI("getCustomerList");return console.debug("customer-service-getCustomerList",e,t),i.filterCriteria=e,i.pageInfo=t,m.Observable.create(function(p){n.dispatcher.dispatch(i).subscribe(function(e){console.debug("customer-service-getCustomerList",e);for(var t=new Array,n=(e.Header,e.Body),i=0;i<n.length;i++){var o=n[i],a="APP"!=o.DataSource,r="Y"==o.IsFollow,s=o.Completeness,l=o.IsOverTimeAlert,c=new v(o.ClientID,o.FirstName,o.LastName,o.Possibility,s,r,a,l);t.push(c)}p.next(t),p.complete()})})},e.prototype.getCustomerBirthdayList=function(e,t,n){var i=this,o=this.APIFactory.getAPI("getCustomerBirthdayList");return o.subN=t,o.addN=n,o.targetDate=e,m.Observable.create(function(a){i.dispatcher.dispatch(o).subscribe(function(e){console.debug("customer-service-getCustomerBirthdayList",e);var t=[],n=e.Body;console.log("cusSer: ",n);for(var i=0;i<n.length;i++){var o=new S(n[i].ClientID,n[i].FirstName,n[i].LastName,n[i].BirthdayMonth,n[i].BirthdayDate);t.push(o)}a.next(t),a.complete()})})},e.prototype.convertCustomerDetailDisplayMode=function(e){var t=this;console.debug("convertCustomerDetailDisplayMode",e),e.ageRange=this.profileCodeService.convertCode2Text("Customer_Age",e.ageRange),e.gender=this.profileCodeService.convertCode2Text("Customer_Gender",e.gender),e.income=this.profileCodeService.convertCode2Text("Customer_Income",e.income),e.source=this.profileCodeService.convertCode2Text("Customer_Source",e.source),e.marriage=this.profileCodeService.convertCode2Text("Customer_Marriage",e.marriage),e.children=this.profileCodeService.convertCode2Text("Customer_Children",e.children),e.familiarity=this.profileCodeService.convertCode2Text("Customer_Familiarity",e.familiarity),e.recentStatus=this.profileCodeService.convertCode2Text("Customer_RecentStatus",e.recentStatus),e.manpa=this.profileCodeService.convertCode2Text("Customer_Status",e.manpa),e.contactFrequancy=this.profileCodeService.convertCode2Text("Customer_ContactFrequancy",e.contactFrequancy),e.possibility=this.profileCodeService.convertCode2Text("Customer_Possibility",e.possibility),e.tels.forEach(function(e){e.telType=t.profileCodeService.convertCode2Text("Customer_TelType",e.telType)}),e.emails.forEach(function(e){e.emailType=t.profileCodeService.convertCode2Text("Customer_EmailType",e.emailType)}),e.addresses.forEach(function(e){e.addressType=t.profileCodeService.convertCode2Text("Customer_AddressType",e.addressType)})},e.prototype.getCustomerDetail=function(e){var t=this;if(A.StringUtils.isEmpty(e))return m.Observable.create(function(e){e.next(undefined),e.complete()});var n=this.APIFactory.getAPI("getCustomerDetail");return n.id=e,m.Observable.create(function(h){t.dispatcher.dispatch(n).subscribe(function(e){console.debug("customer-service-json",e);var t=e.Body[0];console.debug("customer-service-getCustomerDetail",t);var n,i=t.AgeRange,o=t.Gender,a=t.Income,r=t.Source,s=t.Marriage,l=t.Children,c=t.Familiarity,p=t.RecentStatus,u=t.MANPA,d=t.ContactFrequancy,m=t.Possibility,g="Y"==t.IsFollow;A.StringUtils.isNotEmpty(t.BirthdayYear)&&A.StringUtils.isNotEmpty(t.BirthdayMonth)&&A.StringUtils.isNotEmpty(t.BirthdayDate)&&(n=new Date(Number(t.BirthdayYear),Number(t.BirthdayMonth)-1,Number(t.BirthdayDate)));var f=new C;f.clientID=t.ClientID,f.lastName=A.StringUtils.isNotEmpty(t.LastName)?t.LastName:"",f.firstName=A.StringUtils.isNotEmpty(t.FirstName)?t.FirstName:"",f.occupation=t.Occupation,f.company=t.Company,f.birthday=n,f.ageRange=i,f.gender=o,f.income=a,f.source=r,f.marriage=s,f.children=l,f.familiarity=c,f.recentStatus=p,f.manpa=u,f.contactFrequancy=d,f.possibility=m,f.isFollow=g,f.dataSource=t.DataSource,t.tel.map(function(e){return new T(e.ClientID,e.TelType,e.Tel,e.DataSource)}).forEach(function(e){f.addTel(e)}),t.email.map(function(e){return new w(e.ClientID,e.EmailType,e.Email,e.DataSource)}).forEach(function(e){f.addEmail(e)}),t.address.map(function(e){return new D(e.ClientID,e.AddressType,e.Country,e.City,e.Area,e.Zipcode,e.Address,e.DataSource)}).forEach(function(e){f.addAddress(e)}),console.debug("customer-service:",f),h.next(f),h.complete()})})},e.prototype.importContact=function(e){var n=this,i=this.APIFactory.getAPI("importContact");return console.debug("customer-service-importContact",e),i.setItems(e),m.Observable.create(function(t){n.dispatcher.dispatch(i).subscribe(function(e){console.debug("customer-service-importContact",e),t.next(e.Header),t.complete()})})},e.prototype.validProfile=function(e){var t=this,n=new A.ValidationResult;return A.StringUtils.isEmpty(e.lastName)&&n.setErrorMap("lastName","required"),0!=e.emails.length&&e.emails.forEach(function(e){e.isEmpty()||t.isEmailFormat(e.email)||n.setErrorMap("email","format")}),n},e.prototype.isEmailFormat=function(e){return new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(e)},e.prototype.saveCustomerDetail=function(e){var n=this;console.log("saveCustomerProfile",e),e.tels.forEach(function(e){A.StringUtils.isEmpty(e.telType)&&(e.telType="TelHome")}),e.emails.forEach(function(e){A.StringUtils.isEmpty(e.emailType)&&(e.emailType="MailHome")}),e.addresses.forEach(function(e){A.StringUtils.isEmpty(e.addressType)&&(e.addressType="AddressTypeHome")});var i=this.APIFactory.getAPI("saveCustomerDetail");i.setDetail(e);var t=m.Observable.create(function(t){n.dispatcher.dispatch(i).subscribe(function(e){console.debug("customer-service-saveCustomerDetail",e),t.next(e.Header),t.complete()})});return console.log("subject: ",t),t},e.prototype.deleteCustomerProfile=function(e){var n=this;console.log("deleteCustomerProfile",e);var i=this.APIFactory.getAPI("deleteCustomer");return i.clientID=e,m.Observable.create(function(t){n.dispatcher.dispatch(i).subscribe(function(e){console.debug("customer-service-deleteCustomerProfile",e),t.next(e.Header),t.complete()})})},e.prototype.getCustomerContactNote=function(e,t){var n=this,i=this.APIFactory.getAPI("getCustomerContactNote");return i.setClientID(e),i.setPageInfo(t),console.debug("customer-service-getCustomerContactNote",i),m.Observable.create(function(r){n.dispatcher.dispatch(i).subscribe(function(e){console.debug("customer-service-getCustomerContactNote",e);for(var t=new Array,n=e.Body,i=0;i<n.length;i++){var o=n[i],a=new b(o.ClientID,new Date(o.NoteTime),o.Note);t.push(a)}r.next(t),r.complete()})})},e.prototype.addCustomerContact=function(e,t,n,i){var o=this;console.log("addCustomerContact");var a=this.APIFactory.getAPI("addCustomerContactNote");return a.setClientID(e),a.setCustomerClientID(t),a.setNote(n),a.setNoteTime(i),m.Observable.create(function(t){o.dispatcher.dispatch(a).subscribe(function(e){console.debug("customer-service-addCustomerContact",e),t.next(e.Header),t.complete()})})},e.prototype.editCustomerContact=function(e,t,n){var i=this;console.log("editCustomerContact");var o=this.APIFactory.getAPI("editCustomerContactNote");return o.setContactClientID(e),o.setNote(t),o.setNoteTime(n),m.Observable.create(function(t){i.dispatcher.dispatch(o).subscribe(function(e){console.debug("customer-service-editCustomerContact",e),t.next(e.Header),t.complete()})})},e.prototype.deleteCustomerContact=function(e){var n=this;console.log("deleteCustomerContact");var i=this.APIFactory.getAPI("deleteCustomerContactNote");return i.setContactClientID(e),m.Observable.create(function(t){n.dispatcher.dispatch(i).subscribe(function(e){console.debug("customer-service-editCustomerContact",e),t.next(e.Header),t.complete()})})},e.prototype.getCustomerContactTel=function(e){var i=this,t=this.APIFactory.getAPI("getCustomerTel");return t.setClientID(e),console.debug("customer-service-getCustomerContactTel",t),m.Observable.create(function(n){i.dispatcher.dispatch(t).subscribe(function(e){console.debug("customer-service-getCustomerContactTel response",e);var t=new Array;e.Body.map(function(e){return new T(e.ClientID,i.profileCodeService.convertCode2Text("Customer_TelType",e.TelType),e.Tel,e.DataSource)}).forEach(function(e){t.push(e)}),n.next(t),n.complete()})})},e.decorators=[{type:x.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:A.APIDispatch},{type:A.DateUtils},{type:A.APIFactory},{type:A.ProfileCodeService}]},e.ngInjectableDef=x.defineInjectable({factory:function(){return new e(x.inject(A.APIDispatch),x.inject(A.DateUtils),x.inject(A.APIFactory),x.inject(A.ProfileCodeService))},token:e,providedIn:"root"}),e}(),P=function(){function e(){}return e.prototype.addValues=function(e,t){this[e]=t},e}(),_=function(){function e(e,t,n){void 0===e&&(e=""),void 0===t&&(t=new Map),void 0===n&&(n=!1),this.filterMap=new Map,this._savePreset=!1,this._keyword=e,this.filterMap=t,this._savePreset=n}return e.prototype.addCriteria=function(e,t){var n=this.filterMap.get(e);n==undefined&&(n=new Array),n.includes(t)||(n.push(t),this.filterMap.set(e,n))},e.prototype.addCriteriaCols=function(e,t){this.filterMap.set(e,t)},e.prototype.hasCriteria=function(){return 0!=this.filterMap.size||A.StringUtils.isNotEmpty(this._keyword)},Object.defineProperty(e.prototype,"keyword",{get:function(){return this._keyword},set:function(e){this._keyword=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"savePreset",{get:function(){return this._savePreset},set:function(e){this._savePreset=e},enumerable:!0,configurable:!0}),e.prototype.getFilterMap=function(){return this.filterMap},e.prototype.toPresetJSON=function(){var n=new P;return this.filterMap.forEach(function(e,t){n.addValues(t,e)}),console.debug("toPresetJSON",n),n},e}(),N=function(){function e(){}return Object.defineProperty(e.prototype,"action",{get:function(){return this._action},set:function(e){this._action=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"option",{get:function(){return this._optionObj},set:function(e){this._optionObj=e},enumerable:!0,configurable:!0}),e}(),F=function(){function e(e){this._isShow=!0,this._items=new Array,this._groupName=e}return e.prototype.addItem=function(e){this._items.push(e)},Object.defineProperty(e.prototype,"getItems",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupName",{get:function(){return this._groupName},set:function(e){this._groupName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShow",{get:function(){return this._isShow},set:function(e){this._isShow=e},enumerable:!0,configurable:!0}),e}(),M=new x.InjectionToken("syncCustomer"),O=new x.InjectionToken("storeCustomer"),L=new x.InjectionToken("customerAction"),R=new x.InjectionToken("showCustomerRule"),B={DISPLAY:"display",EDIT:"edit",ADD_SAVED:"add saved",EDIT_SAVED:"edit saved",FIRST:"first"},j=function(){function e(e){this.profileCodeService=e}return e.prototype.setCode2Option=function(e){var t,n,i=new Array;if(e!=undefined)try{for(var o=E(e),a=o.next();!a.done;a=o.next()){var r=a.value;i.push(new p.SelectOption(r.getCode(),r.displayText))}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=o["return"])&&n.call(o)}finally{if(t)throw t.error}}return i},e.prototype.countCompletenessByProfile=function(e){console.debug("countCompletenessByDetail",e);var t=0,n=["FirstName","LastName","Occupation","Company","AgeRange","Gender","Income","Source","Marriage","Children","Familiarity","RecentStatus","MANPA","ContactFrequancy","Possibility"];return A.StringUtils.isNotEmpty(e.firstName)&&t++,A.StringUtils.isNotEmpty(e.lastName)&&t++,A.StringUtils.isNotEmpty(e.occupation)&&t++,A.StringUtils.isNotEmpty(e.company)&&t++,A.StringUtils.isNotEmpty(e.ageRange)&&t++,A.StringUtils.isNotEmpty(e.gender)&&t++,A.StringUtils.isNotEmpty(e.income)&&t++,A.StringUtils.isNotEmpty(e.source)&&t++,A.StringUtils.isNotEmpty(e.marriage)&&t++,A.StringUtils.isNotEmpty(e.children)&&t++,A.StringUtils.isNotEmpty(e.familiarity)&&t++,A.StringUtils.isNotEmpty(e.recentStatus)&&t++,A.StringUtils.isNotEmpty(e.manpa)&&t++,A.StringUtils.isNotEmpty(e.contactFrequancy)&&t++,A.StringUtils.isNotEmpty(e.possibility)&&t++,e.birthday!=undefined&&t++,0!=e.tels.length&&t++,0!=e.emails.length&&t++,0!=e.addresses.length&&t++,console.debug("orginal completeness",t,n.length+4),t/=n.length+4,console.debug("before round completeness",t),t=Math.round(100*t)/100,console.debug("after round completeness",t),t},e.prototype.countCompleteness=function(e,t,n,i){var o,a;console.debug("countCompleteness",e,t,n,i);var r=0,s=["FirstName","LastName","Occupation","Company","AgeRange","Gender","Income","Source","Marriage","Children","Familiarity","RecentStatus","MANPA","ContactFrequancy","Possibility"];try{for(var l=E(s),c=l.next();!c.done;c=l.next()){var p=c.value;A.StringUtils.isNotEmpty(e.getValue(p))&&(console.debug("hasData",p+"=>"+e.getValue(p)),r++)}}catch(u){o={error:u}}finally{try{c&&!c.done&&(a=l["return"])&&a.call(l)}finally{if(o)throw o.error}}A.StringUtils.isNotEmpty(e.getValue("BirthdayYear"))&&A.StringUtils.isNotEmpty(e.getValue("BirthdayMonth"))&&A.StringUtils.isNotEmpty(e.getValue("BirthdayDate"))&&r++,0!=t&&r++,0!=n&&r++,0!=i&&r++,console.debug("orginal completeness",r,s.length+4),r/=s.length+4,console.debug("before round completeness",r),r=Math.round(100*r)/100,console.debug("after round completeness",r),e.setValue("Completeness",r)},e.prototype.setCustomerDefaultValue=function(e){if(A.StringUtils.isNotEmpty(e.getValue("BirthdayYear"))&&A.StringUtils.isNotEmpty(e.getValue("BirthdayMonth"))&&A.StringUtils.isNotEmpty(e.getValue("BirthdayDate"))){var t=new Date(Number(e.getValue("BirthdayYear")),Number(e.getValue("BirthdayMonth")-1),Number(e.getValue("BirthdayDate"))),n=this.countAge(t);if(e.setValue("age",n),A.StringUtils.isEmpty(e.getValue("AgeRange"))){var i=this.countAgeRange(n);i!=undefined&&e.setValue("AgeRange",i)}}},e.prototype.countAgeRange=function(i){var o;return console.debug("countAgeRange",i),this.profileCodeService.getCodeArray("Customer_Age").forEach(function(e){var t=e.getArguments();console.debug("customer-utils countAgeRange args",t);var n=JSON.parse(t);console.debug("customer-utils countAgeRange obj",n),i>=n.start&&i<=n.end&&(console.debug("match age range",e.getCode()),o=e.getCode())}),console.debug("rangeResult",o),o},e.prototype.countAge=function(e){var t=this.calCEIntervalDays(e,new Date);console.debug("dates",t);var n=Math.floor(t/365);return console.debug("age",n),n},e.prototype.calRocIntervalDays=function(e,t){e=this.leftPad(e,7,"0"),t=this.leftPad(t,7,"0");var n=e.substring(3,5)+"/"+e.substring(5)+"/"+(Number(e.substring(0,3))+Number(1911)),i=t.substring(3,5)+"/"+t.substring(5)+"/"+(Number(t.substring(0,3))+Number(1911)),o=new Date(n),a=new Date(i).getTime()-o.getTime();return Math.floor(a/864e5)},e.prototype.calCEIntervalDays=function(e,t){return d.differenceInCalendarDays(t,e)},e.prototype.leftPad=function(e,t,n){if(e.toString().length<t)for(var i=1;i<t&&!((e=n+e).toString().length>=t);i++);return e},e.decorators=[{type:x.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:A.ProfileCodeService}]},e.ngInjectableDef=x.defineInjectable({factory:function(){return new e(x.inject(A.ProfileCodeService))},token:e,providedIn:"root"}),e}(),V=function(){function e(e,t,n,i,o,a,r,s,l,c,p,u){this.customerService=e,this.calendarService=t,this.translateService=n,this.changeDetector=i,this.deviceService=o,this.dateUtils=a,this.profileCodeService=r,this.extensionService=s,this.customerUtils=l,this.customerStore=c,this.customerSync=p,this.customerAction=u,this.viewTypeIndex=2,this.viewDate=new Date,this.weekStartsOn=1,this.isShow=!1,this.isExpandDetail=!1,this.isRefreshDetail=!1,this.isSaveClick=!1,this.language=new A.Language,this.isOpen=!1,this.classSearch="",this.isDisplayImportSavePopup=!1,this.isDisplaySavePopup=!1,this.isDisplayDelCustomerPopup=!1,this.isDisplayConfirmAlertPopup=!1,this.isDisplayInfoAlertPopup=!1,this.isDisplayUpdateRemind=!1,this.isDisplayDeleteRemind=!1,this.isPopupImport=!1,this.isPopupFilter=!1,this.isExpandEdit=!1,this.isPopupCallPhone=!1,this.isPopupNoteDetail=!1,this.isPopupEditNote=!1,this.isPopupDeleteNote=!1,this.isPopupConfirmDisable=!0,this.isDisplayDeletePopup=!1,this.alertOverTimeList=new Array,this.alertAutoDeleteCustomer=new Array,this._confirmAction=new N,this.isLoadingFinishContent=!1,this.isLazyLoading=!0,this.customerContactList=[],this.contactListPageInfo=new A.PageInfo,this.viewDateCalendarEventList=[],this.customerList=new Array,this.customerListPageInfo=new A.PageInfo,this.filterCriteria=new _,this.filterType="",this.optionMap=new Map,this.translateMap=new Map,this.dayTypesList=["Cross_Day","All_Day"],this.noSchedule="No_Schedule",this.activityTypeList=[],this.alertTypeList=[],this.importContractMap=new Map,this.mobileResultSize=0,this.importData=!1,this.importContactList=[],this.isLoadCriteria=!1,this.isClearCriteria=!1,this._onImportResult=!1,this.noteCurrentTime=new Date,this.noteMessage="",this.noteClientID="",this.isRefreshContactList=!1,this.loadContactList=!1,this.classBarMove="",this._reloadData=!1,this.customerDetail=new C,this.currentCustomer=null,this.customerState=B.FIRST,this.pre_criteria=new _,this.clearSubject=new m.Subject,this.saveFilterSubject=new m.Subject,this.detailModel=new x.EventEmitter}return e.prototype.ngOnDestroy=function(){this.customerStore&&(this.criteriaChanges.unsubscribe(),this.customerDetailChanges.unsubscribe(),this.stateChanges.unsubscribe(),this.customerListChanges.unsubscribe())},e.prototype.ngOnInit=function(){var t=this;if(this.activityTypeList=this.profileCodeService.getCodeArray("Calendar_Type"),this.alertTypeList=this.profileCodeService.getCodeArray("Calendar_RemindTime"),this.optionMap.set("Calendar_Type",this.activityTypeList),this.optionMap.set("Calendar_RemindTime",this.alertTypeList),this.dayTypesList.forEach(function(e){t.translateMap.set(e,t.translateService.translate(e))}),this.translateMap.set(this.noSchedule,this.translateService.translate(this.noSchedule)),this.customerStore?(this.criteriaChanges=this.customerStore.getCriteria().subscribe(function(e){t.pre_criteria=e}),this.customerDetailChanges=this.customerStore.getCurrentCustomerDetail().subscribe(function(e){t.currentCustomer=e}),this.customerListChanges=this.customerStore.getCustomerList().subscribe(function(e){t.pre_customerList=e}),this.stateChanges=this.customerStore.getState().subscribe(function(e){console.log("main state: ",e),e==B.EDIT_SAVED&&t.customerState!=B.EDIT_SAVED?(console.log("state == CUSTOMER_STATE.EDIT_SAVED"),console.log("currentCustomer: ",t.currentCustomer),t.isDisplaySavePopup=!0,t.customerList=t.pre_customerList,t.filterCriteria=t.pre_criteria,t.pre_criteria.hasCriteria()?t.customerService.checkInFilterCriteria(t.currentCustomer.clientID,t.pre_criteria).subscribe(function(e){e?t.customerList.forEach(function(e){e.clientID==t.currentCustomer.clientID&&(console.debug("change isHighLight status"),e.isHighLight=!1)}):(t.customerList.forEach(function(e){e.clientID==t.currentCustomer.clientID&&(e.isHighLight=!0)}),t.customerList=y(t.customerList)),t.customerList.forEach(function(e){e.clientID==t.currentCustomer.clientID&&(e.firstName=t.currentCustomer.firstName,e.lastName=t.currentCustomer.lastName,e.tag=t.currentCustomer.possibility,e.complementPercent=t.customerUtils.countCompletenessByProfile(t.currentCustomer))}),t.customerList=y(t.customerList),t.customerStore.setCustomerList(t.customerList)}):(t.customerList.forEach(function(e){e.clientID==t.currentCustomer.clientID&&(e.firstName=t.currentCustomer.firstName,e.lastName=t.currentCustomer.lastName,e.tag=t.currentCustomer.possibility,e.complementPercent=t.customerUtils.countCompletenessByProfile(t.currentCustomer))}),t.customerList=y(t.customerList)),t.onGetCustomerDetailByID(t.currentCustomer.clientID),t.refreshContactNote(!1)):e==B.EDIT&&t.customerState!=B.EDIT&&t.customerState==B.FIRST?(t.customerList=t.pre_customerList,t.filterCriteria=t.pre_criteria,A.StringUtils.isEmpty(t.currentCustomer.clientID)?t.refreshCustomerList(!1):(t.onGetCustomerDetailByID(t.currentCustomer.clientID),t.refreshContactNote(!1))):t.customerState==B.FIRST&&e==B.DISPLAY?(console.log("this.customerState == CUSTOMER_STATE.FIRST && state == CUSTOMER_STATE.DISPLAY"),t.loadPresetCriteria().then(function(){t.refreshCustomerList(!1)})):e==B.ADD_SAVED&&(console.log("state == CUSTOMER_STATE.ADD_SAVED"),t.isDisplaySavePopup=!0,t.filterCriteria=t.pre_criteria,t.refreshCustomerList(!1)),t.customerState=e}),this.customerStore.setState(B.DISPLAY)):this.refreshCustomerList(!1),this.refreshContactNote(!1),this.customerService.isFirstTime()){console.log("customer is first time"),this.customerService.getOverTimeCustomerList("").subscribe(function(e){t.alertOverTimeList=e,0!=t.alertOverTimeList.length&&t.customerService.updateMessageToRead("OverTime","Customer").subscribe(function(e){t.isDisplayUpdateRemind=!0})}),this.customerService.getAutoDeleteCustomerList("").subscribe(function(e){console.log("customerAutoDelete: ",e),t.alertAutoDeleteCustomer=e,0!=t.alertAutoDeleteCustomer.length&&t.customerService.updateMessageToRead("AutoDelete","Customer").subscribe(function(e){console.log("updateMessageToRead: ",e),t.isDisplayDeleteRemind=!0})});var e=this.extensionService.getConfigValue("CustomerInfoAlertTimer");console.debug("timerObj",e),this._checkIsInfoAlertTime(e)}},e.prototype.refreshCustomerList=function(t){var n=this;console.debug("refreshCustomerList append",t),console.debug(this.filterCriteria),console.debug(this.customerListPageInfo),t||this.customerListPageInfo.resetPage(),this.customerService.getCustomerList(this.filterCriteria,this.customerListPageInfo).subscribe(function(e){console.log("data in criteria: ",e),n.customerList=t?y(n.customerList,e):y(e),n.filterCriteria.hasCriteria()?n.filterType=A.StringUtils.isNotEmpty(n.filterCriteria.keyword)?"SEARCH":"FILTER":n.filterType="NONE",n.customerStore&&n.customerStore.setCustomerList(n.customerList),0<n.customerList.length?n.onGetCustomerDetailByID(n.customerList[0].clientID):n.customerDetail=new C})},e.prototype.refreshContactNote=function(t){var n=this;t||this.contactListPageInfo.resetPage(),this.customerService.getCustomerContactNote(this.customerDetail.clientID,this.contactListPageInfo).subscribe(function(e){n.customerContactList=t?n.customerContactList.concat(e):e,console.debug("refreshContactNote success isRefreshContactList status")})},e.prototype.onGetCustomerContactListByID=function(e){var t=this;this.customerService.getCustomerContactNote(e,this.contactListPageInfo).subscribe(function(e){t.customerContactList=e})},e.prototype._checkIsInfoAlertTime=function(e){var i=this,t=e.DateRange,o=e.TimeRange,a=new Date;console.debug("now",a),console.debug("now month",a.getMonth()+1),console.debug("now date",a.getDate()),console.debug("now hours",a.getHours()),t.forEach(function(e){var t=e.month,n=e.date;a.getMonth()+1==Number.parseInt(t)&&a.getDate()==Number.parseInt(n)&&a.getHours()>=Number.parseInt(o.start)&&a.getHours()<=Number.parseInt(o.end)&&(i.isDisplayInfoAlertPopup=!0)})},e.prototype.onGetCustomerDetailByID=function(e){var t=this;this.customerService.getCustomerDetail(e).subscribe(function(e){t.customerDetail=e,t.customerService.convertCustomerDetailDisplayMode(t.customerDetail)})},e.prototype.toggleSearch=function(){this.isOpen=!this.isOpen,this.classSearch=this.isOpen?" active":"",this.isOpen||(this.filterCriteria.keyword="",this.customerStore&&this.customerStore.setCriteria(this.filterCriteria),this.refreshCustomerList(!1))},e.prototype.searchCustomerName=function(e){console.debug("searchCustomerName",e),this.filterCriteria.keyword=e,this.customerStore&&this.customerStore.setCriteria(this.filterCriteria),this.refreshCustomerList(!1)},e.prototype.trackByFn=function(e,t){return t.name},e.prototype.onChangeCustomer=function(e){this.clickItem=e,this.onGetCustomerDetailByID(e.clientID),this.onGetCustomerContactListByID(e.clientID),this.isShow=!0},e.prototype.onCustomerLoad=function(){this.customerListPageInfo.nextPage(),this.refreshCustomerList(!0)},e.prototype.onCustomerRefresh=function(){var t=this;this.customerSync.sync().subscribe(function(e){t.refreshCustomerList(!1)})},e.prototype.deleteCustomer=function(e){this.isDisplayDelCustomerPopup=!0},e.prototype.doDeleteCustomer=function(){var t=this;this.customerList=this.customerList.filter(function(e){return e.clientID!=t.customerDetail.clientID}),this.onGetCustomerDetailByID(this.customerList[0].clientID),this.customerService.deleteCustomerProfile(this.customerDetail.clientID).subscribe(function(e){console.log("customerService.doDeleteCustomer()",e),e.status&&(t.customerStore&&t.customerStore.setCustomerList(t.customerList),t.isShow=!1,t.isDisplayDeletePopup=!0)})},e.prototype.addAppointment=function(e){var t,n=this;t=new Date(d.getYear(this.viewDate),d.getMonth(this.viewDate),d.getDate(this.viewDate),d.getHours(new Date),d.getMinutes(new Date)),t=d.addMinutes(t,5-d.getMinutes(t)%5),t=d.addHours(t,1),this.calendarEventDetail=new o.CalendarEventDetail("","","","",null,"N",t,d.addHours(t,1),"Y","8",null,"","",null);var i=new Date(d.getYear(this.viewDate),d.getMonth(this.viewDate),d.getDate(this.viewDate),0,0,0);this.calendarService.getCalendarEventList(i,d.subMinutes(d.addDays(this.viewDate,1),1),"").subscribe(function(e){n.viewDateCalendarEventList=e,n.onToggleAppointmentModal(!0)})},e.prototype.onClickAppointmentSave=function(){this.isSaveClick=!0},e.prototype.onToggleAppointmentModal=function(e){this.isExpandEdit=e},e.prototype.onSaveCalendarEvent=function(t){var n=this;this.isSaveClick=!1,t&&this.calendarService.addCalendarEvent(t).subscribe(function(e){e.status&&(n.isDisplaySavePopup=!0,t.clientID=e.clientID,n.calendarEventDetail=t,n.onToggleAppointmentModal(!1))})},e.prototype.addCustomer=function(){this.isDisplayConfirmAlertPopup=!1;var e=new C;this.customerStore&&(this.customerStore.setCurrentCustomerDetail(e),this.customerStore.setState(B.EDIT)),this.customerAction&&this.customerAction.afterCustomerEdit(e)},e.prototype.editCustomer=function(e){var t=this;this.customerStore&&(this.customerStore.setState(B.EDIT),this.customerService.getCustomerDetail(e).subscribe(function(e){t.customerStore.setCurrentCustomerDetail(e),t.customerAction&&t.customerAction.afterCustomerEdit(e)}))},e.prototype.detailChange=function(e){console.log("detailChange",e),this.detailModel.emit(e)},e.prototype.followChange=function(n){var i=this;this.customerService.updateCustomerFollowStatus(n.clientID,n.isFollow).subscribe(function(e){i.filterCriteria&&i.customerService.checkInFilterCriteria(n.clientID,i.filterCriteria).subscribe(function(t){i.customerList.forEach(function(e){e.clientID==n.clientID&&(e.isHighLight=!t)})}),i.customerList.filter(function(e){return e.clientID==n.clientID}).forEach(function(e){e.isFollow=n.isFollow})})},e.prototype.addNote=function(){console.debug("addNote"),this.noteCurrentTime=new Date,this.noteMessage="",this.isPopupEditNote=!0},e.prototype.editNote=function(e){console.debug("editNote",e),this.noteEditClientID=e.getClientID(),this.noteCurrentTime=new Date,this.noteMessage=e.noteMessage,this.isPopupEditNote=!0},e.prototype.displayNote=function(e){console.debug("displayNote",e),this.customerContactDetail=e,this.customerContactDetail.name=this.customerDetail.lastName+this.customerDetail.firstName,this.isPopupNoteDetail=!0},e.prototype.deleteNote=function(e){console.debug("deleteNote",e),this.noteClientID=e.getClientID(),this.isPopupDeleteNote=!0},e.prototype.doDeleteContact=function(){var t=this;this.customerService.deleteCustomerContact(this.noteClientID).subscribe(function(e){console.log("customerService.deleteNote()",e),e.status&&(t.customerContactList=t.customerContactList.filter(function(e){return e.getClientID()!=t.noteClientID}),t.noteClientID="",t.isDisplayDeletePopup=!0)})},e.prototype.onSaveNote=function(e){var t=this;A.StringUtils.isEmpty(this.noteMessage)?alert("Message is required!!"):this.customerService.addCustomerContact(this.noteEditClientID,this.customerDetail.clientID,this.noteMessage,this.noteCurrentTime).subscribe(function(e){console.log("customerService.saveNote()",e),e.status&&(console.debug("saveNote success , close popup & refresh list",t.isDisplaySavePopup,"isRefreshContactList",t.isRefreshContactList),t.noteEditClientID=undefined,t.isPopupEditNote=!1,t.isDisplaySavePopup=!0,t.refreshContactNote(!1))})},e.prototype.showConfirmPopup=function(e,t){this._confirmAction.action=e,this._confirmAction.option=t,this.isDisplayConfirmAlertPopup=!0,this.isPopupConfirmDisable=!0},e.prototype.confirmPopup=function(){"add"==this._confirmAction.action?this.addCustomer():"import"==this._confirmAction.action&&this["import"](),this.isDisplayConfirmAlertPopup=!1},e.prototype.detectScroll=function(e){console.log("in detect scroll===",e),e&&(this.isPopupConfirmDisable=!1)},e.prototype["import"]=function(){var o=this;this.deviceService.searchContactsByName("").subscribe(function(e){var t=e;console.debug("import result ",t),o.importContractMap.clear(),t.forEach(function(e){console.debug(e.lastname),A.StringUtils.isEmpty(e.lastname)&&(e.lastname=e.firstname,e.firstname="");var t=e.lastname;if(null!=t&&0<t.length){var n=t.substring(0,1);n=n.toLowerCase(),console.debug("firstWord ="+n);var i=o.importContractMap.get(n);i==undefined&&(i=new F(n)),i.addItem(e),o.importContractMap.set(n,i)}}),console.debug("importContractMap",o.importContractMap)}),this.isPopupImport=!0},e.prototype.displayImportPopup=function(e){this.isPopupImport=e},e.prototype.refreshImport=function(i){this.importContractMap.forEach(function(n,e){n.isShow=!1,n.getItems.forEach(function(e){var t=e.lastname+e.firstname;-1==(t=t.toLowerCase()).indexOf(i)?e.isShow=!1:(e.isShow=!0,n.isShow=!0)})})},e.prototype.doImport=function(){var t=this;this.customerService.importContact(this.importContactList).subscribe(function(e){JSON.parse(JSON.stringify(e)).status&&(t.isPopupImport=!1,t.isDisplayImportSavePopup=!0,t.mobileResultSize=0,t.refreshCustomerList(!1))})},e.prototype.onImportCustomer=function(e){console.debug("importItems",e),this.importContactList=e,this.mobileResultSize=e.length},e.prototype.callCustomer=function(e){var t=this;console.debug("callCustomer = "+e),this.customerService.getCustomerContactTel(e).subscribe(function(e){t.callPhoneTelArray=e,0!=t.callPhoneTelArray.length&&(1==t.callPhoneTelArray.length?t.callPhone(t.callPhoneTelArray[0].tel):t.isPopupCallPhone=!0)})},e.prototype.cancelCallPhone=function(){this.isPopupCallPhone=!this.isPopupCallPhone},e.prototype.callPhone=function(e){var t=this;console.debug("callPhone",e),this.isPopupCallPhone&&(this.isPopupCallPhone=!this.isPopupCallPhone),window.open("tel:"+e,"_system"),setTimeout(function(e){t.addNote()},1e3)},e.prototype.filter=function(){this.isPopupFilter=!0},e.prototype.clearFilter=function(){this.clearSubject.next()},e.prototype.doFilter=function(){this.saveFilterSubject.next()},e.prototype.doneCriteria=function(e){console.debug("doneCriteria",e),this.filterCriteria=e,this.isPopupFilter=!1,this.customerStore&&this.customerStore.setCriteria(e),e.savePreset&&this.customerService.saveFilterCriteria(e).subscribe(function(e){console.debug("doneCriteria saveFilterCriteria",e)}),this.refreshCustomerList(!1)},e.prototype.loadPresetCriteria=function(){var a=this,r=new _;return new Promise(function(o){a.customerService.getFilterCriteriaPreset().subscribe(function(e){if(console.debug("getfilterCriteriaPreset",e),e!=undefined){var t=0;for(var n in e){var i=e[n];console.debug("column",n,"arrays",i),r.addCriteriaCols(n,i),t++}0!=t&&(r.savePreset=!0),a.filterCriteria=r}o()})})},e.prototype.cancelDelete=function(){console.log("cancelDelete")},e.prototype.refreshContent=function(){var t=this;console.log("content refresh:",this.customerSync),setTimeout(function(){t.customerSync.sync().subscribe(function(e){e&&(t.isLoadingFinishContent=!0)})},800)},e.prototype.loadContent=function(e){var t=this;console.log("content loading"),this.loadContactList?setTimeout(function(){t.isLoadingFinishContent=!0},0):this.loadContactList=!0},e.prototype.contactRefreshDone=function(e){var t=this;console.debug("refresh done"),setTimeout(function(){t.isLoadingFinishContent=!e,t.loadContactList=e},0)},e.prototype.isShowChange=function(e){this.isShow!==e&&(this.isShow=e)},e.prototype.toNoteTime=function(e){return this.dateUtils.toDateString(e,"yyyy-MM-dd HH:mm")},e.decorators=[{type:x.Component,args:[{selector:"app-customers",template:'<app-ui-main-side-menu [title]="[language.customer | translate]" [isShow]="isShow" (isShowChange)="isShowChange($event)">\n\n    <div class="side-menu-content" side-menu>\n      \x3c!-- Title Block --\x3e\n      <div class="title-main-block">\n        <app-ui-title-style1>\n          <ng-container textType="titleText">{{language.customerList |translate }}</ng-container>\n        </app-ui-title-style1>\n      </div>\n      \x3c!-- Action Block--\x3e\n      <div class="filter-all-block">\n        <ul class="filter-block" [ngClass]="classSearch ? \' ani-bar-move\': \'\'">\n            <li class="filter-item">\n                <button Action action="customerShowAddConfirm" (actionClick)="showConfirmPopup(\'add\',[])">\n                  <img src="assets/img/icon-customer-list-add.svg" alt="">\n                </button>\n            </li>\n            <li class="filter-item">\n              \x3c!-- import --\x3e\n              <button  Action action="customerShowImportConfirm" (actionClick)="showConfirmPopup(\'import\',[])">\n                  <img src="assets/img/icon-customer-list-import.svg" alt="">\n              </button>\n              \x3c!-- end of import --\x3e\n            </li>\n            \x3c!-- filter item --\x3e\n            <li class="filter-item">\n                <button Action action="customerFilter" (actionClick)="filter()">\n                  <ng-container *ngIf="filterCriteria.getFilterMap().size != 0">\n                      <span class="num-block">\n                        <span class="num">{{filterCriteria.getFilterMap().size}}</span>\n                      </span>\n                  </ng-container>\n\n                  <img src="assets/img/icon-customer-list-filter.svg" alt="">\n                </button>\n            </li>\n            \x3c!-- end of filter item --\x3e\n            <li class="filter-item search-animate-block" [ngClass]="classSearch">\n              <button class="btn-search-open" Action action="customerSearch" (actionClick)="toggleSearch()" >\n                <img src="assets/img/icon-customer-list-search.svg" alt="">\n              </button>\n              <div class="search-input-block input-block" [ngClass]="this.isOpen ? \'open\' : \'closed\'">\n                  <app-ui-form-input [nxValue]="filterCriteria.keyword" (nxValueChange)="searchCustomerName($event)" [placeholder]="[language.searchPlaceholder | translate]"></app-ui-form-input> \n                  <button class="btn-search-cancel" Action action="customerSearch" (actionClick)="toggleSearch()">\n                      <nx-icon name=\'close-circle\' size=\'s\'></nx-icon>\n                  </button>\n              </div>\n            </li>\n        </ul>\n      </div>\n\n      \x3c!-- Customer List Component --\x3e\n      <app-customer-list (customerClick)="onChangeCustomer($event)" (customerLoad)="onCustomerLoad()" (customerRefresh)="onCustomerRefresh()" [customerList]="customerList" [filterType]="filterType"></app-customer-list>\n      \x3c!-- end of Customer List Component --\x3e\n\n    </div>\n\n    <div class="main-content stop-scroll-block" main>\n      \n        <app-ui-infinite-scroll (loadingCallback)="loadContent($event)" (refreshCallback)="refreshContent()" [(loadingFinish)]="isLoadingFinishContent" [lazyLoading]="isLazyLoading">\n\n\n          \x3c!-- Customer Detail --\x3e\n          <app-customer-detail [detailPreTemplate]="detailPreTemplate" [detailPostTemplate]="detailPostTemplate" [customerDetail]="customerDetail" (followChange)="followChange($event)" (onDeleteDetail)="deleteCustomer($event)" (onAddAppointment)="addAppointment($event)" (onCallPhone)="callCustomer($event)" (onEditDetail)="editCustomer($event)" ></app-customer-detail>\n          \x3c!-- end of Customer Detail --\x3e\n\n\n          \x3c!-- Customer Contact List --\x3e\n          <app-customer-contact-list [contactList]="customerContactList" (onAddNote)="addNote()" (onDisplayNote)="displayNote($event)" (onEditNote)="editNote($event)" (onDeleteNote)="deleteNote($event)" ></app-customer-contact-list>\n          \x3c!-- end of Customer Contact List --\x3e\n\n        </app-ui-infinite-scroll>\n    </div>\n\n\n  \x3c!-- Popup --\x3e\n  <div global-main>\n      \x3c!-- side import --\x3e\n      <app-ui-modal-style-text1 [(isPopupOpen)]="isPopupImport" class="wd-md" [isContnetFull]="true">\n          \n        <ng-container textType="modal-title-detail">{{language.importPhone |translate }}</ng-container>   \n          <ng-container textType="modal-content-detail">\n            \x3c!-- still need space --\x3e\n            <div class="space-normal top-search-block">\n              \x3c!-- search block --\x3e\n              <app-ui-form-search [name]="\'search\'" [placeholder]="[language.searchPlaceholder | translate]" (nxValueChange)="refreshImport($event)"></app-ui-form-search>\n              \x3c!-- end of search block --\x3e\n            </div>\n            \x3c!-- end of still need space --\x3e\n           <app-customer-import [importContractMap]="importContractMap" (importCustomer)="onImportCustomer($event)"></app-customer-import>\n          </ng-container>\n          <ng-container textType="modal-btm-detail">\n              <div class="btm-set-block">\n                  <span class="ps-text">\n                    {{mobileResultSize}} {{language.people|translate}}\n                  </span>\n                  \x3c!-- btn --\x3e\n                  <app-ui-btn-layout>\n                    <app-ui-btn [btnHeight]="\'sm\'" (ClickBtn)="doImport()">\n                      <ng-container TextType="cust">{{language.import|translate}}</ng-container>\n                    </app-ui-btn>\n                  </app-ui-btn-layout>\n                  \x3c!-- end of btn --\x3e\n              </div>\n          </ng-container>\n      </app-ui-modal-style-text1>\n      \x3c!-- end of side import--\x3e\n\n      \x3c!-- side Filter--\x3e\n      <app-ui-modal-style-text1 class="wd-lg" [(isPopupOpen)]="isPopupFilter">\n          <ng-container textType="modal-title-detail">{{language.customerFilter |translate }}</ng-container>\n          <ng-container textType="modal-content-detail">\n              <app-customer-filter [criteria]="filterCriteria" (doneCriteria)="doneCriteria($event)" [clear]="clearSubject" [save]="saveFilterSubject"></app-customer-filter>\n          </ng-container>\n\n          <ng-container textType="modal-btm-detail">\n            <app-ui-btn-layout>\n              <app-ui-btn [name]="\'btn-clear\'" (ClickBtn)="clearFilter()" [btnHeight]="\'sm\'" [btnStyle]="\'border\'">\n                <ng-container TextType="cust">{{language.clear |translate }}</ng-container>\n              </app-ui-btn>\n              <app-ui-btn [name]="\'btn-filter\'" (ClickBtn)="doFilter()" [btnHeight]="\'sm\'">\n                <ng-container TextType="cust">{{language.filter |translate }}</ng-container>\n              </app-ui-btn>\n            </app-ui-btn-layout>\n          </ng-container>\n      </app-ui-modal-style-text1>\n      \x3c!-- end of side Filter --\x3e\n\n      \x3c!-- appointment popup --\x3e\n      <app-ui-modal-style-text1 [isBackdropClose]="false" [(isPopupOpen)]="isExpandEdit" class="wd-lg calendar-edit-content" (close)="onToggleAppointmentModal(false)">\n        <ng-container textType="modal-title-detail">{{language.appointment |translate }}</ng-container>\n        <ng-container textType="modal-content-detail">\n          <snd-calendar-edit [calendarEventDetail]="calendarEventDetail"\n                             [optionMap]="optionMap"\n                             [translateMap]="translateMap"\n                             [todayCalendarEvent]="viewDateCalendarEventList"\n                             [isSaveClick]="isSaveClick"\n                             [viewDate]="viewDate"\n                             (saveEvent)="onSaveCalendarEvent($event)"></snd-calendar-edit>\n        </ng-container>\n        <ng-container textType="modal-btm-detail">\n          <app-ui-btn-layout>\n            <app-ui-btn [btnWd]="\'md\'" [btnHeight]="\'sm\'" (ClickBtn)="onClickAppointmentSave()">\n              <ng-container TextType="cust">{{language.save |translate }}</ng-container>\n            </app-ui-btn>\n           </app-ui-btn-layout>\n        </ng-container>\n      </app-ui-modal-style-text1>\n      \x3c!-- end of appointment popup --\x3e\n\n      \x3c!-- contact popup --\x3e\n        <app-ui-modal-style-img-base  class="wd-sm"  [(isPopupOpen)]="this.isPopupCallPhone">\n            <ng-container textType="modal-img-detail">\n              <nx-icon name=\'phone-o\' size=\'auto\' [fill]="false" [outline]=\'false\'></nx-icon>\n            </ng-container>\n            <ng-container textType="modal-title-detail">{{language.selectNumber |translate }}</ng-container>\n            <ng-container textType="modal-content-detail">\n              <ng-container *ngFor="let tel of callPhoneTelArray">\n                  \x3c!-- tel 1  --\x3e\n                 <app-ui-link-bg [textTitle]="tel.telType | translate" [text]="tel.tel" (linkBtnClick)="callPhone(tel.tel)"></app-ui-link-bg>\n                  \x3c!-- end of tel 1 --\x3e\n              </ng-container>\n            </ng-container>\n            <ng-container textType="modal-btm-detail">\n                <app-ui-btn-layout>\n                  <app-ui-btn  [btnColor]="\'grey\'" [btnStyle]="\'text\'" [btnWd]="\'md\'" (ClickBtn)="cancelCallPhone()">\n                    <ng-container TextType="cust">{{language.cancel |translate }}</ng-container>\n                  </app-ui-btn>\n                </app-ui-btn-layout>\n            </ng-container>\n        </app-ui-modal-style-img-base>\n      \x3c!-- end of contact popup --\x3e\n\n      \x3c!-- note detail --\x3e\n      <ng-container *ngIf="customerContactDetail">\n          <app-ui-modal-style-text1 class="wd-md" [isHasBtmBlock]="false" [(isPopupOpen)]="isPopupNoteDetail">\n              <ng-container textType="modal-title-detail">{{language.contactNote |translate }}</ng-container>\n              <ng-container textType="modal-content-detail">\n                <div class="text-detail-block">\n                  <div class="img-text-block-horizon">\n                    <div class="img-block">\n                      <img src="assets/img/img-cust-profile.svg">\n                    </div>\n                    <div class="text-block">\n                      <p class="desc">{{customerContactDetail.name}}</p>\n                      <p class="desc-normal desc-line-lg">{{ toNoteTime(customerContactDetail.date)}}</p>\n                      <p class="desc-normal desc-line-lg">{{customerContactDetail.noteMessage}}</p>\n                    </div>\n                  </div>\n\n                </div>\n\n              </ng-container>\n          </app-ui-modal-style-text1>\n      </ng-container>\n\n      \x3c!-- end of note detail --\x3e\n\n      \x3c!-- add/edit note --\x3e\n      <app-ui-modal-style-text1 class="wd-md" [isBackdropClose]="false"  [(isPopupOpen)]="this.isPopupEditNote">\n          <ng-container textType="modal-title-detail">{{language.contactNote |translate }}</ng-container>\n          <ng-container textType="modal-content-detail">\n            <p class="desc">{{this.noteCurrentTime | date: \'dd/MM/yyyy hh:mm\'}}</p>\n            <div class="textarea-block" > \n              <textarea class="detail-text" placeholder= "{{ language.notePlaceholder | translate}}" [(ngModel)]="this.noteMessage"></textarea>\n              \n            </div>\n          </ng-container>\n          <ng-container textType="modal-btm-detail">\n            \x3c!-- btn --\x3e\n            <app-ui-btn-layout>\n              <app-ui-btn [name]="\'btn-note-save\'" (ClickBtn)="onSaveNote($event)" [btnWd]="\'md\'" [btnHeight]="\'sm\'">\n                <ng-container TextType="cust">{{language.save |translate }}</ng-container>\n              </app-ui-btn>\n            </app-ui-btn-layout>\n            \x3c!-- end of btn --\x3e\n          </ng-container>\n        </app-ui-modal-style-text1>\n      \x3c!-- end of add note --\x3e\n\n      \x3c!--  save--\x3e\n      <app-ui-popup-style-feedback [(isPopupOpen)]="isDisplaySavePopup">\n          <ng-container textType="modal-img-detail">\n            <nx-icon name=\'check\' size=\'auto\'></nx-icon>\n          </ng-container>\n          <ng-container textType="modal-content-detail">{{language.saved |translate }}</ng-container>\n        </app-ui-popup-style-feedback>\n      \x3c!-- end of save --\x3e\n\n      \x3c!-- import save--\x3e\n      <app-ui-popup-style-feedback [(isPopupOpen)]="isDisplayImportSavePopup">\n          <ng-container textType="modal-img-detail">\n            <nx-icon name=\'check\' size=\'auto\'></nx-icon>\n          </ng-container>\n          <ng-container textType="modal-content-detail">{{language.completed| translate }}</ng-container>\n        </app-ui-popup-style-feedback>\n      \x3c!-- end of save --\x3e\n\n      \x3c!-- Delete Success --\x3e\n      <app-ui-popup-style-feedback [(isPopupOpen)]="isDisplayDeletePopup">\n          <ng-container textType="modal-img-detail">\n            <nx-icon name=\'check\' size=\'auto\'></nx-icon>\n          </ng-container>\n          <ng-container textType="modal-content-detail">{{language.delete | translate}}</ng-container>\n        </app-ui-popup-style-feedback>\n      \x3c!-- end of Delete Success --\x3e\n\n\n      \x3c!-- delete customer data --\x3e\n      <app-ui-alert-confirm [(isPopupOpen)]="isDisplayDelCustomerPopup" (onCancel)="cancelDelete()" (onConfirm)="doDeleteCustomer()" [title]="[language.delete | translate]" [message]="[language.deleteMessage | translate]" [cancelBtnText]="[language.no | translate]" [confirmBtnText]="[language.yes | translate]">\n      </app-ui-alert-confirm>\n      \x3c!-- end of delete customer data --\x3e  \n\n      \x3c!-- delete customer contact data --\x3e\n      <app-ui-alert-confirm [(isPopupOpen)]="isPopupDeleteNote" (onCancel)="cancelDelete()" (onConfirm)="doDeleteContact()" [title]="[language.delete | translate]" [message]="[language.deleteMessage | translate]" [cancelBtnText]="[language.no | translate]" [confirmBtnText]="[language.yes | translate]">\n      </app-ui-alert-confirm>\n      \x3c!-- end of delete customer contact data --\x3e\n\n      \x3c!-- customer info alert --\x3e\n      <app-ui-modal-style-img-base  [(isPopupOpen)]="isDisplayInfoAlertPopup" >\n        <ng-container textType="modal-img-detail">\n            <img src="assets/img/icon-cust-remind.svg">\n        </ng-container>\n        <ng-container textType="modal-title-detail">{{language.protectionTitle |translate }}</ng-container>\n        <ng-container textType="modal-content-detail" >\n            <app-ui-text-type [colorCode]="\'#f5f5f5\'">\n              <p class="desc-sm">\n                It will show the content Allianz provide. The dummy words are below:\n                After ten minutes with Ed Tettemer in the offices of the agency he founded with partner, Steve Red, you begin to understand the agencys passion for excellence. After an hour with Ed, you begin to understand the intensity of his personal passion. You begin to understand it but I have a feeling that, even after days and days of exposure to him, you probably wouldnt get the whole picture.\n                <br />\n                Passion, the word, may seem descriptive of a complicated set of feelings and opinions. Oddly, in thinking about Ed Tettemers passion for his agency and its clients, it seems rather simple. Its just that he wants everything to be excellent: excellent clients, excellent co-workers, excellent marketing solutions, excellent creative executions, excellent everything.\n                <br />\n                Whered you go to college, Ed? (A question most interviewers ask without expecting surprises in the response.) Never went to college. Dropped out of high school and never looked back. Got my college degree at the Elkman agency and my graduate degree at Earle Palmer Brown.\n                <br />\n                Whered you go to college, Ed? (A question most interviewers ask without expecting surprises in the response.) Never went to\n                college. Dropped out of high school and never looked back. Got\n              </p>\n            </app-ui-text-type>\n        </ng-container>\n        \x3c!-- end modal-content-detail --\x3e\n        <ng-container textType="modal-btm-detail">\n          \x3c!-- btn --\x3e\n          <app-ui-btn-layout>\n            <app-ui-btn class="btn-single-block"  [btnColor]="\'main2\'" [btnStyle]="\'full\'" [btnHeight]="\'sm\'" [btnWd]="\'md\'" (ClickBtn)="isDisplayInfoAlertPopup = !isDisplayInfoAlertPopup">\n              <ng-container TextType="cust">{{language.confirm |translate }}</ng-container>\n            </app-ui-btn>\n          </app-ui-btn-layout>\n          \x3c!-- end of btn --\x3e\n        </ng-container>\n        \x3c!-- end modal-btm-detail --\x3e\n      </app-ui-modal-style-img-base>\n    \x3c!-- end of customer info alert --\x3e\n\n      \x3c!-- customer confirm alert --\x3e\n      <app-ui-modal-style-img-base class="popup-agree" [(isPopupOpen)]="isDisplayConfirmAlertPopup" (onScrollContentBtm)="detectScroll($event)">\n          <ng-container textType="modal-img-detail">\n              <img src="assets/img/icon-cust-remind.svg">\n          </ng-container>\n          <ng-container textType="modal-title-detail">{{language.protectionTitle |translate }}</ng-container>\n          <ng-container textType="modal-content-detail">\n              <app-ui-text-type #confirmAlert [colorCode]="\'#f5f5f5\'">\n                <p class="desc-sm">\n                  After ten minutes with Ed Tettemer in the offices of the agency he founded with partner, Steve Red, you begin to understand the agencys passion for excellence. After an hour with Ed, you begin to understand the intensity of his personal passion. You begin to understand it but I have a feeling that, even after days and days of exposure to him, you probably wouldnt get the whole picture.\n                  <br />\n                  After ten minutes with Ed Tettemer in the offices of the agency he founded with partner, Steve Red, you begin to understand the agencys passion for excellence. After an hour with Ed, you begin to understand the intensity of his personal passion. You begin to understand it but I have a feeling that, even after days and days of exposure to him, you probably wouldnt get the whole picture.\n                  <br />\n                  After ten minutes with Ed Tettemer in the offices of the agency he founded with partner, Steve Red, you begin to understand the agencys passion for excellence. After an hour with Ed, you begin to understand the intensity of his personal passion. You begin to understand it but I have a feeling that, even after days and days of exposure to him, you probably wouldnt get the whole picture.\n                  <br />\n                  After ten minutes with Ed Tettemer in the offices of the agency he founded with partner, Steve Red, you begin to understand the agencys passion for excellence. After an hour with Ed, you begin to understand the intensity of his personal passion. You begin to understand it but I have a feeling that, even after days and days of exposure to him, you probably wouldnt get the whole picture.\n                  <br />\n                  Passion, the word, may seem descriptive of a complicated set of feelings and opinions. Oddly, in thinking about Ed Tettemers passion for his agency and its clients, it seems rather simple. Its just that he wants everything to be excellent: excellent clients, excellent co-workers, excellent marketing solutions, excellent creative executions, excellent everything.\n                  <br />\n                  Whered you go to college, Ed? (A question most interviewers ask without expecting surprises in the response.) Never went to college. Dropped out of high school and never looked back. Got my college degree at the Elkman agency and my graduate degree at Earle Palmer Brown.\n                  <br />\n                  Whered you go to college, Ed? (A question most interviewers ask without expecting surprises in the response.) Never went to\n                  college. Dropped out of high school and never looked back. Got\n                  <br />\n                  Whered you go to college, Ed? (A question most interviewers ask without expecting surprises in the response.) Never went to\n                  college. Dropped out of high school and never looked back. Got\n                  <br />\n                  Whered you go to college, Ed? (A question most interviewers ask without expecting surprises in the response.) Never went to\n                  college. Dropped out of high school and never looked back. Got\n                </p>\n              </app-ui-text-type>\n          </ng-container>\n          \x3c!-- end modal-content-detail --\x3e\n          <ng-container textType="modal-btm-detail">\n            \x3c!-- btn --\x3e\n            <app-ui-btn-layout>\n              <app-ui-btn [isDisable]="isPopupConfirmDisable" [btnColor]="\'main2\'" [btnStyle]="\'full\'" [btnHeight]="\'sm\'" [btnWd]="\'md\'" (ClickBtn)="confirmPopup()">\n                <ng-container TextType="cust">{{language.confirm |translate }}</ng-container>\n              </app-ui-btn>\n            </app-ui-btn-layout>\n            \x3c!-- end of btn --\x3e\n          </ng-container>\n          \x3c!-- end modal-btm-detail --\x3e\n      </app-ui-modal-style-img-base>\n      \x3c!-- end of customer confirm alert --\x3e\n\n      \x3c!-- remind update --\x3e\n      <app-ui-modal-style-img-base [isContnetFull]="true"  [isPopupOpen]="isDisplayUpdateRemind">\n        <ng-container textType="modal-img-detail">\n          <img src="assets/img/icon-cust-remind.svg">\n        </ng-container>\n        <ng-container textType="modal-title-detail">{{language.deleteProtectionTitle |translate }}</ng-container>\n        <ng-container textType="modal-content-detail">\n          \x3c!-- list --\x3e\n          <app-ui-list-data2>\n            \x3c!-- data --\x3e\n            <ng-container textType="data">\n              <app-ui-form-checkbox3 [isDisable]="true" [nxValue]="false" *ngFor="let alertItem of alertOverTimeList;">\n                <ng-container checkboxText="style3">{{alertItem.name}}</ng-container>\n              </app-ui-form-checkbox3>\n            </ng-container>\n            \x3c!-- end of data --\x3e\n          </app-ui-list-data2>\n          \x3c!-- end of list --\x3e\n        </ng-container>\n        \x3c!-- end modal-content-detail --\x3e\n        <ng-container textType="modal-btm-detail">\n          <div class="btm-set-block">\n            <span class="ps-text">\n              {{alertOverTimeList.length}} {{language.people |translate }}\n            </span>\n            \x3c!-- btn --\x3e\n            <app-ui-btn-layout>\n              <app-ui-btn [btnColor]="\'main2\'" [btnStyle]="\'full\'" [btnHeight]="\'sm\'" [btnWd]="\'md\'"(ClickBtn)="isDisplayUpdateRemind = !isDisplayUpdateRemind">\n                <ng-container TextType="cust">{{language.confirm |translate }}</ng-container>\n              </app-ui-btn>\n            </app-ui-btn-layout>\n            \x3c!-- end of btn --\x3e\n          </div>\n\n        </ng-container>\n        \x3c!-- end modal-btm-detail --\x3e\n      </app-ui-modal-style-img-base>\n      \x3c!-- end of remind update --\x3e\n\n      \x3c!-- remind delete --\x3e\n      <app-ui-modal-style-img-base [isContnetFull]="true"  [isPopupOpen]="isDisplayDeleteRemind">\n        <ng-container textType="modal-img-detail">\n          <img src="assets/img/icon-cust-remind.svg">\n        </ng-container>\n        <ng-container textType="modal-title-detail">{{language.deleteProtectionTitle |translate }}</ng-container>\n        <ng-container textType="modal-content-detail">\n          \x3c!-- list --\x3e\n          <app-ui-list-data2>\n            \x3c!-- data --\x3e\n            <ng-container textType="data">\n                <app-ui-form-checkbox3 [isDisable]="true" [nxValue]="false" *ngFor="let alertItem of alertAutoDeleteCustomer;">\n                    <ng-container checkboxText="style3">{{alertItem.name}}</ng-container>\n                  </app-ui-form-checkbox3>\n\n            </ng-container>\n            \x3c!-- end of data --\x3e\n          </app-ui-list-data2>\n          \x3c!-- end of list --\x3e\n        </ng-container>\n        \x3c!-- end modal-content-detail --\x3e\n        <ng-container textType="modal-btm-detail">\n          <div class="btm-set-block">\n            <span class="ps-text">\n              {{alertAutoDeleteCustomer.length}}  {{language.people |translate }}\n            </span>\n            \x3c!-- btn --\x3e\n            <app-ui-btn-layout>\n              <app-ui-btn [btnColor]="\'main2\'" [btnStyle]="\'full\'" [btnHeight]="\'sm\'" [btnWd]="\'md\'" (ClickBtn)="isDisplayDeleteRemind = !isDisplayDeleteRemind">\n                <ng-container TextType="cust">{{language.confirm |translate }}</ng-container>\n              </app-ui-btn>\n            </app-ui-btn-layout>\n            \x3c!-- end of btn --\x3e\n          </div>\n\n        </ng-container>\n        \x3c!-- end modal-btm-detail --\x3e\n      </app-ui-modal-style-img-base>\n    \x3c!-- end of remind delete --\x3e\n  </div>\n    \x3c!-- end of Popup --\x3e\n\n</app-ui-main-side-menu>\n',animations:[t.trigger("searchBlockAni",[t.state("*",t.style({width:"0",opacity:0})),t.state("open",t.style({width:"100%",opacity:1})),t.state("closed",t.style({width:"0",opacity:0})),t.transition("open => closed",t.animate("300ms ease-in")),t.transition("closed => open",t.animate("300ms ease-in"))])],styles:[".filter-block{display:flex;padding:0 20px;list-style-type:none;align-content:center;flex-wrap:wrap}.filter-block ::ng-deep .nx-formfield__wrapper{padding-bottom:0}.filter-block .filter-item{display:flex;align-items:center;max-width:40px;width:100%;margin-right:20px}.filter-block .filter-item:last-of-type{margin-right:0}.filter-block .filter-item>a,.filter-block .filter-item>button{display:inline-block;position:relative;width:100%;max-width:40px}.filter-block .filter-item a,.filter-block .filter-item button{background-color:transparent;border:none;padding:0}.filter-block .filter-item a:focus,.filter-block .filter-item button:focus{outline:0}.filter-block .filter-item a img,.filter-block .filter-item button img{width:40px;height:40px}.filter-block .filter-item .num-block{display:flex;width:20px;height:20px;background-color:#007ab3;border-radius:50%;justify-content:center;align-items:center;position:absolute;right:-5px;top:-5px}.filter-block .filter-item .num-block .num{color:#fff;font-weight:700;font-size:.75rem}@keyframes fadein{from{opacity:0}to{opacity:1}}@-webkit-keyframes fadein{from{opacity:0}to{opacity:1}}.filter-block .search-animate-block{align-items:center;background-color:#fff}.filter-block .search-animate-block .search-input-block{display:inline-block;width:0;position:relative}.filter-block .search-animate-block ::ng-deep .nx-formfield__input{border-top:none;width:100%}.filter-block .search-animate-block ::ng-deep .btn-search-cancel{position:absolute;right:0;display:inline-block;width:44px;height:44px;top:-7px;text-align:right;opacity:0}.filter-block .search-animate-block ::ng-deep .btn-search-cancel nx-icon{font-size:16px;color:#c2c2c2;margin-right:10px}.filter-block .search-animate-block.active{max-width:calc(100vw - 30px);margin-left:0!important}.filter-block .search-animate-block.active .search-input-block{display:inline-block;width:100%}.filter-block .search-animate-block.active ::ng-deep .btn-search-cancel{display:inline-block;opacity:1}@media (min-width:769px){.filter-block .search-animate-block ::ng-deep .btn-search-cancel nx-icon{margin-right:5px}.filter-block .search-animate-block.active{max-width:210px}}.filter-all-block{position:relative;overflow:hidden;display:inline-block;width:100%;min-height:56px;margin-bottom:10px}.filter-block{transition:.2s;position:absolute;height:100%;left:0;width:1400px}.filter-block>.filter-item{transition:.2s}.filter-block.ani-bar-move{left:-187px}.filter-block.ani-bar-move .filter-item{opacity:0}.filter-block.ani-bar-move .filter-item.search-animate-block{opacity:1}@media (min-width:1024px){.filter-block .filter-item{margin-right:5px}.filter-block .filter-item:last-of-type{margin-right:0}.filter-block .filter-item button{max-width:30px}.filter-block .filter-item button img{width:30px;height:30px}.filter-block{width:500px}.filter-block.ani-bar-move{left:-137px}}@media screen and (min-width:1025px){.filter-block .filter-item{max-width:4vw}.filter-block .filter-item button{max-width:3vw}.filter-block .filter-item button img{width:3vw;height:3vw}.filter-block{width:50vw}.filter-block+.filter-block{margin-right:.5vw}.filter-block:last-of-type{margin-right:0}.filter-block.ani-bar-move{left:-13.7vw}.filter-block .search-animate-block.active{max-width:21vw}}::ng-deep .modal-container-block .textarea-block textarea{min-height:180px;margin-bottom:0}::ng-deep .top-search-block{padding-top:21px;padding-left:20px;padding-right:20px}::ng-deep app-customer-list,::ng-deep app-ui-infinite-scroll{display:inline-block;width:100%;height:100%}::ng-deep .ui-list-data{display:inline-block;width:100%}.side-menu-content{color:#414141;max-height:100%;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;overflow:hidden;width:100%;max-width:100%}.side-menu-content .title-main-block{padding-left:15px;padding-right:20px}.main-content{background-color:#f5f5f5;box-sizing:border-box;padding-left:40px;padding-top:0;overflow-y:auto;height:100vh;position:static}.main-content ::ng-deep .scroll-content{background-color:#f5f5f5;overflow-x:hidden}@media (max-width:768px){.main-content{position:relative;padding-top:44px}}@media (max-width:767px){.main-content{padding-left:5px;padding-right:5px}@supports (top:constant(safe-area-inset-top)){.main-content ::ng-deep .infiniti-scroll{max-height:calc(100vh - 44px - constant(safe-area-inset-top) - constant(safe-area-inset-bottom))}}@supports (top:env(safe-area-inset-top)){.main-content ::ng-deep .infiniti-scroll{max-height:calc(100vh - 44px - env(safe-area-inset-top) - env(safe-area-inset-bottom))}}}"]}]}],e.ctorParameters=function(){return[{type:I},{type:o.CalendarService},{type:A.TranslateService},{type:x.ChangeDetectorRef},{type:A.DeviceService},{type:A.DateUtils},{type:A.ProfileCodeService},{type:A.ExtensionService},{type:j},{type:undefined,decorators:[{type:x.Optional},{type:x.Inject,args:[O]}]},{type:undefined,decorators:[{type:x.Optional},{type:x.Inject,args:[M]}]},{type:undefined,decorators:[{type:x.Optional},{type:x.Inject,args:[L]}]}]},e.propDecorators={calendarEditComponent:[{type:x.ViewChild,args:[o.CalendarEditComponent]}],detailPreTemplate:[{type:x.Input}],detailPostTemplate:[{type:x.Input}],detailModel:[{type:x.Output}]},e}(),U=function(){function e(){this._detailSaveSuccess=!1}return Object.defineProperty(e.prototype,"detailSaveSuccess",{get:function(){return this._detailSaveSuccess},set:function(e){this._detailSaveSuccess=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editDetail",{get:function(){return this._editDetail},set:function(e){this._editDetail=e},enumerable:!0,configurable:!0}),e}(),q=function(){function e(e,t,n,i,o,a){this.customerService=e,this.profileCodeService=t,this.customerUtils=n,this.changeDetector=i,this.customCustomerAction=o,this.customerStore=a,this.sendContentHeight=new x.EventEmitter,this.editModel=new x.EventEmitter,this.validationResult=new A.ValidationResult,this.customerDetail=new C,this.pageTitle="Edit Profile",this.optionTel=new Array,this.optionAddress=new Array,this.optionEmail=new Array,this.optionAge=new Array,this.optionGender=new Array,this.optionIncome=new Array,this.optionSource=new Array,this.optionMarriage=new Array,this.optionChildren=new Array,this.optionFamiliarity=new Array,this.optionRecentStatus=new Array,this.optionManpa=new Array,this.optionContactFrequancyPerYear=new Array,this.language=new A.Language,this.disableAge=!1,this.isDisplaySavePopup=!1,this.btnSaveDisable=!1,this.isShow=!1,this._telLimit=6,this._emailLimit=3,this._addressLimit=3,this.edit_type="add";var r=this.profileCodeService.getCodeArray("Customer_TelType"),s=this.profileCodeService.getCodeArray("Customer_EmailType"),l=this.profileCodeService.getCodeArray("Customer_AddressType"),c=this.profileCodeService.getCodeArray("Customer_Age"),p=this.profileCodeService.getCodeArray("Customer_Gender"),u=this.profileCodeService.getCodeArray("Customer_Income"),d=this.profileCodeService.getCodeArray("Customer_Source"),m=this.profileCodeService.getCodeArray("Customer_Marriage"),g=this.profileCodeService.getCodeArray("Customer_Children"),f=this.profileCodeService.getCodeArray("Customer_Familiarity"),h=this.profileCodeService.getCodeArray("Customer_RecentStatus"),y=this.profileCodeService.getCodeArray("Customer_Status"),b=this.profileCodeService.getCodeArray("Customer_ContactFrequancy");this.optionTel=this.customerUtils.setCode2Option(r),this.optionEmail=this.customerUtils.setCode2Option(s),this.optionAddress=this.customerUtils.setCode2Option(l),this.optionAge=this.customerUtils.setCode2Option(c),this.optionGender=this.customerUtils.setCode2Option(p),this.optionIncome=this.customerUtils.setCode2Option(u),this.optionSource=this.customerUtils.setCode2Option(d),this.optionMarriage=this.customerUtils.setCode2Option(m),this.optionChildren=this.customerUtils.setCode2Option(g),this.optionFamiliarity=this.customerUtils.setCode2Option(f),this.optionRecentStatus=this.customerUtils.setCode2Option(h),this.optionManpa=this.customerUtils.setCode2Option(y),this.optionContactFrequancyPerYear=this.customerUtils.setCode2Option(b)}return e.prototype.ngOnInit=function(){var t=this;this.customerStore&&this.customerStore.getCurrentCustomerDetail().subscribe(function(e){t.customerDetail=e,A.StringUtils.isEmpty(t.customerDetail.clientID)?(console.log("add :",t.customerDetail),t.pageTitle="",t.disableAge=!1,t.customerDetail=new C,t.customerDetail.ageRange="",t.edit_type="add"):(console.log("edit :",t.customerDetail),t.pageTitle=t.customerDetail.lastName+t.customerDetail.firstName,A.StringUtils.isNotEmpty(t.customerDetail.birthday)?t.disableAge=!0:(t.customerDetail.ageRange="",t.disableAge=!1),t.edit_type="edit"),t.editModel.emit(t.customerDetail),t.changeDetector.detectChanges(),t.isShow=!0})},e.prototype.validationForm=function(){var e=this;console.log(this.customerDetail),this.validationResult=this.customerService.validProfile(this.customerDetail),null!=this.validationResult&&setTimeout(function(){e.scrollToError()},200)},e.prototype.saveProfile=function(e){var i=this;if(this.validationForm(),console.log(this.validationResult.isTrue()),this.validationResult.isTrue()){this.btnSaveDisable=!0;var t=[],n=[],o=[];this.customerDetail.tels.forEach(function(e){e.isEmpty()||t.push(e)}),this.customerDetail.emails.forEach(function(e){e.isEmpty()||n.push(e)}),this.customerDetail.addresses.forEach(function(e){e.isEmpty()||o.push(e)}),this.customerDetail.tels=t,this.customerDetail.emails=n,this.customerDetail.addresses=o,console.log("customer-edit-save: ",this.customerDetail),this.customerService.saveCustomerDetail(this.customerDetail).subscribe(function(e){console.debug("saveDetail",e);var t=new U;if(t.detailSaveSuccess=e.status,t.editDetail=i.customerDetail,i.customerService.profileResult=t,i.customerStore){i.customerStore.setCurrentCustomerDetail(i.customerDetail);var n="add"==i.edit_type?B.ADD_SAVED:B.EDIT_SAVED;i.customerStore.setState(n)}i.customCustomerAction&&i.customCustomerAction.afterCustomerEditSave(i.customerDetail),i.btnSaveDisable=!1})}},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.contentHeight=e.content.nativeElement.offsetHeight,console.log("ele Height:",e.contentHeight)},600),this.sendContentHeight.emit(this.contentHeight)},e.prototype.countAgeRange=function(e){if(console.debug("birthday",e),this.customerDetail.birthday=e,A.StringUtils.isEmpty(e))this.customerDetail.ageRange="",this.disableAge=!1;else{var t=this.customerUtils.countAge(e),n=this.customerUtils.countAgeRange(t);console.debug("ageRange",n),n!=undefined&&(this.customerDetail.ageRange=n,this.changeDetector.detectChanges(),this.disableAge=!0)}this.changeDetector.detectChanges()},e.prototype.getTelLimit=function(){return this._telLimit},e.prototype.getEmailLimit=function(){return this._emailLimit},e.prototype.getAddressLimit=function(){return this._addressLimit},e.prototype.onAddTelGroup=function(){console.debug("onAddTelGroup"),this.customerDetail.tels.push(new T("","TelHome","","APP"))},e.prototype.onAddMailGroup=function(){console.debug("onAddMailGroup"),this.customerDetail.addEmail(new w("","MailHome","","APP"))},e.prototype.onAddAddressGroup=function(){console.debug("onAddAddressGroup"),this.customerDetail.addAddress(new D("","AddressTypeHome","","","","","","APP"))},e.prototype.onRemoveTelGroup=function(e){console.debug("onRemoveTelGroup",e),this.customerDetail.tels.splice(e,1)},e.prototype.onRemoveEmailGroup=function(e){console.debug("onRemoveEmailGroup",e),this.customerDetail.emails.splice(e,1)},e.prototype.onRemoveAddressGroup=function(e){console.debug("onRemoveAddressGroup",e),this.customerDetail.addresses.splice(e,1)},e.prototype.scrollToError=function(){var e=document.body.getElementsByClassName("error-msg");e.item(0)&&e.item(0).parentElement.parentElement.scrollIntoView({behavior:"smooth",block:"start"})},e.decorators=[{type:x.Component,args:[{selector:"app-customer-edit",template:'<app-ui-inner-page *ngIf="isShow" [title]="[pageTitle | translate ]" [contentHeight]="this.contentHeight" >\n  <div main>\n    <div #inpageMain class="layout-block">\n      <div class="layout-style-single">\n        <div class="form-all page-cust-info" action="">\n          <div class="profile-img-block img-block" [ngClass]="customerDetail.dataSource == \'OPUS\' ? \'\': \' active\'">\n              <img class="normal-img" src="assets/img/img-customer-profile.svg">\n              <img class="active-img" src="assets/img/img-cust-profile-active.svg">\n          </div>\n          \x3c!-- {{customerProfile.lastName}} --\x3e\n          <div *ngTemplateOutlet="editPreTemplate"></div>\n          <app-ui-form-layout-advanced>\n            \x3c!-- row1 --\x3e\n            <app-ui-data-group *ngIf="customerDetail.dataSource != \'OPUS\'">\n              <ng-container textType="dataContent">\n                <app-ui-form-layout-row>\n                    <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n                      <app-ui-form-input [inputTitle]="[language.lastName | translate]" [name]="\'lastName\'" [(nxValue)]="customerDetail.lastName" [placeholder]="[language.lastNamePlaceholder | translate]" [isDisable]="false" [isError]="validationResult.isError(\'lastName\')"></app-ui-form-input>\n                      <app-ui-form-error-msg *ngIf="validationResult.getErrorMsg(\'lastName\') == \'required\'">{{language.wrongLastName |translate }}</app-ui-form-error-msg>\n                    </app-ui-form-layout-col>\n                    <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n                      <app-ui-form-input [inputTitle]="[language.firstName | translate]" [name]="\'firstName\'" [(nxValue)]="customerDetail.firstName" [placeholder]="[language.firstNamePlaceholder | translate]" [isDisable]="false"  [isError]="validationResult.isError(\'firstName\')" (nxValueChange)="validationForm()"></app-ui-form-input>\n                      <app-ui-form-error-msg></app-ui-form-error-msg>\n                    </app-ui-form-layout-col>\n                </app-ui-form-layout-row>\n              </ng-container>\n            </app-ui-data-group>\n            \x3c!-- end of row1 --\x3e\n            \x3c!-- row2 --\x3e\n            <app-ui-data-group [groupName]="\'tel\'" [isShowPreData]="true" [imgType]="true" [imgIconSrc]="\'assets/img/icon-form-phone.svg\'">\n              <ng-container textType="dataContent">\n                <ng-container *ngIf="customerDetail.tels.length != 0 ; else noTelContent">\n                    <app-ui-form-layout-row *ngFor="let tel of customerDetail.tels; index as i ; last as isLast">\n                        <ng-container *ngIf="tel.dataSource != \'OPUS\'">\n                            <app-ui-form-layout-col [colPC]="3" [colNB]="3" [colPad]="3" [colMobile]="4">\n                              <app-ui-form-select [isShowTitle]="false" [selectTitle]="[language.phone | translate]" [(nxValue)]="tel.telType" [selectOption]=\'optionTel\'></app-ui-form-select>\n                              <app-ui-form-error-msg></app-ui-form-error-msg>\n                            </app-ui-form-layout-col>\n                            <app-ui-form-layout-col [colPC]="9" [colNB]="9" [colPad]="9" [colMobile]="8" [hasRemove]="true" (remove)="onRemoveTelGroup(i)">\n                              <app-ui-form-input [type]="\'tel\'" [maxLength]="50" [inputTitle]="[language.phone | translate]" [(nxValue)]="tel.tel"  [isDisable]="false"></app-ui-form-input>\n                              <app-ui-form-error-msg></app-ui-form-error-msg>\n                            </app-ui-form-layout-col>                            \n                        </ng-container>\n                        <ng-container *ngIf="isLast">\n                            <app-ui-form-layout-col [colPC]="12" [colNB]="12" [colPad]="12" [colMobile]="8" [translateText]="language.add | translate" [hasAdd]="customerDetail.notOPUSTelNumber() != getTelLimit()" (add)="onAddTelGroup()"></app-ui-form-layout-col>\n                        </ng-container>\n                      </app-ui-form-layout-row>\n                </ng-container>\n                \n                <ng-template #noTelContent>\n                    <app-ui-form-layout-row >\n                        <app-ui-form-layout-col [colPC]="12" [colNB]="12" [colPad]="12" [colMobile]="8" [translateText]="language.add | translate" [hasAdd]="customerDetail.notOPUSTelNumber() != getTelLimit()" (add)="onAddTelGroup()"></app-ui-form-layout-col>\n                      </app-ui-form-layout-row>\n                </ng-template>\n              </ng-container>\n            </app-ui-data-group>\n            \x3c!-- end of row2 --\x3e\n            \x3c!-- row3 --\x3e\n\n            <app-ui-data-group [groupName]="\'email\'" [isShowPreData]="true" [imgType]="true" [imgIconSrc]="\'assets/img/icon-form-mail.svg\'">\n              <ng-container textType="dataContent">\n                \n                <ng-container *ngIf="customerDetail.emails.length != 0 ; else noMailContent">\n                    <app-ui-form-layout-row *ngFor="let email of customerDetail.emails; index as i; last as isLast">\n                        <app-ui-form-layout-col [colPC]="3" [colNB]="3" [colPad]="3" [colMobile]="4">\n                            <app-ui-form-select [isShowTitle]="false" [selectTitle]="[language.email | translate]" [(nxValue)]="email.emailType" [selectOption]=\'optionEmail\'></app-ui-form-select>\n                            <app-ui-form-error-msg></app-ui-form-error-msg>\n                          </app-ui-form-layout-col>\n                          <app-ui-form-layout-col [colPC]="9" [colNB]="9" [colPad]="9" [colMobile]="8" [hasRemove]="true" (remove)="onRemoveEmailGroup(i)">\n                            <app-ui-form-input [inputTitle]="[language.email | translate]"  [(nxValue)]="email.email"  [isDisable]="false"></app-ui-form-input>\n                            <app-ui-form-error-msg *ngIf="validationResult.getErrorMsg(\'email\') == \'format\'">{{language.wrongEmail |translate }}</app-ui-form-error-msg>\n                          </app-ui-form-layout-col>\n                          <ng-container *ngIf="isLast">\n                              <app-ui-form-layout-col [colPC]="12" [colNB]="12" [colPad]="12" [colMobile]="8" [translateText]="language.add | translate" [hasAdd]="customerDetail.emails.length != getEmailLimit()" (add)="onAddMailGroup()"></app-ui-form-layout-col>\n                          </ng-container>\n                    </app-ui-form-layout-row>\n                </ng-container>\n                \n                <ng-template #noMailContent>\n                    <app-ui-form-layout-row>\n                        <app-ui-form-layout-col [colPC]="12" [colNB]="12" [colPad]="12" [colMobile]="8" [translateText]="language.add | translate" [hasAdd]="customerDetail.emails.length != getEmailLimit()" (add)="onAddMailGroup()"></app-ui-form-layout-col>\n                    </app-ui-form-layout-row>\n                </ng-template>\n\n              </ng-container>\n            </app-ui-data-group>\n\n            \x3c!-- end of row3 --\x3e\n            \x3c!-- row4 --\x3e\n            <app-ui-data-group [groupName]="\'addr\'" [isShowPreData]="true" [imgType]="true" [imgIconSrc]="\'assets/img/icon-form-addr.svg\'">\n              <ng-container textType="dataContent" >\n\n                <ng-container *ngIf="customerDetail.addresses.length != 0 ; else noAddressContent">\n                    <app-ui-form-layout-row *ngFor="let address of customerDetail.addresses; index as i; last as isLast">\n\n                        <app-ui-form-layout-col [colPC]="3" [colNB]="3" [colPad]="3" [colMobile]="4">\n                          <app-ui-form-select [isShowTitle]="false" [selectTitle]="[language.address | translate]" [(nxValue)]="address.addressType" [selectOption]=\'optionAddress\'  ></app-ui-form-select>\n                          <app-ui-form-error-msg></app-ui-form-error-msg>\n                        </app-ui-form-layout-col>\n                        <div class="break-line"></div>\n                        <app-ui-form-layout-col [colPC]="4" [colNB]="4" [colPad]="4" [colMobile]="6">\n                          <app-ui-form-input [inputTitle]="[language.country | translate]" [(nxValue)]="address.country" [isDisable]="false"></app-ui-form-input>\n                          <app-ui-form-error-msg></app-ui-form-error-msg>\n                        </app-ui-form-layout-col>\n                        <app-ui-form-layout-col [colPC]="4" [colNB]="4" [colPad]="4" [colMobile]="6">\n                            <app-ui-form-input [inputTitle]="[language.city | translate]" [(nxValue)]="address.city" [isDisable]="false"></app-ui-form-input>\n                          <app-ui-form-error-msg></app-ui-form-error-msg>\n                        </app-ui-form-layout-col>\n                        <app-ui-form-layout-col [colPC]="4" [colNB]="4" [colPad]="4" [colMobile]="6">\n                            <app-ui-form-input [inputTitle]="[language.area | translate]" [(nxValue)]="address.area" [isDisable]="false"></app-ui-form-input>\n                          <app-ui-form-error-msg></app-ui-form-error-msg>\n                        </app-ui-form-layout-col>\n                        <app-ui-form-layout-col [colPC]="3" [colNB]="3" [colPad]="3" [colMobile]="6">\n                            <app-ui-form-input [inputTitle]="[language.code | translate]" [(nxValue)]="address.zipcode" [isDisable]="false"></app-ui-form-input>\n                          <app-ui-form-error-msg></app-ui-form-error-msg>\n                        </app-ui-form-layout-col>\n                        <app-ui-form-layout-col [colPC]="9" [colNB]="9" [colPad]="9" [colMobile]="12" [hasRemove]="true" (remove)="onRemoveAddressGroup(i)">\n                          <app-ui-form-input [inputTitle]="[language.address | translate]" [(nxValue)]="address.address" [isDisable]="false"></app-ui-form-input>\n                          <app-ui-form-error-msg></app-ui-form-error-msg>\n                        </app-ui-form-layout-col>\n\n                        <ng-container *ngIf="isLast">\n                            <app-ui-form-layout-col [colPC]="12" [colNB]="12" [colPad]="12" [colMobile]="8" [translateText]="language.add | translate" [hasAdd]="customerDetail.addresses.length != getAddressLimit()" (add)="onAddAddressGroup()"></app-ui-form-layout-col>\n                        </ng-container>\n                        \n      \n                      </app-ui-form-layout-row>\n                </ng-container>\n\n                <ng-template #noAddressContent>\n                    <app-ui-form-layout-row>\n                        <app-ui-form-layout-col [colPC]="12" [colNB]="12" [colPad]="12" [colMobile]="8" [translateText]="language.add | translate" [hasAdd]="customerDetail.addresses.length != getAddressLimit()" (add)="onAddAddressGroup()"></app-ui-form-layout-col>\n                    </app-ui-form-layout-row>\n                </ng-template>\n\n              </ng-container>\n            </app-ui-data-group>\n            \x3c!-- end of row4 --\x3e\n\n            \x3c!-- row5 --\x3e\n            \x3c!-- TODO --\x3e\n          <app-ui-data-group *ngIf="customerDetail.dataSource != \'OPUS\'">\n            <ng-container textType="dataContent">\n              <app-ui-form-layout-row>\n                <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                  <app-ui-form-date [title]="[language.birthday | translate ]" [nxValue]="customerDetail.birthday" (nxValueChange)="countAgeRange($event)"></app-ui-form-date>\n                  <app-ui-form-error-msg *ngIf="validationResult.getErrorMsg(\'birthday\') == \'date\'">{{language.wrongBirthday |translate }}</app-ui-form-error-msg>\n                </app-ui-form-layout-col>\n                <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                  <app-ui-form-select [selectTitle]="[language.age | translate ]" [(nxValue)]="customerDetail.ageRange" [selectOption]=\'optionAge\' [isDisable]="disableAge" ></app-ui-form-select>\n                  <app-ui-form-error-msg></app-ui-form-error-msg>\n                </app-ui-form-layout-col>\n              </app-ui-form-layout-row>\n            </ng-container>\n          </app-ui-data-group>\n            \x3c!-- end of row5 --\x3e\n\n\n          <ng-container *ngIf="customerDetail.dataSource != \'OPUS\' ; else OPUSContent">\n            \x3c!-- row6 --\x3e\n          <app-ui-data-group >\n            <ng-container textType="dataContent">\n              <app-ui-form-layout-row>\n                  <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                    <app-ui-form-select [selectTitle]="[language.gender | translate ]" [(nxValue)]="customerDetail.gender" [selectOption]=\'optionGender\' ></app-ui-form-select>\n                    <app-ui-form-error-msg></app-ui-form-error-msg>\n                  </app-ui-form-layout-col>\n                  <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                    <app-ui-form-input [inputTitle]="[language.occupation | translate ]" [(nxValue)]="customerDetail.occupation" [isDisable]="false"></app-ui-form-input>\n                    <app-ui-form-error-msg></app-ui-form-error-msg>\n                  </app-ui-form-layout-col>\n              </app-ui-form-layout-row>\n            </ng-container>\n          </app-ui-data-group>\n            \x3c!-- end of row6 --\x3e\n\n            \x3c!-- row7 --\x3e\n            <app-ui-data-group >\n            <ng-container textType="dataContent">\n              <app-ui-form-layout-row>\n                  <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                    <app-ui-form-input [inputTitle]="[language.company | translate ]" [(nxValue)]="customerDetail.company"  [isDisable]="false"></app-ui-form-input>\n                    <app-ui-form-error-msg></app-ui-form-error-msg>\n                  </app-ui-form-layout-col>\n                  <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                      <app-ui-form-select [selectTitle]="[language.annualIncome | translate ]" [(nxValue)]="customerDetail.income" [selectOption]=\'optionIncome\' [placeholder]="[language.select | translate]" ></app-ui-form-select>\n                    <app-ui-form-error-msg></app-ui-form-error-msg>\n                  </app-ui-form-layout-col>\n              </app-ui-form-layout-row>\n            </ng-container>\n            </app-ui-data-group>\n            \x3c!-- end of row7 --\x3e\n\n            \x3c!-- row8 --\x3e\n            <app-ui-data-group >\n            <ng-container textType="dataContent">\n              <app-ui-form-layout-row>\n                  <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                    <app-ui-form-select [selectTitle]="[language.source | translate ]" [selectOption]=\'optionSource\' [(nxValue)]="customerDetail.source" [placeholder]="[language.select | translate]" ></app-ui-form-select>\n                    <app-ui-form-error-msg></app-ui-form-error-msg>\n                  </app-ui-form-layout-col>\n                  <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                      <app-ui-form-select [selectTitle]="[language.marriage | translate ]" [selectOption]=\'optionMarriage\' [(nxValue)]="customerDetail.marriage" [placeholder]="[language.select | translate]" ></app-ui-form-select>\n                    <app-ui-form-error-msg></app-ui-form-error-msg>\n                  </app-ui-form-layout-col>\n              </app-ui-form-layout-row>\n            </ng-container>\n            </app-ui-data-group>\n            \x3c!-- end of row8 --\x3e\n\n            \x3c!-- row9 --\x3e\n            <app-ui-data-group >\n            <ng-container textType="dataContent">\n              <app-ui-form-layout-row>\n                  <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                    <app-ui-form-select [selectTitle]="[language.children | translate ]" [selectOption]=\'optionChildren\' [(nxValue)]="customerDetail.children" [placeholder]="[language.select | translate]" ></app-ui-form-select>\n                    <app-ui-form-error-msg></app-ui-form-error-msg>\n                  </app-ui-form-layout-col>\n                  <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                      <app-ui-form-select [selectTitle]="[language.familiarity | translate ]" [selectOption]=\'optionFamiliarity\' [(nxValue)]="customerDetail.familiarity" [placeholder]="[language.select | translate]" ></app-ui-form-select>\n                    <app-ui-form-error-msg></app-ui-form-error-msg>\n                  </app-ui-form-layout-col>\n              </app-ui-form-layout-row>\n            </ng-container>\n            </app-ui-data-group>\n            \x3c!-- end of row9 --\x3e\n          </ng-container>\n          \n          <ng-template #OPUSContent>\n             \x3c!-- row6 --\x3e\n          <app-ui-data-group >\n            <ng-container textType="dataContent">\n              <app-ui-form-layout-row>\n                  \n                  <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                    <app-ui-form-input [inputTitle]="[language.occupation | translate ]" [(nxValue)]="customerDetail.occupation"  [isDisable]="false"></app-ui-form-input>\n                    <app-ui-form-error-msg></app-ui-form-error-msg>\n                  </app-ui-form-layout-col>\n\n                  <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                    <app-ui-form-input [inputTitle]="[language.company | translate ]" [(nxValue)]="customerDetail.company" [isDisable]="false"></app-ui-form-input>\n                    <app-ui-form-error-msg></app-ui-form-error-msg>\n                  </app-ui-form-layout-col>\n              </app-ui-form-layout-row>\n            </ng-container>\n          </app-ui-data-group>\n            \x3c!-- end of row6 --\x3e\n\n            \x3c!-- row7 --\x3e\n            <app-ui-data-group >\n            <ng-container textType="dataContent">\n              <app-ui-form-layout-row>\n                  \n                  <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                      <app-ui-form-select [selectTitle]="[language.annualIncome | translate ]" [(nxValue)]="customerDetail.income" [selectOption]=\'optionIncome\' [placeholder]="[language.select | translate]" ></app-ui-form-select>\n                    <app-ui-form-error-msg></app-ui-form-error-msg>\n                  </app-ui-form-layout-col>\n\n                  <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                    <app-ui-form-select [selectTitle]="[language.source | translate ]" [selectOption]=\'optionSource\' [(nxValue)]="customerDetail.source" [placeholder]="[language.select | translate]" ></app-ui-form-select>\n                    <app-ui-form-error-msg></app-ui-form-error-msg>\n                  </app-ui-form-layout-col>\n\n              </app-ui-form-layout-row>\n            </ng-container>\n            </app-ui-data-group>\n            \x3c!-- end of row7 --\x3e\n\n            \x3c!-- row8 --\x3e\n            <app-ui-data-group >\n            <ng-container textType="dataContent">\n              <app-ui-form-layout-row>\n                  \n                  <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                      <app-ui-form-select [selectTitle]="[language.marriage | translate ]" [selectOption]=\'optionMarriage\' [(nxValue)]="customerDetail.marriage" [placeholder]="[language.select | translate]" ></app-ui-form-select>\n                    <app-ui-form-error-msg></app-ui-form-error-msg>\n                  </app-ui-form-layout-col>\n\n                  <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                    <app-ui-form-select [selectTitle]="[language.children | translate ]" [selectOption]=\'optionChildren\' [(nxValue)]="customerDetail.children" [placeholder]="[language.select | translate]" ></app-ui-form-select>\n                    <app-ui-form-error-msg></app-ui-form-error-msg>\n                  </app-ui-form-layout-col>\n              </app-ui-form-layout-row>\n            </ng-container>\n            </app-ui-data-group>\n            \x3c!-- end of row8 --\x3e\n\n            \x3c!-- row9 --\x3e\n            <app-ui-data-group >\n            <ng-container textType="dataContent">\n              <app-ui-form-layout-row>\n                  \n                  <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                      <app-ui-form-select [selectTitle]="[language.familiarity | translate ]" [selectOption]=\'optionFamiliarity\' [(nxValue)]="customerDetail.familiarity" [placeholder]="[language.select | translate]" ></app-ui-form-select>\n                    <app-ui-form-error-msg></app-ui-form-error-msg>\n                  </app-ui-form-layout-col>\n              </app-ui-form-layout-row>\n            </ng-container>\n            </app-ui-data-group>\n            \x3c!-- end of row9 --\x3e\n        </ng-template>\n\n            \x3c!-- row10 --\x3e\n            <app-ui-data-group >\n              <ng-container textType="dataContent">\n                  <app-ui-form-layout-row>\n                      <app-ui-form-layout-col>\n                        <app-ui-form-select [selectTitle]="[language.recentStatus | translate ]" [(nxValue)]="customerDetail.recentStatus" [selectOption]=\'optionRecentStatus\' [placeholder]="[language.select | translate]" ></app-ui-form-select>\n                        <app-ui-form-error-msg></app-ui-form-error-msg>\n                      </app-ui-form-layout-col>\n\n                  </app-ui-form-layout-row>\n              </ng-container>\n            </app-ui-data-group>\n            \x3c!-- end of row10 --\x3e\n\n            \x3c!-- row10 --\x3e\n            <app-ui-data-group >\n                <ng-container textType="dataContent">\n                    <app-ui-form-layout-row>\n                        <app-ui-form-layout-col>\n                            <app-ui-form-select [selectTitle]="[language.customerStatus | translate ]" [(nxValue)]="customerDetail.manpa" [selectOption]=\'optionManpa\' [placeholder]="[language.select | translate]" ></app-ui-form-select>\n                          <app-ui-form-error-msg></app-ui-form-error-msg>\n                        </app-ui-form-layout-col>\n                    </app-ui-form-layout-row>\n                </ng-container>\n              </app-ui-data-group>\n              \x3c!-- end of row10 --\x3e\n\n            \x3c!-- row11 --\x3e\n            <app-ui-data-group >\n              <ng-container textType="dataContent">\n                <app-ui-form-layout-row>\n                  <app-ui-form-layout-col >\n                    <app-ui-form-select [selectTitle]="[language.contactFrequencyYear | translate ]"  [(nxValue)]="customerDetail.contactFrequancy" [selectOption]=\'optionContactFrequancyPerYear\' [placeholder]="[language.select | translate]" ></app-ui-form-select>\n                    <app-ui-form-error-msg></app-ui-form-error-msg>\n                  </app-ui-form-layout-col>\n                </app-ui-form-layout-row>\n              </ng-container>\n            </app-ui-data-group>\n            \x3c!-- end of row11 --\x3e\n            \x3c!-- row12 --\x3e\n            <app-ui-data-group class="posibility-data-group">\n              <ng-container textType="dataContent">\n                <app-ui-form-layout-row>\n                    <app-ui-form-layout-col >\n                      <app-ui-form-title-sm>{{language.possibility |translate }}</app-ui-form-title-sm>\n                      <div class="tag-block">\n                        <app-ui-form-radio-group [(nxValue)]="customerDetail.possibility">\n                          <app-ui-form-radio-tag [checked]="customerDetail.possibility == \'HOT\' ? true: false" class="HOT wd-max" [value]="\'HOT\'">{{"HOT" | translate}}</app-ui-form-radio-tag>\n                          <app-ui-form-radio-tag [checked]="customerDetail.possibility == \'WARM\' ? true: false" class="WARM wd-max" [value]="\'WARM\'">{{"WARM" | translate}}</app-ui-form-radio-tag>\n                          <app-ui-form-radio-tag [checked]="customerDetail.possibility == \'COLD\' ? true: false" class="COLD wd-max" [value]="\'COLD\'">{{"COLD" | translate}}</app-ui-form-radio-tag>\n                        </app-ui-form-radio-group>\n                      </div>\n                    </app-ui-form-layout-col >\n                </app-ui-form-layout-row>\n              </ng-container>\n            </app-ui-data-group>\n            \x3c!-- row 12 --\x3e\n          </app-ui-form-layout-advanced>\n          <div *ngTemplateOutlet="editPostTemplate"></div>\n        </div>\n      </div>\n\n      \x3c!-- btn --\x3e\n      <app-ui-btn-layout>\n        <app-ui-btn [name]="\'btn-save\'" (ClickBtn)="saveProfile($event)" [isDisable]="btnSaveDisable">\n          <ng-container TextType="cust">{{language.save |translate }}</ng-container>\n        </app-ui-btn>\n      </app-ui-btn-layout>\n      \x3c!-- end of btn --\x3e\n\n\n\n    </div>\n\n  </div>\n</app-ui-inner-page>\n',styles:["@keyframes fadein{from{opacity:0}to{opacity:1}}@-webkit-keyframes fadein{from{opacity:0}to{opacity:1}}.layout-block{padding-top:10px;box-shadow:0 2px 4px 0 rgba(0,0,0,.19);background-color:#fff}.profile-img-block{text-align:center;padding-bottom:10px;padding-top:20px}.profile-img-block img{text-align:center;margin:0 auto;width:60px}.profile-img-block.img-block .active-img,.profile-img-block.img-block.active .normal-img{display:none}.profile-img-block.img-block.active .active-img{display:block}@media screen and (min-width:1025px){.profile-img-block img{width:6vw}}.tag-block{display:flex}.break-line{display:block;width:100%}.page-cust-info ::ng-deep app-ui-form-radio-tag{width:30%}.page-cust-info ::ng-deep app-ui-form-radio-tag .tag-block .tag-content{font-weight:700}.page-cust-info ::ng-deep app-ui-form-radio-tag+app-ui-form-radio-tag{margin-left:5%}:host ::ng-deep app-ui-btn-layout{position:relative;bottom:-24px;margin-right:0}:host ::ng-deep app-ui-btn-layout .btn-block{margin:0}::ng-deep app-ui-form-layout-col:first-of-type .col-content.style-has-add{margin-top:8px!important}@media (max-width:767px){::ng-deep app-ui-form-layout-col:first-of-type .col-content.style-has-add{position:absolute;top:-18px;left:40px;max-width:150px}}::ng-deep .posibility-data-group{padding-bottom:0}::ng-deep .posibility-data-group ::ng-deep [class*=gas-col-]{margin-bottom:20px}::ng-deep .posibility-data-group .gas-row-block{margin-top:0}::ng-deep .btn-inner-page.style-out app-ui-btn-layout{position:relative;background-color:#f5f5f5;bottom:-20px;margin-top:40px}::ng-deep .btn-inner-page.style-out app-ui-btn-layout app-ui-btn{position:relative;top:-27px}"]}]}],e.ctorParameters=function(){return[{type:I},{type:A.ProfileCodeService},{type:j},{type:x.ChangeDetectorRef},{type:undefined,decorators:[{type:x.Optional},{type:x.Inject,args:[L]}]},{type:undefined,decorators:[{type:x.Optional},{type:x.Inject,args:[O]}]}]},e.propDecorators={sendContentHeight:[{type:x.Output}],content:[{type:x.ViewChild,args:["inpageMain"]}],editPreTemplate:[{type:x.Input}],editPostTemplate:[{type:x.Input}],editModel:[{type:x.Output}]},e}(),H=function(){function e(e,t,n){this.changeDetecor=e,this.elementRef=t,this.showCustomerRule=n,this.isDefaultData=!0,this.showSearchNoData=!1,this.loadingFinish=!0,this.customerClick=new x.EventEmitter,this.customerLoad=new x.EventEmitter,this.customerRefresh=new x.EventEmitter,this._customerList=[],this.language=new A.Language}return Object.defineProperty(e.prototype,"customerList",{get:function(){return this._customerList},set:function(e){var t=this;e.forEach(function(e){e.showName=t.convertNameToShow(e.firstName,e.lastName)}),this._customerList=e,this.loadingFinish=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterType",{get:function(){return this._filterType},set:function(e){this._filterType=e,0==this.customerList.length&&A.StringUtils.isNotEmpty(this.filterType)&&(this.isDefaultData="NONE"==this.filterType,this.showSearchNoData="SEARCH"==this.filterType)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.trackByClientID=function(e,t){return t.clientID},e.prototype.closeSlidingItems=function(){return g(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return console.debug("list closeSlidingItems"),null==(t=this.elementRef.nativeElement.querySelector("ion-item-sliding"))?[3,3]:(console.debug("item",t),[4,t.close()]);case 1:return e.sent(),[4,t.closeOpened()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},e.prototype.onClickCustomer=function(t){var e=this;this.onClickCustomerID=t,setTimeout(function(){e.closeSlidingItems()},300);var n=this.customerList.filter(function(e){return e.clientID==t});this.customerClick.emit(n[0])},e.prototype.loadCustomer=function(e){console.log("lazy load customer:",e),this.customerLoad.emit()},e.prototype.refreshCustomer=function(){var e=this;setTimeout(function(){e.customerRefresh.emit()},800)},e.prototype.convertNameToShow=function(e,t){return this.showCustomerRule?this.showCustomerRule.convertName(e,t):e+t},e.decorators=[{type:x.Component,args:[{selector:"app-customer-list",template:'<div class="ui-list-data">\n    \x3c!-- CustomerList has data--\x3e\n     <app-ui-infinite-scroll (loadingCallback)="loadCustomer($event)" (refreshCallback)="refreshCustomer()"\n        [(loadingFinish)]="loadingFinish" [lazyLoading]="true" [translateText]="language.loading | translate">\n        \n        <ul class="list-data-block stop-scroll-block">\n            <ng-container *ngIf="customerList && customerList.length != 0 ; else noCustomerData">\n    \n            <li *ngFor=" let customer of customerList;trackBy:trackByClientID; let i = index" (click)="onClickCustomer(customer.clientID)"  class="list-item-block" [ngClass]= "[(customer.clientID == onClickCustomerID ? \' active\':\'\'), (customer.isHighlight ? \' highlight\':\'\')]">\n                <div class="title-block">\n                    <div class="like-block">\n                        <app-ui-btn-like-add [isLike]="customer.isFollow"></app-ui-btn-like-add>\n                    </div>\n                    <div class="title-text">\n                        {{customer.showName}}\n                    </div>\n                    <app-ui-form-radio-tag class="tag-item" [checked]="true" [disabled]="true" [ngClass]="customer.tag">{{customer.tag | translate}}</app-ui-form-radio-tag>\n                </div>\n                <div class="profile-block">\n                    <div class="img-profile-block">\n                        <ng-container *ngIf="customer.isOtherSource; then otherSource else appSource"></ng-container>\n\n                        \x3c!-- datasource from Opus--\x3e\n                        <ng-template #otherSource>\n                            <img src="assets/img/icon-customer-profile-sm.svg">\n                        </ng-template>\n\n                        \x3c!-- datasource from APP--\x3e\n                        <ng-template #appSource>\n                            <img src="assets/img/icon-customer-profile-sm-active.svg">\n                            \n                        </ng-template>\n                    </div>\n                </div>\n                <div class="content-block">\n                  <app-ui-progress [value]="customer.complementPercent" [theme]="\'sub\'" [isShowValue]="true">{{language.customerInformation |translate }}</app-ui-progress>\n                </div>\n            </li>\n        </ng-container>\n        </ul>\n      </app-ui-infinite-scroll>\n   \n\n    <ng-template #noCustomerData>\n        \x3c!-- Customer no data without search--\x3e\n        <ng-container *ngIf="isDefaultData ; else customerSearchNoData">\n            <div class="skelton-layout stop-scroll-block">\n                <div class="theme-loading">\n                  <div class="text-desc">\n                      <span class="text">{{language.click |translate }}\n                        <span class="icon-img"><img src="assets/img/icon-add-grey.svg"></span>\n                        <span class="icon-img"><img src="assets/img/icon-import-grey.svg"></span>\n                        {{language.noEdit |translate }}</span>\n                  </div>\n\n                  <div class="loading-img">\n                    <div class="skelton-data-block">\n                        <div class="skelton-text wd-short align-right "></div>\n                        <div class="skelton-text wd-long "></div>\n                        <div class="skelton-row align-side">\n                            <div class="skelton-text wd-md "></div>\n                            <div class="skelton-text wd-short "></div>\n                        </div>\n                        <div class="skelton-text wd-long "></div>\n                    </div>\n                    <img src="assets/img/loading-customer-list.svg">\n                  </div>\n\n                </div>\n              </div>\n        </ng-container>\n\n        \x3c!-- Customer no data after searching--\x3e\n        <ng-template #customerSearchNoData>\n            <ng-container *ngIf="showSearchNoData ;  else customerFilterNoData">\n                    <div class="status-empty search-empty">\n                            <div class="empty-block">\n                                <div class="img-block">\n                                    <img src="assets/img/empty-img-search.svg">\n                                </div>\n                                <div class="text-block">\n                                  <p>{{language.noSearch |translate }}</p>\n                                </div>\n                            </div>\n                          </div>\n            </ng-container>\n                \n        </ng-template>\n\n        \x3c!-- Customer no data after filtering--\x3e\n        <ng-template #customerFilterNoData>\n                <div class="status-empty search-empty">\n                    <div class="empty-block">\n                        <div class="img-block">\n                            <img src="assets/img/icon-filter-no-data.svg">\n                        </div>\n                        <div class="text-block">\n                          <p>{{language.noFilter |translate }}</p>\n                        </div>\n                    </div>\n                  </div>\n        </ng-template>\n            \n    </ng-template>\n\n  </div>\n',styles:[".skelton-layout{margin:0}.skelton-row{display:flex}.skelton-row.align-side{justify-content:space-between}.align-right{margin:0 0 15px auto}.align-center{margin:15px auto}.skeleton-round{border-radius:50%;background-color:#ececec;max-width:100%;max-height:100%;width:100%;height:100%}.skelton-square{display:inline-block;width:30px;height:30px}.skelton-text{min-height:1rem;max-width:100%;width:100%;background-color:#ececec;display:block;margin-bottom:15px}.skelton-line{display:inline-block;max-width:100%;width:100%;background-color:#ececec;height:1px}.skelton-img-text .skelton-square{margin-bottom:10px}::ng-deep ion-skeleton-text{background-color:#ececec}::ng-deep ion-skeleton-text span{opacity:1;background-color:#ececec}.skelton-animate{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:placeHolderShimmer;animation-name:placeHolderShimmer;-webkit-animation-timing-function:linear;animation-timing-function:linear;background:rgba(194,194,194,.3);background:linear-gradient(to right,rgba(194,194,194,.3) 8%,rgba(194,194,194,.2) 18%,rgba(194,194,194,.3) 33%);background-size:800px 100px;position:relative}@-webkit-keyframes placeHolderShimmer{0%{background-position:-268px 0}100%{background-position:268px 0}}@keyframes placeHolderShimmer{0%{background-position:-268px 0}100%{background-position:268px 0}}.ui-list-data .skelton-layout{margin-top:30px}.ui-list-data .theme-loading{text-align:center}.ui-list-data .theme-loading .text-desc{padding-left:10%;padding-right:10%;text-align:center;display:inline-block;vertical-align:middle;margin-bottom:30px}.ui-list-data .theme-loading .text-desc .text{color:#414141;font-size:.875rem;line-height:28px;display:inline-block;vertical-align:middle}.ui-list-data .theme-loading .text-desc .text .icon-img{display:inline-block;vertical-align:middle;line-height:normal}.ui-list-data .theme-loading .loading-img{text-align:right;position:relative}.ui-list-data .theme-loading .loading-img .skelton-data-block{padding-left:10%;padding-right:10%;box-sizing:border-box;position:absolute;top:30px;width:100%}.ui-list-data .theme-loading .loading-img .skelton-text{margin-bottom:25px}.ui-list-data .theme-loading .loading-img .wd-short{max-width:30%}.ui-list-data .theme-loading .loading-img .wd-md{max-width:54%}.ui-list-data .theme-loading .loading-img .wd-long{max-width:70%}.ui-list-data .theme-loading .loading-img img{max-width:300px;width:100%}@media (max-width:1023px){.ui-list-data .theme-loading img{bottom:400px;top:auto}}@media (max-width:767px){.ui-list-data .theme-loading{height:100%;position:relative}.ui-list-data .theme-loading .text-desc{margin-bottom:30px}.ui-list-data .theme-loading .text-desc .text{max-width:185px}.ui-list-data .theme-loading .loading-img{margin-top:0;height:100%;position:absolute;right:0;bottom:0;max-width:153px;width:100%}.ui-list-data .theme-loading .loading-img .wd-short{max-width:22%}.ui-list-data .theme-loading .loading-img .skelton-data-block{width:100%;max-width:253px;right:10px;top:60px;position:absolute}.ui-list-data .theme-loading .loading-img img{max-width:153px;margin-top:0;bottom:0;top:auto;position:absolute;right:0}}@keyframes fadein{from{opacity:0}to{opacity:1}}@-webkit-keyframes fadein{from{opacity:0}to{opacity:1}}.status-empty.search-empty{padding-left:13%;padding-right:13%;box-sizing:border-box;text-align:center;display:flex;height:100%;min-height:calc(90vh - 59px - 56px - 24px);justify-content:center;align-items:center}.status-empty.search-empty .empty-block{text-align:center;margin:0 auto}.status-empty.search-empty .img-block{max-width:50px;width:100%;margin:0 auto}.status-empty.search-empty .text-block p{padding:0;font-size:1.125rem;line-height:28px}@media (max-width:767px){.status-empty.search-empty.search-empty{max-width:182px;width:100%;margin:0 auto;padding-left:0;padding-right:0}}.ui-list-data{border-top:1px solid #c2c2c2}.ui-list-data .title-sm-block{background-color:#ececec;display:inline-block;width:100%;padding:5px 15px 5px 6px}.ui-list-data .title-sm-block p{padding:0;margin:0}.ui-list-data .list-data-block{list-style-type:none;padding:0;border-bottom:1px solid #c2c2c2}.ui-list-data .list-data-block .list-item-block{padding:12px 15px 12px 6px;box-sizing:border-box;position:relative}.ui-list-data .list-data-block .list-item-block.highlight{background-color:#f5f5f5}@media (min-width:1024px){.ui-list-data .list-data-block .list-item-block.active{background-color:#f1f9fa}}.ui-list-data .list-data-block .list-item-block+.list-item-block{border-top:1px solid #c2c2c2}.ui-list-data .list-data-block .list-item-block .title-block{display:flex;justify-content:flex-start;align-items:flex-start;padding-bottom:5px;min-height:40px}.ui-list-data .list-data-block .list-item-block .title-block .title-text{font-size:.875rem;padding:0 3px;font-weight:700;display:inline-block;width:100%;display:-webkit-box;-webkit-line-clamp:1;/*! autoprefixer: off */-webkit-box-orient:vertical;overflow:hidden}.ui-list-data .list-data-block .list-item-block .like-block{margin-top:2px}.ui-list-data .list-data-block .list-item-block ::ng-deep .progress-whole-block .progress-value-block .progress-block{max-width:100%}.ui-list-data .list-data-block .list-item-block ::ng-deep app-ui-btn-like-add{pointer-events:none;display:inline-block;max-width:12px;max-height:12px;width:100%}.ui-list-data .list-data-block .list-item-block ::ng-deep app-ui-btn-like-add .btn-like-add{display:inline-block;width:12px}.ui-list-data .list-data-block .list-item-block ::ng-deep app-ui-btn-like-add .btn-like-add img{max-width:100%;width:12px}.ui-list-data .list-data-block .list-item-block .profile-block{display:flex;align-items:center;justify-content:flex-end;position:absolute;right:30px;top:36px}.ui-list-data .list-data-block .list-item-block .profile-block .img-profile-block{display:flex;max-width:10%;align-items:center}@media screen and (min-width:1025px){.ui-list-data .list-data-block .list-item-block .title-block .title-text{padding-right:0;margin-right:3px}.ui-list-data .list-data-block .list-item-block ::ng-deep app-ui-btn-like-add{max-width:1.2vw;max-height:1.2vw}.ui-list-data .list-data-block .list-item-block ::ng-deep app-ui-btn-like-add .btn-like-add{width:1.2vw}.ui-list-data .list-data-block .list-item-block ::ng-deep app-ui-btn-like-add .btn-like-add img{width:1.2vw}.ui-list-data .list-data-block .list-item-block .profile-block{right:1.2vw}.ui-list-data .list-data-block .list-item-block .profile-block .img-profile-block{max-width:1.4vw;width:1.4vw}.ui-list-data .list-data-block .list-item-block .profile-block .img-profile-block img{width:1.4vw}}.ui-list-data .list-data-block .list-item-block .content-block{padding-left:12px}.ui-list-data .list-data-block ::ng-deep .tag-item{min-width:40px}.ui-list-data .list-data-block ::ng-deep .tag-item .ul-tag-block{position:relative;top:2px}.ui-list-data .list-data-block ::ng-deep .tag-item ::ng-deep .tag-block{height:14px;padding-top:0;padding-bottom:0}.ui-list-data ::ng-deep .progress-whole-block{padding-bottom:0}.ui-list-data ::ng-deep .progress-text{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}@media (min-width:769px){.ui-list-data ::ng-deep .scroll-content{height:calc(100vh - 80px - 140px)}}@media (max-width:768px){.ui-list-data ::ng-deep .list-data-block .tag-item{padding-right:0;margin-right:35px;width:40px}.ui-list-data .list-data-block .list-item-block .profile-block{top:12px}.ui-list-data .skelton-layout{height:calc(100vh - 60px - 55px - 134px);overflow-y:auto}::ng-deep app-ui-infinite-scroll .infiniti-scroll{max-height:calc(100vh - 60px - 55px - 134px);height:100%}@supports (top:constant(safe-area-inset-top)){::ng-deep app-ui-infinite-scroll .infiniti-scroll{max-height:calc(100vh - constant(safe-area-inset-top) - constant(safe-area-inset-bottom) - 60px - 55px - 134px)}}@supports (top:env(safe-area-inset-top)){::ng-deep app-ui-infinite-scroll .infiniti-scroll{max-height:calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 60px - 55px - 134px)}}}@media (max-width:767px){.ui-list-data ::ng-deep .tag-item{min-width:40px;margin-top:2px;padding-right:35px}.ui-list-data .list-data-block .list-item-block{display:flex;flex-wrap:wrap}.ui-list-data .list-data-block .list-item-block .title-block{justify-content:flex-start;align-items:flex-start;max-width:100%;width:100%;padding-right:0;box-sizing:border-box}.ui-list-data .list-data-block .list-item-block .profile-block{justify-content:center;align-items:flex-start;padding-top:2px;max-width:20px;width:100%;right:15px;top:12px}.ui-list-data .list-data-block .list-item-block .profile-block .img-profile-block{max-width:100%;align-items:center}.ui-list-data .list-data-block .list-item-block .content-block{width:100%}.ui-list-data .list-data-block .list-item-block ::ng-deep .progress-whole-block{display:flex;width:100%;justify-content:flex-end;padding-bottom:0!important}.ui-list-data .list-data-block .list-item-block ::ng-deep .progress-value-block{padding-left:10px}.ui-list-data .list-data-block .list-item-block ::ng-deep .progress-value-block .progress-block{display:none}}"]}]}],e.ctorParameters=function(){return[{type:x.ChangeDetectorRef},{type:x.ElementRef},{type:undefined,decorators:[{type:x.Optional},{type:x.Inject,args:[R]}]}]},e.propDecorators={customerClick:[{type:x.Output}],customerLoad:[{type:x.Output}],customerRefresh:[{type:x.Output}],customerList:[{type:x.Input}],filterType:[{type:x.Input}]},e}(),z=function(){function e(e,t){this.dateUtils=e,this.changeDetctor=t,this.onEditDetail=new x.EventEmitter,this.onCallPhone=new x.EventEmitter,this.onDeleteDetail=new x.EventEmitter,this.onAddAppointment=new x.EventEmitter,this.followChange=new x.EventEmitter,this._customerDetail=new C,this.language=new A.Language,this.isEmptyAppointment=!1,this.isEmptyEdit=!1,this.isEmptyDel=!1,this.isEmptyDetailInfo=!1,this.isEmptyContactNote=!1,this.isCollapseBtnShow=!0,this.isHasAgeRange=!1,this.isHasContactFrequancy=!1}return Object.defineProperty(e.prototype,"customerDetail",{get:function(){return this._customerDetail},set:function(e){this._customerDetail=e,console.log("inputCustomerDetail: ",e),"OPUS"==this._customerDetail.dataSource?this.isEmptyDel=!0:this.isEmptyDel=!1,this._customerDetail.updateEmptyStatus(),this.convertEmptyValToDisplayText(this._customerDetail),this.checkInfoIsEmpty(),this.changeCollateButton(),this.changeDetctor.detectChanges()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.changeCollateButton=function(){console.debug("changeCollateButton",this.customerDetail.tels.length,this.customerDetail.emails.length,this.customerDetail.addresses.length),this.customerDetail.tels.length<=2&&this.customerDetail.emails.length<=1&&this.customerDetail.addresses.length<=1?this.isCollapseBtnShow=!1:this.isCollapseBtnShow=!0,console.debug("isCollapseBtnShow",this.isCollapseBtnShow)},e.prototype.checkInfoIsEmpty=function(){this.customerDetail.isEmptyInfo?this.isEmptyDetailInfo=!0:this.isEmptyDetailInfo=!1},e.prototype.convertEmptyValToDisplayText=function(e){console.log("convertEmptyValToDisplayText: ",e),A.StringUtils.isEmpty(e.ageRange)?this.isHasAgeRange=!1:this.isHasAgeRange=!0,A.StringUtils.isEmpty(e.contactFrequancy)?this.isHasContactFrequancy=!1:this.isHasContactFrequancy=!0,A.StringUtils.isEmpty(e.gender)&&(e.gender="- -"),A.StringUtils.isEmpty(e.occupation)&&(e.occupation="- -"),A.StringUtils.isEmpty(e.company)&&(e.company="- -"),A.StringUtils.isEmpty(e.income)&&(e.income="- -"),A.StringUtils.isEmpty(e.source)&&(e.source="- -"),A.StringUtils.isEmpty(e.marriage)&&(e.marriage="- -"),A.StringUtils.isEmpty(e.children)&&(e.children="- -"),A.StringUtils.isEmpty(e.familiarity)&&(e.familiarity="- -"),A.StringUtils.isEmpty(e.recentStatus)&&(e.recentStatus="- -"),A.StringUtils.isEmpty(e.manpa)&&(e.manpa="- -"),A.StringUtils.isEmpty(e.children)&&(e.children="- -")},e.prototype.toBirthday=function(){return this.customerDetail.birthday!=undefined?this.dateUtils.toDateString(this.customerDetail.birthday,"yyyy-MM-dd"):"- -"},e.prototype.edit=function(){this.onEditDetail.emit(this.customerDetail.clientID)},e.prototype["delete"]=function(){this.onDeleteDetail.emit(this.customerDetail.clientID)},e.prototype.callPhone=function(){this.onCallPhone.emit(this.customerDetail.clientID)},e.prototype.addAppointment=function(){this.onAddAppointment.emit(this.customerDetail.clientID)},e.prototype.trackByFn=function(e,t){return t.name},e.prototype.isFollowChange=function(e){console.debug("isFollowChange",e),this.customerDetail.updateFollowStatus(e),this.changeDetctor.detectChanges(),this.followChange.emit({isFollow:e,clientID:this.customerDetail.clientID})},e.decorators=[{type:x.Component,args:[{selector:"app-customer-detail",template:'\x3c!-- has CustomerDetail data--\x3e\n<ng-container *ngIf="customerDetail != undefined && customerDetail.clientID != \'\'; else noCustomerData">\n  <div class="main-detail-content">\n    \x3c!-- profile --\x3e\n    <div class="space-ui-element profile-block">\n        <div class="img-block" [ngClass]="customerDetail.dataSource == \'OPUS\' ? \'\': \' active\'">\n          \x3c!-- if true show active img (green) or show normal img --\x3e\n          <img class="normal-img" src="assets/img/img-cust-profile.svg">\n          <img class="active-img" src="assets/img/img-cust-profile-active.svg">\n        </div>\n        <div class="content-block">\n          <ng-container *ngIf="customerDetail.possibility != \'\'">\n              <app-ui-form-radio-tag class="wd-lg profile-tag" [checked]="true" [disabled]="true" [ngClass]="customerDetail.possibility">{{customerDetail.possibility|translate}}</app-ui-form-radio-tag>\n          </ng-container>\n          \n          <div class="name-block">\n              {{customerDetail.lastName  + customerDetail.firstName}}\n          </div>\n          <div class="sm-text">\n              <span class="age" *ngIf="isHasAgeRange">\n                ({{customerDetail.ageRange}})\n              </span>\n              <span class="detail-text" *ngIf="isHasContactFrequancy">\n                  {{language.contactFrequency|translate }}\n                  <span class="text-focus">{{customerDetail.contactFrequancy}}</span>\n                  {{language.timePerYear|translate }}\n              </span>\n            </div>\n        </div>\n        <div class="like-block">\n          <app-ui-btn-like-add [isLike]="customerDetail.isFollow" (onChange)="isFollowChange($event)"></app-ui-btn-like-add>\n        </div>\n        \n    </div>\n    \x3c!-- end of profile --\x3e\n\n    \x3c!-- link --\x3e\n    <ul class="space-ui-element ui-list-block">\n        <li class="list-item-block" [ngClass]="isEmptyAppointment? \' disable\': \'\'">\n            <button Action action=\'addAppointment\' (actionClick)="addAppointment()">\n                <div class="img-block">\n                    <img class="img-disable" src="assets/img/icon-cust-appointment-disable.svg">\n                    <img class="img-normal" src="assets/img/icon-cust-appointment.svg">\n                </div>\n                <div class="text-block">\n                    <p>{{language.appointment|translate }}</p>\n                </div>\n            </button>\n        </li>\n        <li class="list-item-block" [ngClass]="customerDetail.tels.length == 0? \' disable\': \'\'">\n            <button Action action="customerCallPhone" (actionClick)="callPhone()">\n                <div class="img-block">\n                    <img class="img-disable" src="assets/img/icon-cust-contact-disable.svg">\n                    <img class="img-normal" src="assets/img/icon-cust-contact.svg">\n                </div>\n                <div class="text-block">\n                    <p>{{language.contact|translate }}</p>\n                </div>\n            </button>\n        </li>\n        <li class="list-item-block" [ngClass]="isEmptyEdit? \' disable\': \'\'">\n            <button Action action="customerEdit" (actionClick)="edit()">\n                <div class="img-block">\n                    <img class="img-disable" src="assets/img/icon-cust-edit-disable.svg">\n                    <img class="img-normal" src="assets/img/icon-cust-edit.svg">\n                </div>\n                <div class="text-block">\n                    <p>{{language.edit|translate }}</p>\n                </div>\n            </button>\n        </li>\n        <li class="list-item-block" [ngClass]="isEmptyDel? \' disable\': \'\'">\n            <button Action action="customerDelete" (actionClick)="delete()">\n                <div class="img-block">\n                    <img class="img-disable" src=\'assets/img/icon-cust-del-disable.svg\'>\n                    <img class="img-normal" src="assets/img/icon-cust-del.svg">\n                </div>\n                <div class="text-block">\n                    <p>{{language.delete|translate }}</p>\n                </div>\n            </button>\n            \n        </li>\n    </ul>\n    \x3c!-- end of link block --\x3e\n    <div *ngTemplateOutlet="detailPreTemplate"></div>\n    \x3c!-- first card --\x3e\n    <app-ui-collapse-text1 class="card1-all-block" [(isCollapseBtnShow)]="isCollapseBtnShow" [translateEmpty]="language.empty | translate" [isDataEmpty]="customerDetail.tels.length == 0 && customerDetail.emails.length == 0 && customerDetail.addresses.length == 0">\n          \x3c!-- --\x3e\n          <ng-container TextType="collapseContentOrigin">\n              <ng-container *ngIf="customerDetail.tels.length != 0">\n                  <app-ui-info-text1 [imgSrc]="\'assets/img/icon-form-phone.svg\'">\n                    <ng-container textType="title">{{customerDetail.tels[0].telType|translate }}</ng-container>\n                    <ng-container textType="text">{{customerDetail.tels[0].tel }}</ng-container>\n                </app-ui-info-text1>\n              </ng-container>\n          </ng-container>\n\n          <ng-container TextType="collapseContentOrigin2">\n              <ng-container *ngIf="customerDetail.tels.length > 1">\n                  <app-ui-info-text1 >\n                    <ng-container textType="title">{{customerDetail.tels[1].telType|translate}}</ng-container>\n                    <ng-container textType="text">{{customerDetail.tels[1].tel}}</ng-container>\n                </app-ui-info-text1>\n              </ng-container>\n          </ng-container>\n\n          <ng-container TextType="collapseContent">\n              <ng-container *ngIf="customerDetail.tels.length > 2">\n                <ng-container *ngFor="let customerTel of customerDetail.tels; let i = index;">\n                  <ng-container *ngIf="i > 1 && (i + 1) % 2 != 0">\n                      <app-ui-info-text1>\n                        <ng-container textType="title">{{customerTel.telType|translate}}</ng-container>\n                        <ng-container textType="text">{{customerTel.tel}}</ng-container>\n                      </app-ui-info-text1>\n                </ng-container>\n                  </ng-container>\n                </ng-container>\n            </ng-container>\n\n            <ng-container TextType="collapseContent2">\n                <ng-container *ngIf="customerDetail.tels.length > 2">\n                  <ng-container *ngFor="let customerTel of customerDetail.tels; let i = index;">\n                    <ng-container *ngIf="i > 1 && (i + 1) % 2 == 0">\n                        <app-ui-info-text1>\n                          <ng-container textType="title">{{customerTel.telType|translate}}</ng-container>\n                          <ng-container textType="text">{{customerTel.tel}}</ng-container>\n                        </app-ui-info-text1>\n                  </ng-container>\n                    </ng-container>\n                  </ng-container>\n              </ng-container>\n          \x3c!-- end of --\x3e\n\n          \x3c!-- Email--\x3e        \n          <ng-container TextType="collapseContentOrigin3">\n              <ng-container *ngIf="customerDetail.emails.length != 0">\n              <app-ui-info-text1  [imgSrc]="\'assets/img/icon-form-mail.svg\'">\n                <ng-container textType="title">{{customerDetail.emails[0].emailType|translate}}</ng-container>\n                <ng-container textType="text">{{customerDetail.emails[0].email}}</ng-container>\n              </app-ui-info-text1>\n             </ng-container>     \n          </ng-container>\n\n          <ng-container TextType="collapseContent3">\n              <ng-container *ngIf="customerDetail.emails.length > 1">\n                <ng-container *ngFor="let email of customerDetail.emails ; let i = index">\n                  <ng-container *ngIf="i >= 1">\n                      <app-ui-info-text1>\n                        <ng-container textType="title">{{email.emailType|translate}}</ng-container>\n                        <ng-container textType="text">{{email.email}}</ng-container>\n                      </app-ui-info-text1>\n                  </ng-container>                     \n              </ng-container>\n              </ng-container>            \n          </ng-container>\n          \x3c!-- end of Email--\x3e\n\n          \x3c!-- Address--\x3e\n          \n          <ng-container TextType="collapseContentOrigin4">\n              <ng-container *ngIf="customerDetail.addresses.length != 0">\n                  <app-ui-info-text1 [imgSrc]="\'assets/img/icon-form-addr.svg\'">\n                    <ng-container textType="title">{{customerDetail.addresses[0].addressType|translate}}</ng-container>\n                    <ng-container textType="text">{{customerDetail.addresses[0].toFullAddress()}}</ng-container>\n                  </app-ui-info-text1>\n              </ng-container>\n          </ng-container>\n\n          <ng-container TextType="collapseContent4">\n              <ng-container *ngIf="customerDetail.addresses.length > 1">\n                  <ng-container *ngFor="let address of customerDetail.addresses ; let i = index">\n                      <ng-container *ngIf="i >= 1">\n                          <app-ui-info-text1 [imgSrc]="\'\'">\n                              <ng-container textType="title">{{address.addressType|translate}}</ng-container>\n                              <ng-container textType="text">{{address.toFullAddress()}}</ng-container>\n                            </app-ui-info-text1>\n                      </ng-container>                    \n                  </ng-container>  \n              </ng-container>\n            \n          </ng-container>\n\n          \n                \n          \x3c!-- end of Address--\x3e\n      \n    </app-ui-collapse-text1>\n\n    \x3c!-- end of first card --\x3e\n\n\n    \x3c!-- 2nd card --\x3e\n    <app-ui-collapse-card1 [isDataEmpty]="isEmptyDetailInfo" [tagText]="[language.detail | translate]" [emptyText]="[language.noClick | translate, language.noInformation | translate]" >\n        <ng-container textType="collapseContentOrigin">\n            <app-ui-form-layout-row>\n              <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n                <app-ui-info-text2>\n                  <ng-container textType="title">{{language.birthday|translate }}</ng-container>\n                  <ng-container textType="text">{{toBirthday()}}</ng-container>\n                </app-ui-info-text2>\n              </app-ui-form-layout-col>\n              <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n                <app-ui-info-text2>\n                  <ng-container textType="title">{{language.gender|translate }}</ng-container>\n                  <ng-container textType="text">{{customerDetail.gender}}</ng-container>\n                </app-ui-info-text2>\n              </app-ui-form-layout-col>\n            </app-ui-form-layout-row>\n            <app-ui-form-layout-row>\n              <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n                <app-ui-info-text2>\n                  <ng-container textType="title">{{language.occupation|translate }}</ng-container>\n                  <ng-container textType="text">{{customerDetail.occupation}}</ng-container>\n                </app-ui-info-text2>\n              </app-ui-form-layout-col>\n              <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n                <app-ui-info-text2>\n                  <ng-container textType="title">{{language.company|translate }}</ng-container>\n                  <ng-container textType="text">{{customerDetail.company}}</ng-container>\n                </app-ui-info-text2>\n              </app-ui-form-layout-col>\n            </app-ui-form-layout-row>\n            <app-ui-form-layout-row>\n              <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n                <app-ui-info-text2>\n                  <ng-container textType="title">{{language.annualIncome|translate }}</ng-container>\n                  <ng-container textType="text">{{customerDetail.income}}</ng-container>\n                </app-ui-info-text2>\n              </app-ui-form-layout-col>\n              <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n                <app-ui-info-text2>\n                  <ng-container textType="title">{{language.source|translate }}</ng-container>\n                  <ng-container textType="text">{{customerDetail.source}}</ng-container>\n                </app-ui-info-text2>\n              </app-ui-form-layout-col>\n            </app-ui-form-layout-row>\n            <app-ui-form-layout-row>\n              <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n                <app-ui-info-text2>\n                  <ng-container textType="title">{{language.marriage|translate }}</ng-container>\n                  <ng-container textType="text">{{customerDetail.marriage}} </ng-container>\n                </app-ui-info-text2>\n              </app-ui-form-layout-col>\n              <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n                <app-ui-info-text2>\n                  <ng-container textType="title">{{language.children|translate }}</ng-container>\n                  <ng-container textType="text">{{customerDetail.children}}</ng-container>\n                </app-ui-info-text2>\n              </app-ui-form-layout-col>\n            </app-ui-form-layout-row>\n            <app-ui-form-layout-row>\n              <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n                <app-ui-info-text2>\n                  <ng-container textType="title">{{language.familiarity|translate }}</ng-container>\n                  <ng-container textType="text">{{customerDetail.familiarity}}</ng-container>\n                </app-ui-info-text2>\n              </app-ui-form-layout-col>\n              <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n                <app-ui-info-text2>\n                  <ng-container textType="title">{{language.recentStatus|translate }}</ng-container>\n                  <ng-container textType="text">{{customerDetail.recentStatus}}</ng-container>\n                </app-ui-info-text2>\n              </app-ui-form-layout-col>\n            </app-ui-form-layout-row>\n            <app-ui-form-layout-row>\n              <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="12">\n                <app-ui-info-text2>\n                  <ng-container textType="title">{{language.customerStatus|translate }}</ng-container>\n                  <ng-container textType="text">{{customerDetail.manpa}}</ng-container>\n                </app-ui-info-text2>\n              </app-ui-form-layout-col>        \n\n              \x3c!-- <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                  <app-ui-info-text2>\n                    <ng-container textType="title">{{language.extraItem|translate }}</ng-container>\n                    <ng-container textType="text">ExtraItem</ng-container>\n                  </app-ui-info-text2>\n                </app-ui-form-layout-col>      --\x3e\n            </app-ui-form-layout-row>\n        </ng-container>\n        <ng-container textType="collapseContent">\n            \x3c!-- <app-ui-form-layout-row>\n                \n              </app-ui-form-layout-row>\n\n              <app-ui-form-layout-row>\n                <app-ui-form-layout-col [colPC]="6" [colNB]="6" [colPad]="6" [colMobile]="6">\n                  <app-ui-info-text2>\n                    <ng-container textType="title">ExtraItem3</ng-container>\n                    <ng-container textType="text">ExtraItem3</ng-container>\n                  </app-ui-info-text2>\n                </app-ui-form-layout-col>\n              </app-ui-form-layout-row> --\x3e\n        </ng-container>\n    </app-ui-collapse-card1>\n    \x3c!-- end of 2nd card --\x3e\n    <div *ngTemplateOutlet="detailPostTemplate"></div>\n  </div>\n</ng-container>\n\n<ng-template #noCustomerData>\n  <div class="main-detail-content skelton-layout">\n    <div class="theme-loading" style="background-image:url(\'assets/img/loading-customer-main.svg\')">\n      \x3c!-- profile --\x3e\n      <div class="space-ui-element profile-block">\n          <div class="img-block">\n            <div class="skeleton-round "></div>\n          </div>\n          <div class="content-block">\n            <div class="tag-block">\n                <div class="skelton-text  " ></div>\n            </div>\n            <div class="name-block">\n                <div class="skelton-text " ></div>\n            </div>\n            <div class="sm-text">\n                <div class="skelton-text " ></div>\n            </div>\n          </div>\n      </div>\n      \x3c!-- end of profile --\x3e\n      \x3c!-- link list --\x3e\n      <ul class="ui-list-block">\n          <li class="list-item-block" *ngFor=\'let number of [0,1,2,3]\' >\n              <div class="skelton-img-text">\n                  <div class="skelton-square">\n                      <div class="skeleton-round "></div>\n                  </div>\n                  <div class="skelton-text " ></div>\n              </div>\n          </li>\n      </ul>\n      \x3c!-- end of link list --\x3e\n      \x3c!-- line --\x3e\n      <div class="skelton-line-block">\n          <div class="skelton-line "></div>\n      </div>\n      \x3c!-- end of line --\x3e\n  \n      \x3c!-- list data --\x3e\n      <div class="card-text">\n        <div class="left-part">\n          <div class="data-group">\n              \n              <div class="skelton-text   wd-short"></div>\n              <div class="skelton-text   wd-long"></div>\n              <div class="skelton-text   wd-short"></div>\n              <div class="skelton-text   wd-long"></div>\n              <div class="skelton-text   wd-long"></div>\n          </div>\n        </div>\n        <div class="right-part">\n            <div class="data-group">\n                <div class="skelton-text   wd-short"></div>\n                <div class="skelton-text   wd-long"></div>\n                <div class="skelton-text   wd-short"></div>\n                <div class="skelton-text   wd-long"></div>\n            </div>\n        </div>\n      </div>\n  \n      \x3c!-- end of list data --\x3e\n  \n       \x3c!-- line --\x3e\n       <div class="skelton-line-block">\n          <div class="skelton-line "></div>\n      </div>\n       \x3c!-- end of line --\x3e\n  \n  \n      \n    </div>\n  </div>\n    \x3c!-- Customer data is empty --\x3e\n</ng-template>\n',styles:["@keyframes fadein{from{opacity:0}to{opacity:1}}@-webkit-keyframes fadein{from{opacity:0}to{opacity:1}}.skelton-layout{margin:0}.skelton-row{display:flex}.skelton-row.align-side{justify-content:space-between}.align-right{margin:0 0 15px auto}.align-center{margin:15px auto}.skeleton-round{border-radius:50%;background-color:#ececec;max-width:100%;max-height:100%;width:100%;height:100%}.skelton-square{display:inline-block;width:30px;height:30px}.skelton-text{min-height:1rem;max-width:100%;width:100%;background-color:#ececec;display:block;margin-bottom:15px}.skelton-line{display:inline-block;max-width:100%;width:100%;background-color:#ececec;height:1px}.skelton-img-text .skelton-square{margin-bottom:10px}::ng-deep ion-skeleton-text{background-color:#ececec}::ng-deep ion-skeleton-text span{opacity:1;background-color:#ececec}.skelton-animate{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:placeHolderShimmer;animation-name:placeHolderShimmer;-webkit-animation-timing-function:linear;animation-timing-function:linear;background:rgba(194,194,194,.3);background:linear-gradient(to right,rgba(194,194,194,.3) 8%,rgba(194,194,194,.2) 18%,rgba(194,194,194,.3) 33%);background-size:800px 100px;position:relative}@-webkit-keyframes placeHolderShimmer{0%{background-position:-268px 0}100%{background-position:268px 0}}@keyframes placeHolderShimmer{0%{background-position:-268px 0}100%{background-position:268px 0}}.main-detail-content.skelton-layout{margin:0 -40px 0 0}@media (max-width:767px){.main-detail-content.skelton-layout{margin-right:-40px}.main-detail-content.skelton-layout .profile-block .content-block{max-width:70%}.main-detail-content.skelton-layout .theme-loading .ui-list-block .list-item-block{margin-right:0}}.main-detail-content .skelton-line-block{padding-right:40px}.main-detail-content .theme-loading{background-size:contain;background-position:bottom right;background-repeat:no-repeat;width:100%;min-height:100vh;padding-right:40px}.main-detail-content .theme-loading .profile-block .img-block{display:inline-block;max-width:100%;width:63px;height:63px;padding-right:0;margin-right:20px}.main-detail-content .theme-loading .profile-block .tag-block{max-width:15%}.main-detail-content .theme-loading .profile-block .name-block{max-width:30%;padding-bottom:0}.main-detail-content .theme-loading .profile-block .sm-text{max-width:55%}.main-detail-content .theme-loading .profile-block ::ng-deep ion-skeleton-text{margin-bottom:10px}.main-detail-content .theme-loading .ui-list-block{margin-bottom:20px}.main-detail-content .theme-loading .ui-list-block .list-item-block{margin-right:5%}.main-detail-content .theme-loading .ui-list-block .skelton-img-text .skelton-text{max-width:80%;margin:0 auto}.main-detail-content .theme-loading .skelton-square{width:3rem;height:3rem}.main-detail-content .theme-loading .card-text{display:flex}.main-detail-content .theme-loading .card-text .left-part{width:40%;box-sizing:border-box;padding:2rem}.main-detail-content .theme-loading .card-text .right-part{width:60%;box-sizing:border-box;padding:2rem}.main-detail-content .theme-loading .card-text .wd-short{max-width:5rem}.main-detail-content .theme-loading .card-text .wd-long{max-width:100%}@media (min-width:768px){.main-detail-content{padding-right:40px}.main-detail-content.skelton-layout{padding-right:0}}@media (min-width:769px){.main-detail-content{padding-top:40px}}.profile-block{display:flex;justify-content:flex-start;flex-wrap:wrap;width:100%;position:relative}.profile-block .img-block{padding-right:15px}.profile-block .img-block img{border-radius:50%;display:inline-block;width:60px;height:60px}.profile-block .img-block .active-img,.profile-block .img-block.active .normal-img{display:none}.profile-block .img-block.active .active-img{display:block}.profile-block .content-block{max-width:calc(100% - 40px - 10px - 60px - 15px);width:100%}.profile-block .content-block ::ng-deep .tag-block{margin-bottom:5px}.profile-block .content-block .name-block{font-size:1.25rem;font-weight:700;padding-bottom:5px;line-height:28px;white-space:normal;word-wrap:break-word}.profile-block .sm-text{font-size:.875rem;line-height:28px;width:100%}.profile-block .sm-text .text-focus{color:#003781;font-weight:700;font-size:1.125rem;display:inline-block;padding:0 5px;vertical-align:middle}.profile-block .age{display:inline-block;line-height:28px;min-height:28px;margin-right:5px}.profile-block .like-block{position:absolute;top:0;right:0}.profile-block .like-block ::ng-deep img{max-width:40px;width:100%}@media (max-width:768px){.main-detail-content{padding-top:30px}.profile-block{padding-left:15px;padding-right:6px;position:static}.profile-block .like-block{right:10px;top:10px}.profile-block .img-block{padding-right:10px}.profile-block .img-block img{width:45px;height:45px}.profile-block .content-block{max-width:calc(100% - 45px - 10px)}.profile-block .content-block .name-block{padding-right:50px}}@media screen and (min-width:1025px){.profile-block .img-block{width:calc(caculate-vw($wd-profile-img) + 15px)}.profile-block .img-block img{width:6vw;height:6vw}.profile-block .content-block{max-width:calc(100% - 4vw - 10px - 6vw - 15px)}.profile-block .like-block ::ng-deep img{max-width:4vw}}.ui-list-block{display:flex;list-style-type:none;margin-right:-30px;justify-content:center;align-items:baseline}.ui-list-block button{border:none;background-color:transparent;padding:0}.ui-list-block .list-item-block{width:25%;max-width:5.625rem;text-align:center;margin-right:30px}.ui-list-block .list-item-block .img-block{max-width:40px;width:100%;margin:0 auto}.ui-list-block .list-item-block .img-block img{max-width:100%;width:100%}.ui-list-block .list-item-block.disable{pointer-events:none}.ui-list-block .list-item-block.disable .text-block{color:#414141}.ui-list-block .list-item-block .img-disable,.ui-list-block .list-item-block.disable .img-normal{display:none}.ui-list-block .list-item-block.disable .img-disable{display:inline-block;pointer-events:none}.ui-list-block .list-item-block .text-block p{color:#414141;line-height:normal;font-size:.875rem;margin:4px 0 0}@media (min-width:1023px){.ui-list-block .ui-list-block{padding-left:13%;padding-right:13%;box-sizing:border-box}}@media (max-width:767px){.ui-list-block{flex-wrap:wrap;margin-right:-10px}.ui-list-block .list-item-block{margin-right:0;max-width:100px}}@media (max-width:374px){.ui-list-block{flex-wrap:wrap;margin-right:0}.ui-list-block .list-item-block{margin-right:0}.ui-list-block .list-item-block .text-block p{font-size:.75rem}}@media screen and (min-width:1025px){.ui-list-block .list-item-block{max-width:9vw}.ui-list-block .list-item-block .img-block{max-width:4vw;width:4vw}}::ng-deep .card1-all-block .card-content-block{padding-top:20px}::ng-deep .card1-all-block .gas-row-block{margin-top:0}::ng-deep .card1-all-block .gas-row-block+.gas-row-block{margin-top:4px}@media (min-width:769px){::ng-deep .card1-all-block .gas-layout-form{box-sizing:border-box;padding-left:51px;padding-right:64px}::ng-deep .card1-all-block .gas-row-block{margin-top:0}}@media (max-width:767px){::ng-deep .card1-all-block .gas-layout-form{padding-left:15px}}"]}]}],e.ctorParameters=function(){return[{type:A.DateUtils},{type:x.ChangeDetectorRef}]},e.propDecorators={onEditDetail:[{type:x.Output}],onCallPhone:[{type:x.Output}],onDeleteDetail:[{type:x.Output}],onAddAppointment:[{type:x.Output}],followChange:[{type:x.Output}],detailPreTemplate:[{type:x.Input}],detailPostTemplate:[{type:x.Input}],customerDetail:[{type:x.Input}]},e}(),G=function(){function e(e,t){this.dateUtils=e,this.language=new A.Language,this.onAddNote=new x.EventEmitter,this.onDisplayNote=new x.EventEmitter,this.onEditNote=new x.EventEmitter,this.onDeleteNote=new x.EventEmitter,this.contactListRefresh=new x.EventEmitter,this.elementRef=t}return Object.defineProperty(e.prototype,"contactList",{get:function(){return this._contactList},set:function(e){var t=this;this._contactList=e,setTimeout(function(){t.closeSlidingItems()},200)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.closeSlidingItems()},200)},e.prototype.closeSlidingItems=function(){return g(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return console.debug("closeSlidingItems"),null==(t=this.elementRef.nativeElement.querySelector("ion-item-sliding"))?[3,3]:(console.debug("item",t),[4,t.close()]);case 1:return e.sent(),[4,t.closeOpened()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},e.prototype.refreshContactNote=function(){var e=this;this.contactListRefresh.emit(),setTimeout(function(){e.closeSlidingItems()},200)},e.prototype.addNote=function(){this.onAddNote.emit()},e.prototype.displayNote=function(e){this.onDisplayNote.emit(e)},e.prototype.editNote=function(e){this.onEditNote.emit(e)},e.prototype.deleteNote=function(e){this.onDeleteNote.emit(e)},e.prototype.trackByClientID=function(e,t){return t.getClientID()},e.prototype.toNoteTime=function(e){return this.dateUtils.toDateString(e,"yyyy-MM-dd HH:mm")},e.decorators=[{type:x.Component,args:[{selector:"app-customer-contact-list",template:'<ng-container *ngIf="contactList">\n    <div #slidingListBlock class=" contact-list-block">\n        \x3c!-- Contact Note --\x3e\n        <app-ui-title-style1 [isShowOther]="true">\n            <ng-container textType="titleText">\n                {{language.contactNote |translate }}\n            </ng-container>\n            <ng-container textType="otherEle">\n                <app-ui-link [isUnderLine]="false" imgSrc="./assets/img/icon-add-blue-text.svg" Action action="customerAddNote" (actionClick)="addNote()">\n                    <ng-container textType="linktext">{{language.add |translate }}</ng-container>\n                </app-ui-link>\n            </ng-container>\n        </app-ui-title-style1>\n        \x3c!-- end of Contact Note  --\x3e\n\n        \x3c!--contact note empty --\x3e\n        <ng-container *ngIf="contactList && contactList.length != 0 ; else noContactData">\n                \x3c!-- <app-ui-infinite-scroll (loadingCallback)="loadContactList($event)"> --\x3e\n\n                        <app-ui-item-sliding>\n                                <app-ui-item *ngFor="let customerContactNote of contactList;trackBy:trackByClientID;" (onItemClick)="displayNote(customerContactNote)">\n                                \n                                <div ui-item-content class="item" >\n                                    <p class="title">{{ toNoteTime(customerContactNote.date)}}</p>\n                                    <p class="desc">{{ customerContactNote.noteMessage}}</p>\n                                </div>\n                            \n                                \x3c!--  side="end"  --\x3e\n                                <app-ui-item-options side="end" class="option-block-end">\n                                    <app-ui-item-option class="btn-option option-color-normal"  (onItemOptionClick)="editNote(customerContactNote)">\n                                        <img src="assets/img/icon-list-pen-full.svg" alt="edit">\n                                    </app-ui-item-option>\n                                    <app-ui-item-option class="btn-option option-color-focus"  (onItemOptionClick)="deleteNote(customerContactNote)">\n                                        <img src="assets/img/icon-trash-full.svg" alt="delete">\n                                    </app-ui-item-option>\n                                </app-ui-item-options>\n                                </app-ui-item>\n                        </app-ui-item-sliding>\n                \x3c!-- </app-ui-infinite-scroll> --\x3e\n        </ng-container>\n\n        <ng-template #noContactData>\n            <div class="empty-whole-block">\n                <div class="status-empty contact-note-empty empty-block" Action action="customerAddNote" (actionClick)="addNote()">\n                    <div class="empty-show-block">\n                        <div class="empty-img">\n                        <img src="assets/img/empty-img-customer-note.svg">\n                        </div>\n                        <div class="text">\n                                {{language.noRecord |translate }}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </ng-template>\n        \x3c!-- end of contact note empty --\x3e\n    </div>\n\n</ng-container>\n\n\n',styles:["@keyframes fadein{from{opacity:0}to{opacity:1}}@-webkit-keyframes fadein{from{opacity:0}to{opacity:1}}.empty-whole-block{padding-left:2px}.contact-note-empty{background-color:#fff;display:flex;align-items:center;justify-content:center;box-sizing:border-box;padding:30px;border-radius:5px;box-shadow:0 2px 4px 0 rgba(0,0,0,.19);overflow:visible}.contact-note-empty .empty-show-block{background-color:#fff;display:flex;align-items:center;justify-content:center;box-sizing:border-box;padding:30px;border-radius:5px}.contact-note-empty .empty-show-block .empty-img{display:inline-block;max-width:75px}.contact-note-empty .empty-show-block .empty-img img{max-width:100%}.contact-note-empty .empty-show-block .text{margin-left:50px;max-width:196px;width:100%;color:#414141;font-size:1.125rem;line-height:28px;font-weight:300}@media (max-width:1023px){.contact-note-empty{padding:0}}@media (max-width:374px){.contact-note-empty .empty-show-block{padding:30px 10px}.contact-note-empty .empty-show-block .text{margin-left:22px}}@media (min-width:767px){.contact-list-block{padding-right:40px}}.contact-list-block{padding-bottom:100px}:host app-ui-item-sliding{background-color:#f5f5f5}:host app-ui-item-sliding .ui-item{padding:20px}:host app-ui-item-sliding .item .title{font-size:.875rem;font-weight:700;color:#414141;position:relative;line-height:28px;margin-bottom:1px}:host app-ui-item-sliding .item .title:before{content:'';display:inline-block;width:15px;height:1px;background-color:#007ab3;position:absolute}:host app-ui-item-sliding .item .desc{/*! autoprefixer: off */-webkit-box-orient:vertical;font-size:1.125rem;color:#414141;font-weight:300;line-height:28px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2}:host app-ui-item-sliding .option-color-normal{background-color:#ececec}:host app-ui-item-sliding .option-color-normal ::ng-deep ion-item-option{background-color:#ececec}:host app-ui-item-sliding .option-color-focus{background-color:#dc3149}:host app-ui-item-sliding .option-color-focus ::ng-deep ion-item-option{background-color:#dc3149}:host app-ui-item-sliding .btn-option ::ng-deep ion-item-option{padding:0 27px}:host app-ui-item-sliding .option-block-end .btn-option{color:#fff;text-align:center}:host app-ui-item-sliding .option-block-end .btn-option img{margin:0 auto;max-width:24px;width:100%}:host app-ui-item-sliding ::ng-deep .list-block{background-color:#f5f5f5}:host app-ui-item-sliding ::ng-deep .list-block app-ui-item:first-of-type .item-native{border-radius:5px 5px 0 0}:host app-ui-item-sliding ::ng-deep .list-block app-ui-item:last-of-type .item-native{border-radius:0 0 5px 5px}:host app-ui-item-sliding ::ng-deep ion-item .ui-item{margin:0;padding:21px 30px 21px 2px}:host app-ui-item-sliding ::ng-deep ion-list{margin:0;padding-left:1px}:host app-ui-item-sliding ::ng-deep .item-native{padding-left:0;border-radius:5px}:host app-ui-item-sliding ::ng-deep .item-inner{padding-right:0}@media (max-width:767px){:host app-ui-item-sliding ::ng-deep :host app-ui-item-sliding .desc{-webkit-line-clamp:3}:host app-ui-item-sliding ::ng-deep ion-item .ui-item{padding:21px 15px 21px 2px}:host app-ui-item-sliding .item .desc{-webkit-line-clamp:3}}@media screen and (min-width:1025px){:host app-ui-item-sliding .option-block-end .btn-option img{max-width:2.4vw}}"]}]}],e.ctorParameters=function(){return[{type:A.DateUtils},{type:x.ElementRef,decorators:[{type:x.Inject,args:[x.ElementRef]}]}]},e.propDecorators={onAddNote:[{type:x.Output}],onDisplayNote:[{type:x.Output}],onEditNote:[{type:x.Output}],onDeleteNote:[{type:x.Output}],contactListRefresh:[{type:x.Output}],contactList:[{type:x.Input}]},e}(),W=function(){function e(e,t){this.customerService=e,this.profileCodeService=t,this.isAsPresent=!1,this.filterColumnMap=new Map,this._criteria=new _,this.doneCriteria=new x.EventEmitter,this.language=new A.Language}return Object.defineProperty(e.prototype,"criteria",{get:function(){return this._criteria},set:function(e){console.log("set criteria:",e),this._criteria=e,this.isAsPresent=e.savePreset,this.refreshFilterMap()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.customerType=this.profileCodeService.getCodeArray("Customer_Type"),this.customerDataSource=this.profileCodeService.getCodeArray("Customer_DataSource"),this.possibility=this.profileCodeService.getCodeArray("Customer_Possibility"),this.children=this.profileCodeService.getCodeArray("Customer_Children"),this.source=this.profileCodeService.getCodeArray("Customer_Source"),this.familiarity=this.profileCodeService.getCodeArray("Customer_Familiarity"),this.recentStatus=this.profileCodeService.getCodeArray("Customer_RecentStatus"),this.age=this.profileCodeService.getCodeArray("Customer_Age"),this.gender=this.profileCodeService.getCodeArray("Customer_Gender"),this.income=this.profileCodeService.getCodeArray("Customer_Income"),this.marriage=this.profileCodeService.getCodeArray("Customer_Marriage"),this.manpa=this.profileCodeService.getCodeArray("Customer_Status"),this.contactFrequency=this.profileCodeService.getCodeArray("Customer_ContactFrequancy"),this.birthday=this.profileCodeService.getCodeArray("Customer_Birthday"),this.completeness=this.profileCodeService.getCodeArray("Customer_Completeness"),this.filterColumnMap.set("IsFollow",this.customerType),this.filterColumnMap.set("DataSource",this.customerDataSource),this.filterColumnMap.set("Possibility",this.possibility),this.filterColumnMap.set("Source",this.source),this.filterColumnMap.set("Familiarity",this.familiarity),this.filterColumnMap.set("RecentStatus",this.recentStatus),this.filterColumnMap.set("MANPA",this.manpa),this.filterColumnMap.set("Gender",this.gender),this.filterColumnMap.set("Marriage",this.marriage),this.filterColumnMap.set("Children",this.children),this.filterColumnMap.set("Income",this.income),this.filterColumnMap.set("AgeRange",this.age),this.filterColumnMap.set("Birthday",this.birthday),this.filterColumnMap.set("ContactFrequancy",this.contactFrequency),this.filterColumnMap.set("Completeness",this.completeness),0==this.criteria.getFilterMap().size&&this.clearCriteria(),this.clear&&this.clear.subscribe(function(){e.clearCriteria()}),this.save&&this.save.subscribe(function(){e.saveCriteria()})},e.prototype.onClick=function(){this.isAsPresent=!1},e.prototype._resetFilter=function(e){var t,n;try{for(var i=E(e),o=i.next();!o.done;o=i.next()){o.value.isCheck=!1}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(t)throw t.error}}},e.prototype._addDefaultChecked=function(e,t){var n,i;try{for(var o=E(t),a=o.next();!a.done;a=o.next()){var r=a.value;e.includes(r.getCode())&&(r.isCheck=!0)}}catch(s){n={error:s}}finally{try{a&&!a.done&&(i=o["return"])&&i.call(o)}finally{if(n)throw n.error}}},e.prototype._addCriteria=function(e,t,n){var i,o;try{for(var a=E(t),r=a.next();!r.done;r=a.next()){var s=r.value;s.isCheck&&n.addCriteria(e,s.getCode())}}catch(l){i={error:l}}finally{try{r&&!r.done&&(o=a["return"])&&o.call(a)}finally{if(i)throw i.error}}},e.prototype._addFilterMap=function(e,t){this.filterColumnMap.has(e)&&this.filterColumnMap.get(e).forEach(function(e){t.includes(e.getCode())&&(e.isCheck=!0)})},e.prototype.clearCriteria=function(){this._resetFilter(this.customerType),this._resetFilter(this.customerDataSource),this._resetFilter(this.birthday),this._resetFilter(this.age),this._resetFilter(this.gender),this._resetFilter(this.income),this._resetFilter(this.source),this._resetFilter(this.marriage),this._resetFilter(this.children),this._resetFilter(this.familiarity),this._resetFilter(this.recentStatus),this._resetFilter(this.manpa),this._resetFilter(this.contactFrequency),this._resetFilter(this.possibility),this._resetFilter(this.completeness)},e.prototype.refreshFilterMap=function(){var n=this;this.criteria.hasCriteria()&&0<this.criteria.getFilterMap().size&&this.criteria.getFilterMap().forEach(function(e,t){n._addFilterMap(t,e)})},e.prototype.saveCriteria=function(){var n=this,i=new _;console.debug("filterColumnMap",this.filterColumnMap),this.filterColumnMap.forEach(function(e,t){n._addCriteria(t,e,i)}),i.savePreset=this.isAsPresent,this.doneCriteria.emit(i)},e.decorators=[{type:x.Component,args:[{selector:"app-customer-filter",template:'\n\n    \x3c!-- popu customer filter content --\x3e\n    <div class="layout-cp-all ui-filter-block">\n        \x3c!-- chekboxes --\x3e\n        <div class="data-filter-item">\n                \x3c!-- title --\x3e\n                <div class="filter-title-block">\n                    <h3>{{language.customerType |translate }}</h3>\n                </div>\n                \x3c!-- end of title --\x3e\n                \x3c!-- checkbox --\x3e\n                <app-ui-collapse-group  [translateMore]="language.moreOption | translate">\n                    <ng-container textType="originContent">\n                        <ng-container *ngFor="let profileCode of customerType; index as j">\n                            <app-ui-form-checkbox2 (onClick)="onClick()" [isDisable]="false" [(nxValue)]="profileCode.isCheck">\n                                <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                            </app-ui-form-checkbox2>          \n                        </ng-container>\n                    </ng-container>            \n                </app-ui-collapse-group>\n                \x3c!-- end of checkbox --\x3e\n            </div>\n\n            <div class="data-filter-item">\n                    \x3c!-- title --\x3e\n                    <div class="filter-title-block">\n                        <h3>{{language.customerSource |translate }}</h3>\n                    </div>\n                    \x3c!-- end of title --\x3e\n                    \x3c!-- checkbox --\x3e\n                    <app-ui-collapse-group  [translateMore]="language.moreOption | translate">\n                        <ng-container textType="originContent">\n                            <ng-container *ngFor="let profileCode of customerDataSource; index as j">\n                                <app-ui-form-checkbox2 (onClick)="onClick()" [isDisable]="false" [(nxValue)]="profileCode.isCheck">\n                                    <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                </app-ui-form-checkbox2>          \n                            </ng-container>\n                        </ng-container>            \n                    </app-ui-collapse-group> \n                    \x3c!-- end of checkbox --\x3e\n                </div>\n        \n        \n        <div class="data-filter-item">\n            <div class="filter-title-block">\n                <h3>{{language.birthday |translate }}</h3>\n            </div>\n            <app-ui-collapse-group  [translateMore]="language.moreOption | translate">\n                    <ng-container textType="originContent">\n                        <ng-container *ngFor="let profileCode of birthday; index as j">\n                            \x3c!-- <ng-container *ngIf="j < 6"> --\x3e\n                                <app-ui-form-checkbox2 (onClick)="onClick()" [isDisable]="false" [(nxValue)]="profileCode.isCheck">\n                                    <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                </app-ui-form-checkbox2>\n                            \x3c!-- </ng-container>                 --\x3e\n                        </ng-container> \n                    </ng-container>\n\n                    \n                    \x3c!-- <ng-container *ngIf="birthday.length > 6">\n                        <ng-container textType="hideContnet">\n                            <ng-container *ngFor="let profileCode of birthday; index as j">\n                                <ng-container *ngIf="j >= 6">\n                                    <app-ui-form-checkbox2  (onClick)="onClick()" [(nxValue)]="profileCode.isCheck">\n                                        <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                    </app-ui-form-checkbox2>      \n                                </ng-container>                  \n                            </ng-container>                                        \n                        </ng-container>\n                        \n                    </ng-container> --\x3e\n                   \n            </app-ui-collapse-group>            \n        </div>\n\n\n        <div class="data-filter-item">\n                <div class="filter-title-block">\n                    <h3>{{language.ageRange |translate }}</h3>\n                </div>\n                <app-ui-collapse-group  [translateMore]="language.moreOption | translate">\n                        <ng-container textType="originContent">\n                            <ng-container *ngFor="let profileCode of age; index as j">\n                                \x3c!-- <ng-container *ngIf="j < 6"> --\x3e\n                                    <app-ui-form-checkbox2 (onClick)="onClick()" [isDisable]="false" [(nxValue)]="profileCode.isCheck">\n                                        <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                    </app-ui-form-checkbox2>\n                                \x3c!-- </ng-container>                 --\x3e\n                            </ng-container>\n                        </ng-container>\n    \n                        \x3c!-- <ng-container *ngIf="age.length > 6">\n                            <ng-container textType="hideContnet">\n                                <ng-container *ngFor="let profileCode of age; index as j">\n                                    <ng-container *ngIf="j >= 6">\n                                        <app-ui-form-checkbox2 (onClick)="onClick()" [(nxValue)]="profileCode.isCheck">\n                                            <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                        </app-ui-form-checkbox2>      \n                                    </ng-container>                  \n                                </ng-container>                                        \n                            </ng-container>\n                            \n                        </ng-container> --\x3e\n                        \n                </app-ui-collapse-group>\n                 \n    \n            </div>\n\n        <div class="data-filter-item">\n                <div class="filter-title-block">\n                    <h3>{{language.gender |translate }}</h3>\n                </div>\n                <app-ui-collapse-group  [translateMore]="language.moreOption | translate">\n                        <ng-container textType="originContent">\n                            <ng-container *ngFor="let profileCode of gender; index as j">\n                                <app-ui-form-checkbox2 (onClick)="onClick()" [isDisable]="false" [(nxValue)]="profileCode.isCheck">\n                                    <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                </app-ui-form-checkbox2>\n                            </ng-container>  \n                        </ng-container>\n                </app-ui-collapse-group>\n    \n            </div>\n\n        <div class="data-filter-item">\n                <div class="filter-title-block">\n                    <h3>{{language.annualIncomeYearNTD |translate }}</h3>\n                </div>\n                <app-ui-collapse-group  [translateMore]="language.moreOption | translate">\n                        <ng-container textType="originContent">\n                            <ng-container *ngFor="let profileCode of income; index as j">\n                                \x3c!-- <ng-container *ngIf="j < 6"> --\x3e\n                                    <app-ui-form-checkbox2 (onClick)="onClick()" [isDisable]="false" [(nxValue)]="profileCode.isCheck">\n                                        <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                    </app-ui-form-checkbox2>\n                                \x3c!-- </ng-container>                 --\x3e\n                            </ng-container> \n                        </ng-container>\n    \n                        \x3c!-- <ng-container *ngIf="income.length > 6">\n                            <ng-container textType="hideContnet">\n                                <ng-container *ngFor="let profileCode of income; index as j">\n                                    <ng-container *ngIf="j >= 6">\n                                        <app-ui-form-checkbox2 (onClick)="onClick()" [(nxValue)]="profileCode.isCheck">\n                                            <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                        </app-ui-form-checkbox2>      \n                                    </ng-container>                  \n                                </ng-container>                                        \n                            </ng-container>\n                            \n                        </ng-container> --\x3e\n                        \n                </app-ui-collapse-group>\n            </div>\n\n        <div class="data-filter-item">\n                <div class="filter-title-block">\n                    <h3>{{language.source |translate }}</h3>\n                </div>\n                <app-ui-collapse-group [translateMore]="language.moreOption | translate">\n                    <ng-container textType="originContent">\n                        <ng-container *ngFor="let profileCode of source; index as j">\n                            \x3c!-- <ng-container *ngIf="j < 6"> --\x3e\n                                <app-ui-form-checkbox2 (onClick)="onClick()" [isDisable]="false" [(nxValue)]="profileCode.isCheck">\n                                    <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                </app-ui-form-checkbox2>\n                            \x3c!-- </ng-container>                 --\x3e\n                        </ng-container>\n                    </ng-container>\n                    \n                    \x3c!-- <ng-container *ngIf="source.length > 6">\n                        <ng-container textType="hideContnet">\n                            <ng-container *ngFor="let profileCode of source; index as j">\n                                <ng-container *ngIf="j >= 6">\n                                    <app-ui-form-checkbox2 (onClick)="onClick()" [(nxValue)]="profileCode.isCheck">\n                                        <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                    </app-ui-form-checkbox2>      \n                                </ng-container>                  \n                            </ng-container>                                        \n                        </ng-container>\n                        \n                    </ng-container> --\x3e\n                   \n    \n                </app-ui-collapse-group>\n       \n            </div>\n\n\n        <div class="data-filter-item">\n            <div class="filter-title-block">\n                <h3>{{language.marriage |translate }}</h3>\n            </div>\n            <app-ui-collapse-group [translateMore]="language.moreOption | translate">\n                    <ng-container textType="originContent">\n                        <ng-container *ngFor="let profileCode of marriage; index as j">\n                            \x3c!-- <ng-container *ngIf="j < 6"> --\x3e\n                                <app-ui-form-checkbox2 (onClick)="onClick()" [isDisable]="false" [(nxValue)]="profileCode.isCheck">\n                                    <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                </app-ui-form-checkbox2>\n                            </ng-container>                \n                        \x3c!-- </ng-container>  --\x3e\n                    </ng-container>\n                  \x3c!-- <ng-container *ngIf="marriage.length > 6">\n                        <ng-container textType="hideContnet">\n                             <ng-container *ngFor="let profileCode of marriage; index as j">\n                               <ng-container *ngIf="j >= 6">\n                                    <app-ui-form-checkbox2 (onClick)="onClick()" [(nxValue)]="profileCode.isCheck">\n                                            <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                        </app-ui-form-checkbox2>      \n                                            \n                                </ng-container> \n                            </ng-container>   \n                        </ng-container>\n             \n                    </ng-container> --\x3e\n                   \n            </app-ui-collapse-group>\n        </div>\n\n        <div class="data-filter-item">\n                <div class="filter-title-block">\n                    <h3>{{language.children |translate }}</h3>\n                </div>\n                <app-ui-collapse-group  [translateMore]="language.moreOption | translate">\n                        <ng-container textType="originContent">\n                            <ng-container *ngFor="let profileCode of children; index as j">\n                                \x3c!-- <ng-container *ngIf="j < 6"> --\x3e\n                                    <app-ui-form-checkbox2 (onClick)="onClick()" [isDisable]="false" [(nxValue)]="profileCode.isCheck">\n                                        <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                    </app-ui-form-checkbox2>\n                                \x3c!-- </ng-container>                 --\x3e\n                            </ng-container> \n                        </ng-container>\n    \n                        \x3c!-- <ng-container *ngIf="children.length > 6">\n                            <ng-container textType="hideContnet">\n                                <ng-container *ngFor="let profileCode of children; index as j">\n                                    <ng-container *ngIf="j >= 6">\n                                        <app-ui-form-checkbox2  (onClick)="onClick()" [(nxValue)]="profileCode.isCheck">\n                                            <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                        </app-ui-form-checkbox2>      \n                                    </ng-container>                  \n                                </ng-container>                                        \n                            </ng-container>\n                            \n                        </ng-container> --\x3e\n                        \n                </app-ui-collapse-group>\n            </div>\n\n        <div class="data-filter-item">\n                <div class="filter-title-block">\n                    <h3>{{language.familiarity |translate }}</h3>\n                </div>\n                <app-ui-collapse-group  [translateMore]="language.moreOption | translate">\n                    <ng-container textType="originContent">\n                        <ng-container *ngFor="let profileCode of familiarity; index as j">\n                            \x3c!-- <ng-container *ngIf="familiarity.length < 6"> --\x3e\n                                <app-ui-form-checkbox2 (onClick)="onClick()" [isDisable]="false" [(nxValue)]="profileCode.isCheck">\n                                    <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                </app-ui-form-checkbox2>\n                            \x3c!-- </ng-container>                 --\x3e\n                        </ng-container>\n                    </ng-container>\n                    \x3c!-- <ng-container *ngIf="familiarity.length > 6">\n                        <ng-container textType="hideContnet">\n                            <ng-container *ngFor="let profileCode of familiarity; index as j">\n                                <ng-container *ngIf="j >= 6">\n                                    <app-ui-form-checkbox2 (onClick)="onClick()" [(nxValue)]="profileCode.isCheck">\n                                        <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                    </app-ui-form-checkbox2>      \n                                </ng-container>                  \n                            </ng-container>                                        \n                        </ng-container>\n                    </ng-container> --\x3e\n                   \n                </app-ui-collapse-group>\n                \n                \n            </div>\n            \n            \n            \n\n        <div class="data-filter-item">\n                <div class="filter-title-block">\n                    <h3>{{language.recentStatus |translate }}</h3>\n                </div>\n                <app-ui-collapse-group  [translateMore]="language.moreOption | translate">\n                        <ng-container textType="originContent">\n                            <ng-container *ngFor="let profileCode of recentStatus; index as j">\n                                \x3c!-- <ng-container *ngIf="j < 6"> --\x3e\n                                    <app-ui-form-checkbox2 (onClick)="onClick()" [isDisable]="false" [(nxValue)]="profileCode.isCheck">\n                                        <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                    </app-ui-form-checkbox2>\n                                \x3c!-- </ng-container> --\x3e\n                            </ng-container>\n                        </ng-container>\n                        \n                        \x3c!-- <ng-container *ngIf="recentStatus.length > 6">\n                            <ng-container textType="hideContnet">\n                                <ng-container *ngFor="let profileCode of recentStatus; index as j">\n                                    <ng-container *ngIf="j >= 6">\n                                        <app-ui-form-checkbox2 (onClick)="onClick()" [(nxValue)]="profileCode.isCheck">\n                                            <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                        </app-ui-form-checkbox2>      \n                                    </ng-container>                  \n                                </ng-container>                                        \n                            </ng-container>\n                            \n                        </ng-container> --\x3e\n                        \n                </app-ui-collapse-group>\n            </div>\n\n        <div class="data-filter-item">\n                <div class="filter-title-block">\n                    <h3>{{language.customerStatus |translate }}</h3>\n                </div>\n                <app-ui-collapse-group  [translateMore]="language.moreOption | translate">\n                        <ng-container textType="originContent">\n                            <ng-container *ngFor="let profileCode of manpa; index as j">\n                                \x3c!-- <ng-container *ngIf="j < 6"> --\x3e\n                                    <app-ui-form-checkbox2 (onClick)="onClick()" [isDisable]="false" [(nxValue)]="profileCode.isCheck">\n                                        <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                    </app-ui-form-checkbox2>\n                                \x3c!-- </ng-container>                 --\x3e\n                            </ng-container>\n                        </ng-container>\n                        \x3c!-- <ng-container *ngIf="manpa.length > 6">\n                            <ng-container textType="hideContnet">\n                                <ng-container *ngFor="let profileCode of manpa; index as j">\n                                    <ng-container *ngIf="j >= 6">\n                                        <app-ui-form-checkbox2 (onClick)="onClick()" [(nxValue)]="profileCode.isCheck">\n                                            <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                        </app-ui-form-checkbox2>      \n                                    </ng-container>                  \n                                </ng-container>                                        \n                            </ng-container>\n                            \n                        </ng-container> --\x3e\n                        \n                </app-ui-collapse-group>\n            </div>\n\n        <div class="data-filter-item">\n            <div class="filter-title-block">\n                <h3>{{language.contactFrequencyMonth |translate }}</h3>\n            </div>\n            <app-ui-collapse-group  [translateMore]="language.moreOption | translate">\n                    <ng-container textType="originContent">\n                        <ng-container *ngFor="let profileCode of contactFrequency; index as j">\n                            \x3c!-- <ng-container *ngIf="j < 6"> --\x3e\n                                <app-ui-form-checkbox2 (onClick)="onClick()" [isDisable]="false" [(nxValue)]="profileCode.isCheck">\n                                    <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                </app-ui-form-checkbox2>\n                            \x3c!-- </ng-container>                 --\x3e\n                        </ng-container> \n                    </ng-container>\n\n                    \x3c!-- <ng-container *ngIf="contactFrequency.length > 6">\n                        <ng-container textType="hideContnet">\n                            <ng-container *ngFor="let profileCode of contactFrequency; index as j">\n                                <ng-container *ngIf="j >= 6">\n                                    <app-ui-form-checkbox2 (onClick)="onClick()" [(nxValue)]="profileCode.isCheck">\n                                        <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                    </app-ui-form-checkbox2>      \n                                </ng-container>                  \n                            </ng-container>                                        \n                        </ng-container>\n                        \n                    </ng-container> --\x3e\n                   \n            </app-ui-collapse-group>\n            \n            \n        </div>\n\n        <div class="data-filter-item">\n                <div class="filter-title-block">\n                    <h3>{{language.possibility |translate }}</h3>\n                </div>\n                <app-ui-collapse-group  [translateMore]="language.moreOption | translate">\n                    <ng-container textType="originContent">\n                        <ng-container *ngFor="let profileCode of possibility; index as j">\n                            <app-ui-form-checkbox2  (onClick)="onClick()" [isDisable]="false" [(nxValue)]="profileCode.isCheck">\n                                <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                            </app-ui-form-checkbox2>          \n                        </ng-container>    \n                    </ng-container>    \n                </app-ui-collapse-group>\n      \n            </div>\n\n        <div class="data-filter-item">\n            <div class="filter-title-block">\n                <h3>{{language.completeness |translate }}</h3>\n            </div>\n            <app-ui-collapse-group  [translateMore]="language.moreOption | translate">\n                    <ng-container textType="originContent">\n                        <ng-container *ngFor="let profileCode of completeness; index as j">\n                            \x3c!-- <ng-container *ngIf="j < 6"> --\x3e\n                                <app-ui-form-checkbox2 (onClick)="onClick()" [isDisable]="false" [(nxValue)]="profileCode.isCheck">\n                                    <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                </app-ui-form-checkbox2>\n                            \x3c!-- </ng-container>                 --\x3e\n                        </ng-container> \n                    </ng-container>\n\n                    \x3c!-- <ng-container *ngIf="completeness.length > 6">\n                        <ng-container textType="hideContnet">\n                            <ng-container *ngFor="let profileCode of completeness; index as j">\n                                <ng-container *ngIf="j >= 6">\n                                    <app-ui-form-checkbox2  (onClick)="onClick()" [(nxValue)]="profileCode.isCheck">\n                                        <ng-container checkboxText="style1">{{profileCode.displayText}}</ng-container>\n                                    </app-ui-form-checkbox2>      \n                                </ng-container>                  \n                            </ng-container>                                        \n                        </ng-container>\n                        \n                    </ng-container> --\x3e\n                   \n            </app-ui-collapse-group>\n \n        </div>\n        \x3c!-- end of chekboxes --\x3e\n        \x3c!-- settin block --\x3e\n        <div class="setting-block">\n            <app-ui-form-checkbox [(nxValue)]="isAsPresent" [isDisable]="false" >\n                <ng-container checkboxText="style2">{{language.preset |translate }}</ng-container>\n            </app-ui-form-checkbox>\n        </div>\n        \x3c!-- end of setting block --\x3e\n    </div>\n    \x3c!-- end of popup customer filter content --\x3e\n',styles:["@keyframes fadein{from{opacity:0}to{opacity:1}}@-webkit-keyframes fadein{from{opacity:0}to{opacity:1}}:host{display:inline-block;width:100%;height:100%}.ui-filter-block{display:inline-block;width:100%;height:100%}.ui-filter-block .filter-title-block h3{font-size:1rem;font-weight:700;line-height:28px;padding-bottom:5px}.ui-filter-block .data-filter-item{margin-bottom:30px}.setting-block{display:block;width:100%;padding-bottom:30px}"]}]}],e.ctorParameters=function(){return[{type:I},{type:A.ProfileCodeService}]},e.propDecorators={clear:[{type:x.Input}],save:[{type:x.Input}],open:[{type:x.Input}],criteria:[{type:x.Input}],doneCriteria:[{type:x.Output}]},e}(),Y=function(){function e(){this.importContractMap=new Map,this.importCustomer=new x.EventEmitter,this.language=new A.Language}return e.prototype.ngOnInit=function(){},e.prototype.doImport=function(){var n=new Array;this.importContractMap.forEach(function(e,t){e.getItems.forEach(function(e){console.debug(e),e.isCheck&&n.push(e)})}),this.importCustomer.emit(n)},e.decorators=[{type:x.Component,args:[{selector:"app-customer-import",template:' \x3c!-- data --\x3e\n<ng-container *ngIf="importContractMap">\n    <ng-container *ngFor="let group of importContractMap | keyvalue">\n        <ng-container *ngIf="group.value.isShow">\n            <app-ui-list-data2>\n                <ng-container textType="title">{{group.key}}</ng-container>\n                \x3c!-- data --\x3e\n                <ng-container textType="data">\n                  <ng-container *ngFor="let item of group.value.getItems">\n                    <ng-container *ngIf="item.isShow">\n                            <app-ui-form-checkbox3 [isDisable]="false" [(nxValue)]="item.isCheck" (onClick)="doImport()">\n                              <ng-container checkboxText="style3">{{item.lastname + item.firstname}}</ng-container>\n                            </app-ui-form-checkbox3>\n                    </ng-container>                  \n                  </ng-container>          \n                </ng-container>\n                \x3c!-- end of data --\x3e\n              </app-ui-list-data2>          \n        </ng-container>\n    </ng-container>    \n</ng-container>\n\x3c!-- end of data --\x3e',styles:["@keyframes fadein{from{opacity:0}to{opacity:1}}@-webkit-keyframes fadein{from{opacity:0}to{opacity:1}}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={importContractMap:[{type:x.Input}],importCustomer:[{type:x.Output}]},e}(),$=function(){function e(){}return e.decorators=[{type:x.NgModule,args:[{imports:[u.CommonModule,n.NxFormfieldModule,i.NxDropdownModule,i.NxRadioModule,a.NxInputModule,i.NxMessageModule,r.NxDatefieldModule,r.NxNativeDateModule,s.NxProgressbarModule,i.NxModalModule,i.NxAccordionModule,l.NxGridModule,c.FormsModule,c.ReactiveFormsModule,A.CoreModule,o.CalendarModule,p.UIModule],declarations:[V,q,H,z,G,W,Y],providers:[u.DatePipe],exports:[V,q]}]}],e}(),Q=function(){function e(){this._customerList=[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this._customerList.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"customerList",{get:function(){return this._customerList},set:function(e){this._customerList=e},enumerable:!0,configurable:!0}),e.prototype.addCustomerItem=function(e){this._customerList.push(e)},e}(),J=function he(e,t,n,i,o,a){this.lastName=e,this.firstName=t,this.phoneNumber=n,this.email=i,this.address=o,this.birthday=a},Z=function ye(e){this.mobileCustomerList=e},K=function(){function e(e){this.daoFactory=e}return e.prototype.setClientID=function(e){this.clientID=e},e.prototype.setCustomerClientID=function(e){this.customerClientID=e},e.prototype.setNote=function(e){this.note=e},e.prototype.setNoteTime=function(e){this.noteTime=e},e.prototype.getAPIName=function(){return"addCustomerContactNote"},e.prototype.getMockPath=function(){return"./assets/mock/saveSuccess.json"},e.prototype.executeSQL=function(){var i=this;return m.Observable.create(function(t){var e=i.daoFactory.getDefaultTable("TW_LH_SD_Customer_Contact"),n=i.daoFactory.getDefaultDao();e!=undefined&&n!=undefined?(n=new A.ClientCustomDao(n),e.setValue("CustomerClientID",i.customerClientID),e.setValue("Note",i.note),e.setValue("NoteTime",i.noteTime.getTime()),i.clientID!=undefined?(e.addRestriction(new A.EqualRestriction("ClientID",[i.clientID])),n.updateByTable(e).subscribe(function(e){t.next(e),t.complete()})):n.insertByTable(e).subscribe(function(e){t.next(e),t.complete()})):(t.next(!1),t.complete())})},e}(),X=function(){function e(e){this.daoFactory=e}return e.prototype.setClientID=function(e){this._clientID=e},e.prototype.getAPIName=function(){return"getCustomerAutoDelete"},e.prototype.getMockPath=function(){return"./assets/mock/getCustomerAutoDelete.json"},e.prototype.executeSQL=function(){var i=this;return m.Observable.create(function(t){var e=i.daoFactory.getDefaultTable("TW_LH_SD_Message"),n=i.daoFactory.getDefaultDao();e!=undefined&&n!=undefined?(n=new A.ClientCustomDao(n),A.StringUtils.isNotEmpty(i._clientID)?e.addRestriction(new A.EqualRestriction("ClientID",[i._clientID])):e.addRestriction(new A.EqualRestriction("Status",["UnRead"])),e.addRestriction(new A.EqualRestriction("MessageCategory",["Customer"])),e.addRestriction(new A.EqualRestriction("MessageType",["AutoDelete"])),n.queryByTable(e).subscribe(function(e){t.next(e),t.complete()})):(t.next(!1),t.complete())})},e}(),ee=function(){function e(e){this.daoFactory=e}return e.prototype.setClientID=function(e){this.customerClientID=e},e.prototype.setPageInfo=function(e){this.pageInfo=e},e.prototype.getAPIName=function(){return"getCustomerContactNote"},e.prototype.getMockPath=function(){return"./assets/mock/getCustomerContactNote.json"},e.prototype.executeSQL=function(){var i=this;return m.Observable.create(function(t){var e=i.daoFactory.getDefaultTable("TW_LH_SD_Customer_Contact"),n=i.daoFactory.getDefaultDao();e!=undefined&&n!=undefined?(n=new A.ClientCustomDao(n),e.addRestriction(new A.EqualRestriction("CustomerClientID",[i.customerClientID])),e.addRestriction(new A.OrderByRestriction([{column:"NoteTime",order:"DESC"}])),e.addRestriction(new A.LimitRestriction([i.pageInfo.pageSize])),e.addRestriction(new A.OffsetRestriction([5*(i.pageInfo.page-1)])),console.debug(e),n.queryByTable(e).subscribe(function(e){console.debug(e),t.next(e),t.complete()})):(t.next(!1),t.complete())})},e}(),te=function(){function e(e){this.daoFactory=e}return Object.defineProperty(e.prototype,"clientID",{set:function(e){this._clientID=e},enumerable:!0,configurable:!0}),e.prototype.getAPIName=function(){return"deleteCustomer"},e.prototype.getMockPath=function(){return"./assets/mock/saveSuccess.json"},e.prototype.executeSQL=function(){var i=this;return m.Observable.create(function(t){var e=i.daoFactory.getDefaultTable("TW_LH_SD_Customer"),n=i.daoFactory.getDefaultDao();e!=undefined?(n=new A.ClientCustomDao(n),e.addRestriction(new A.EqualRestriction("ClientID",[i._clientID])),n.deleteByTable(e).subscribe(function(e){t.next(e),t.complete()})):(t.next(!1),t.complete())})},e}(),ne=function(){function e(e){this.daoFactory=e}return e.prototype.setContactClientID=function(e){this.contactClientID=e},e.prototype.getAPIName=function(){return"deleteCustomerContactNote"},e.prototype.getMockPath=function(){return"./assets/mock/saveSuccess.json"},e.prototype.executeSQL=function(){var i=this;return m.Observable.create(function(t){var e=i.daoFactory.getDefaultTable("TW_LH_SD_Customer_Contact"),n=i.daoFactory.getDefaultDao();e!=undefined&&n!=undefined?(n=new A.ClientCustomDao(n),e.addRestriction(new A.EqualRestriction("ClientID",[i.contactClientID])),n.deleteByTable(e).subscribe(function(e){t.next(e),t.complete()})):(t.next(!1),t.complete())})},e}(),ie=function(){function e(e){this.daoFactory=e}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),e.prototype.getAPIName=function(){return"getCustomerDetail"},e.prototype.getMockPath=function(){return"./assets/mock/getCustomerDetail.json"},e.prototype.executeSQL=function(){var o=this;console.log("customer Detail:execute SQL");var e=this.daoFactory.getDefaultTable("TW_LH_SD_Customer"),t=this.daoFactory.getDefaultDao();if(e==undefined||t==undefined)return m.of(!1);var a=new A.ClientCustomDao(t);return e.addRestriction(new A.EqualRestriction("ClientID",[this._id])),m.from(a.queryByTable(e).toPromise().then(function(e){var n=e,i=n.Body[0].ClientID,t=o.daoFactory.getDefaultTable("TW_LH_SD_Customer_Tel");return t?((t=t).addRestriction(new A.EqualRestriction("CustomerClientID",[i])),a.queryByTable(t).toPromise().then(function(e){var t=e.Body;return n.Body[0].tel=t,{customer:n,clientID:i}})):m.of({customer:n,clientID:i}).toPromise()}).then(function(e){var n=e.customer,i=e.clientID,t=o.daoFactory.getDefaultTable("TW_LH_SD_Customer_Email");return t?((t=t).addRestriction(new A.EqualRestriction("CustomerClientID",[i])),a.queryByTable(t).toPromise().then(function(e){var t=e.Body;return n.Body[0].email=t,{customer:n,clientID:i}})):m.of({customer:n,clientID:i}).toPromise()}).then(function(e){var n=e.customer,t=e.clientID,i=o.daoFactory.getDefaultTable("TW_LH_SD_Customer_Address");return i?((i=i).addRestriction(new A.EqualRestriction("CustomerClientID",[t])),a.queryByTable(i).toPromise().then(function(e){var t=e.Body;return n.Body[0].address=t,n})):m.of(n).toPromise()}))},e}(),oe=function(){function e(e){this.daoFactory=e}return e.prototype.setContactClientID=function(e){this.contactClientID=e},e.prototype.setNote=function(e){this.note=e},e.prototype.setNoteTime=function(e){this.noteTime=e},e.prototype.getAPIName=function(){return"editCustomerContactNote"},e.prototype.getMockPath=function(){return"./assets/mock/saveSuccess.json"},e.prototype.executeSQL=function(){var i=this;return m.Observable.create(function(t){var e=i.daoFactory.getDefaultTable("TW_LH_SD_Customer_Contact"),n=i.daoFactory.getDefaultDao();e!=undefined&&n!=undefined?(n=new A.ClientCustomDao(n),e.addRestriction(new A.EqualRestriction("ClientID",[i.contactClientID])),e.setValue("Note",i.note),e.setValue("NoteTime",i.noteTime.getTime()),n.updateByTable(e).subscribe(function(e){t.next(e),t.complete()})):(t.next(!1),t.complete())})},e}(),ae=function(){function e(e){this.daoFactory=e}return e.prototype.setClientID=function(e){this._clientID=e},e.prototype.getAPIName=function(){return"getCustomerOverTime"},e.prototype.getMockPath=function(){return"./assets/mock/getCustomerOverTime.json"},e.prototype.executeSQL=function(){var i=this;return m.Observable.create(function(t){var e=i.daoFactory.getDefaultTable("TW_LH_SD_Message"),n=i.daoFactory.getDefaultDao();e!=undefined&&n!=undefined?(n=new A.ClientCustomDao(n),A.StringUtils.isNotEmpty(i._clientID)?e.addRestriction(new A.EqualRestriction("ClientID",[i._clientID])):e.addRestriction(new A.EqualRestriction("Status",["UnRead"])),e.addRestriction(new A.EqualRestriction("MessageCategory",["Customer"])),e.addRestriction(new A.EqualRestriction("MessageType",["OverTime"])),n.queryByTable(e).subscribe(function(e){t.next(e),t.complete()})):(t.next(!1),t.complete())})},e}(),re=function(){function e(e){this.daoFactory=e}return e.prototype.getAPIName=function(){return"getCustomerFilterPreset"},e.prototype.getMockPath=function(){return"./assets/mock/getCustomerFilterPreset.json"},e.prototype.executeSQL=function(){var i=this;return m.Observable.create(function(t){var e=i.daoFactory.getDefaultDao();if(e!=undefined){var n=i.daoFactory.getDefaultTable("TW_LH_SD_Personal_Setting");n?(e=new A.ClientCustomDao(e),(n=n).addRestriction(new A.EqualRestriction("SettingID",["CustomerFilterSetting"])),e.queryByTable(n).subscribe(function(e){console.debug(e),t.next(e),t.complete()})):(t.next(!1),t.complete())}else t.next(!1),t.complete()})},e}(),se=function(){function e(e,t){this.daoFactory=e,this.profileCodeService=t,this._pageInfo=new A.PageInfo}return Object.defineProperty(e.prototype,"clientID",{set:function(e){this._queryClientID=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterCriteria",{set:function(e){this._filterCriteria=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageInfo",{set:function(e){this._pageInfo=e},enumerable:!0,configurable:!0}),e.prototype.getAPIName=function(){return"getCustomerList"},e.prototype.getMockPath=function(){return"./assets/mock/getCustomerList.json"},e.prototype.executeSQL=function(){var b=this;return m.Observable.create(function(t){var y=b.daoFactory.getDefaultTable("TW_LH_SD_Customer"),e=b.daoFactory.getDefaultDao();if(y!=undefined&&e!=undefined){if(e=new A.ClientCustomDao(e),b._filterCriteria!=undefined){console.debug("CustomerListAPI _filterCriteria",b._filterCriteria);var n=b._filterCriteria.keyword;if(console.debug("customerListAPI keyword",n),A.StringUtils.isNotEmpty(n)){var i=new A.ORCompoundRestriction([new A.LikeRestriction("FirstName",[n]),new A.LikeRestriction("LastName",[n])]);y.addRestriction(i)}b._filterCriteria.getFilterMap().forEach(function(a,e){var t,n;if(console.log(e,a),"Birthday"==e){var i=new Array,o=new Array;try{for(var r=E(a),s=r.next();!s.done;s=r.next()){var l=s.value;if("Today"==l){var c=new Date,p=c.getMonth()+1,u=c.getDate(),d=String(p),m=String(u);1==d.length&&(d="0"+d),1==m.length&&(m="0"+m),i.push(new A.AndCompoundRestriction([new A.EqualRestriction("BirthdayMonth",[d]),new A.EqualRestriction("BirthdayDate",[m])]))}else 1==l.length&&(l="0"+l),o.push(l)}}catch(h){t={error:h}}finally{try{s&&!s.done&&(n=r["return"])&&n.call(r)}finally{if(t)throw t.error}}0!=o.length&&i.push(new A.InRestriction("BirthdayMonth",o)),y.addRestriction(new A.ORCompoundRestriction(i))}else if("DataSource"==e){if(2!=a.length)"E"==a[0]?y.addRestriction(new A.EqualRestriction("DataSource",["OPUS"])):y.addRestriction(new A.NotEqualRestriction("DataSource",["OPUS"]))}else if("Completeness"==e){var g=b.profileCodeService.getCodeArray("Customer_Completeness"),f=new Array;g.forEach(function(e){var t=e.getCode();if(a.includes(t)){var n=JSON.parse(e.getArguments()),i=n.start,o=n.end;i/=100,o/=100,f.push(new A.AndCompoundRestriction([new A.GreaterOrEqualRestriction("Completeness",[i]),new A.LessOrEqualRestriction("Completeness",[o])]))}}),console.debug("completenessRestriction length",f.length),console.log("completenessRestriction:",f),0!=f.length&&(y.addRestriction(new A.ORCompoundRestriction(f)),console.log("customerObj:",y))}else y.addRestriction(new A.InRestriction(e,a))})}y.addRestriction(new A.OrderByRestriction([{column:"LastName",order:"ASC"}])),y.addRestriction(new A.LimitRestriction([b._pageInfo.pageSize])),y.addRestriction(new A.OffsetRestriction([10*(b._pageInfo.page-1)])),A.StringUtils.isNotEmpty(b._queryClientID)&&y.addRestriction(new A.EqualRestriction("ClientID",[b._queryClientID])),e.queryByTable(y).subscribe(function(e){t.next(e),t.complete()})}else t.next(!1),t.complete()})},e}(),le=function(){function e(e,t){this.daoFactory=e,this.customerUtils=t}return e.prototype.setDetail=function(e){this.customerDetail=e},e.prototype.getAPIName=function(){return"saveCustomerDetail"},e.prototype.getMockPath=function(){return"./assets/mock/saveSuccess.json"},e.prototype.executeSQL=function(){var I=this;return m.Observable.create(function(t){var e,n,i,o,a,r,s=I.daoFactory.getDefaultDao();if(s!=undefined){var l=I.daoFactory.getDefaultTable("TW_LH_SD_Customer");if(l){s=new A.ClientCustomDao(s),l=l;var c=I.customerDetail.birthday;if(null!=c&&c!=undefined){l.setValue("BirthdayYear",c.getFullYear());var p=(c.getMonth()+1).toString();p.length<2&&(p="0"+p.toString()),l.setValue("BirthdayMonth",p);var u=c.getDate().toString();u.length<2&&(u="0"+u.toString()),l.setValue("BirthdayDate",u),l.setValue("BirthDayTimeStamp",new Date(2e3,c.getMonth(),c.getDate()).getTime())}l.setValue("ClientID",I.customerDetail.clientID),l.setValue("LastName",I.customerDetail.lastName),l.setValue("FirstName",I.customerDetail.firstName),l.setValue("Occupation",I.customerDetail.occupation),l.setValue("Company",I.customerDetail.company),l.setValue("AgeRange",I.customerDetail.ageRange),l.setValue("Gender",I.customerDetail.gender),l.setValue("Income",I.customerDetail.income),l.setValue("Source",I.customerDetail.source),l.setValue("Marriage",I.customerDetail.marriage),l.setValue("Children",I.customerDetail.children),l.setValue("Familiarity",I.customerDetail.familiarity),l.setValue("RecentStatus",I.customerDetail.recentStatus),l.setValue("MANPA",I.customerDetail.manpa),l.setValue("ContactFrequancy",I.customerDetail.contactFrequancy),l.setValue("Possibility",I.customerDetail.possibility),l.setValue("IsFollow",I.customerDetail.isFollow?"Y":"N"),I.customerUtils.setCustomerDefaultValue(l),I.customerUtils.countCompleteness(l,I.customerDetail.tels.length,I.customerDetail.emails.length,I.customerDetail.addresses.length),console.debug("insertCustomer",l),""==l.getValue("ClientID")?s.transactionInsert(l):(l.addRestriction(new A.EqualRestriction("ClientID",[l.getValue("ClientID")])),s.transactionUpdate(l),s.transactionSqlCommand(new A.SQLCommand("delete from TW_LH_SD_Customer_Tel where CustomerClientID = ? ",[l.getValue("ClientID")])),s.transactionSqlCommand(new A.SQLCommand("delete from TW_LH_SD_Customer_Email where CustomerClientID = ? ",[l.getValue("ClientID")])),s.transactionSqlCommand(new A.SQLCommand("delete from TW_LH_SD_Customer_Address where CustomerClientID = ? ",[l.getValue("ClientID")])));try{for(var d=E(I.customerDetail.tels),m=d.next();!m.done;m=d.next()){var g=m.value,f=I.daoFactory.getDefaultTable("TW_LH_SD_Customer_Tel");f&&(""==g.telType&&(g.telType="TelHome"),(f=f).setValue("CustomerClientID",l.getValue("ClientID")),f.setValue("TelType",g.telType),f.setValue("Tel",g.tel),s.transactionInsert(f))}}catch(w){e={error:w}}finally{try{m&&!m.done&&(n=d["return"])&&n.call(d)}finally{if(e)throw e.error}}try{for(var h=E(I.customerDetail.emails),y=h.next();!y.done;y=h.next()){var b=y.value,x=I.daoFactory.getDefaultTable("TW_LH_SD_Customer_Email");x&&(""==b.emailType&&(b.emailType="MailHome"),(x=x).setValue("CustomerClientID",l.getValue("ClientID")),x.setValue("EmailType",b.emailType),x.setValue("Email",b.email),s.transactionInsert(x))}}catch(T){i={error:T}}finally{try{y&&!y.done&&(o=h["return"])&&o.call(h)}finally{if(i)throw i.error}}try{for(var C=E(I.customerDetail.addresses),v=C.next();!v.done;v=C.next()){var k=v.value,D=I.daoFactory.getDefaultTable("TW_LH_SD_Customer_Address");D&&(""==k.addressType&&(k.addressType="AddressTypeHome"),(D=D).setValue("CustomerClientID",l.getValue("ClientID")),D.setValue("AddressType",k.addressType),D.setValue("Country",k.country),D.setValue("City",k.city),D.setValue("Area",k.area),D.setValue("Zipcode",k.zipcode),D.setValue("Address",k.address),s.transactionInsert(D))}}catch(S){a={error:S}}finally{try{v&&!v.done&&(r=C["return"])&&r.call(C)}finally{if(a)throw a.error}}s.runTransaction().subscribe(function(e){t.next(e),t.complete()})}else t.next(!1),t.complete()}else t.next(!1),t.complete()})},e}(),ce=function(){function e(e){this.daoFactory=e}return e.prototype.setFilterCriteria=function(e){this._criteria=e},e.prototype.getAPIName=function(){return"saveCustomerFilterPreset"},e.prototype.getMockPath=function(){return"./assets/mock/saveSuccess.json"},e.prototype.executeSQL=function(){var i=this;return m.Observable.create(function(t){var e=i.daoFactory.getDefaultDao();if(e!=undefined){var n=i.daoFactory.getDefaultTable("TW_LH_SD_Personal_Setting");n?(e=new A.ClientCustomDao(e),(n=n).addRestriction(new A.EqualRestriction("SettingID",["CustomerFilterSetting"])),n.setValue("SettingVal",JSON.stringify(i._criteria.toPresetJSON())),e.updateByTable(n).subscribe(function(e){t.next(e),t.complete()})):(t.next(!1),t.complete())}else t.next(!1),t.complete()})},e}(),pe=function(){function e(e){this.daoFactory=e}return e.prototype.setClientID=function(e){this.clientID=e},e.prototype.getAPIName=function(){return"getCustomerTel"},e.prototype.getMockPath=function(){return"./assets/mock/getCustomerTel.json"},e.prototype.executeSQL=function(){var i=this;return m.Observable.create(function(t){var e=i.daoFactory.getDefaultTable("TW_LH_SD_Customer_Tel"),n=i.daoFactory.getDefaultDao();e!=undefined&&n!=undefined?(n=new A.ClientCustomDao(n),e.addRestriction(new A.EqualRestriction("CustomerClientID",[i.clientID])),n.queryByTable(e).subscribe(function(e){console.debug(e),t.next(e),t.complete()})):(t.next(!1),t.complete())})},e}(),ue=function(){function e(e){this.daoFactory=e}return e.prototype.setClient=function(e){this._clientID=e},e.prototype.setIsFollow=function(e){this._isFollow=e},e.prototype.getAPIName=function(){return"updateCustomerFollowStatus"},e.prototype.getMockPath=function(){return"./assets/mock/saveSuccess.json"},e.prototype.executeSQL=function(){var i=this;return m.Observable.create(function(t){var e=i.daoFactory.getDefaultDao();if(e!=undefined){var n=i.daoFactory.getDefaultTable("TW_LH_SD_Customer");n?(e=new A.ClientCustomDao(e),(n=n).addRestriction(new A.EqualRestriction("ClientID",[i._clientID])),n.setValue("IsFollow",i._isFollow?"Y":"N"),e.updateByTable(n).subscribe(function(e){t.next(e),t.complete()})):(t.next(!1),t.complete())}else t.next(!1),t.complete()})},e}(),de=function(){function e(e,t){this.daoFactory=e,this.customerUtils=t}return e.prototype.setItems=function(e){this.items=e},e.prototype.getAPIName=function(){return"importContact"},e.prototype.getMockPath=function(){return"./assets/mock/saveSuccess.json"},e.prototype.executeSQL=function(){var N=this;return m.Observable.create(function(t){var e,n,i,o,a,r,s=N.daoFactory.getDefaultDao();if(s!=undefined){s=new A.ClientCustomDao(s);try{for(var l=E(N.items),c=l.next();!c.done;c=l.next()){var p=c.value,u=N.daoFactory.getDefaultTable("TW_LH_SD_Customer");u.setValue("LastName",p.lastname),u.setValue("FirstName",p.firstname),u.setValue("IsFollow","N");var d=p.birthday;null!=d&&(u.setValue("BirthdayYear",d.getFullYear),u.setValue("BirthdayMonth",d.getMonth),u.setValue("BirthdayDate",d.getDate)),N.customerUtils.setCustomerDefaultValue(u),N.customerUtils.countCompleteness(u,p.phones.length,p.emails.length,p.address.length),s.transactionInsert(u);try{for(var m=E(p.phones),g=m.next();!g.done;g=m.next()){var f=g.value,h="TelHome";"work"==f.type?h="TelWork":"mobile"==f.type&&(h="TelMobile");var y=N.daoFactory.getDefaultTable("TW_LH_SD_Customer_Tel");y&&((y=y).setValue("CustomerClientID",u.getValue("ClientID")),y.setValue("TelType",h),y.setValue("Tel",f.number),s.transactionInsert(y))}}catch(I){i={error:I}}finally{try{g&&!g.done&&(o=m["return"])&&o.call(m)}finally{if(i)throw i.error}}var b=3;p.emails.length<3&&(b=p.emails.length);for(var x=0;x<b;x++){var C=p.emails[x],v=N.daoFactory.getDefaultTable("TW_LH_SD_Customer_Email");v&&((v=v).setValue("CustomerClientID",u.getValue("ClientID")),v.setValue("EmailType","MailHome"),v.setValue("Email",C),s.transactionInsert(v))}try{for(var k=E(p.address),D=k.next();!D.done;D=k.next()){var w=D.value,T="AddressTypeHome";"work"==w.type&&(T="AddressTypeWork");var S=N.daoFactory.getDefaultTable("TW_LH_SD_Customer_Address");S&&((S=S).setValue("CustomerClientID",u.getValue("ClientID")),S.setValue("AddressType",T),S.setValue("Zipcode",w.code),S.setValue("Address",w.address),s.transactionInsert(S))}}catch(P){a={error:P}}finally{try{D&&!D.done&&(r=k["return"])&&r.call(k)}finally{if(a)throw a.error}}}}catch(_){e={error:_}}finally{try{c&&!c.done&&(n=l["return"])&&n.call(l)}finally{if(e)throw e.error}}s.runTransaction().subscribe(function(e){t.next(e),t.complete()})}else t.next(!1),t.complete()})},e}(),me=function(){function e(e){this._DaoFactory=e}return Object.defineProperty(e.prototype,"targetDate",{set:function(e){this._targetDate=d.setYear(e,2e3),this._subNDayTimeStamp=d.subDays(this._targetDate,this._subN).getTime(),this._addNDayTimeStamp=d.addDays(this._targetDate,this._addN).getTime(),d.getYear(this._targetDate)==d.getYear(this._subNDayTimeStamp)&&d.getYear(this._targetDate)==d.getYear(this._addNDayTimeStamp)?this.isRangeCrossYear=!1:(this._subNDayTimeStamp=d.setYear(this._subNDayTimeStamp,2e3).getTime(),this._addNDayTimeStamp=d.setYear(this._addNDayTimeStamp,2e3).getTime(),this.isRangeCrossYear=!0),console.warn(this._subN,"  subDate:  ",this._subNDayTimeStamp),console.warn(this._addN,"  addDate:  ",this._addNDayTimeStamp)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subN",{set:function(e){this._subN=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addN",{set:function(e){this._addN=e},enumerable:!0,configurable:!0}),e.prototype.getAPIName=function(){return"getCustomerBirthdayList"},e.prototype.getMockPath=function(){return"./assets/mock/getCustomerBirthday.json"},e.prototype.executeSQL=function(){var i=this;return m.Observable.create(function(t){var e=i._DaoFactory.getDefaultTable("TW_LH_SD_Customer"),n=i._DaoFactory.getDefaultDao();e!=undefined&&n!=undefined?(n=new A.ClientCustomDao(n),i.isRangeCrossYear?e.addRestriction(new A.ORCompoundRestriction([new A.GreaterOrEqualRestriction("BirthDayTimeStamp",[i._subNDayTimeStamp]),new A.LessOrEqualRestriction("BirthDayTimeStamp",[i._addNDayTimeStamp])])):(e.addRestriction(new A.GreaterOrEqualRestriction("BirthDayTimeStamp",[i._subNDayTimeStamp])),e.addRestriction(new A.LessOrEqualRestriction("BirthDayTimeStamp",[i._addNDayTimeStamp]))),e.addRestriction(new A.OrderByRestriction([{column:"LastName",order:"ASC"}])),n.queryByTable(e).subscribe(function(e){t.next(e),t.complete()})):(t.next(!1),t.complete())})},e}(),ge=function(){function e(e){this.daoFactory=e}return e.prototype.setMessageType=function(e){this._messageType=e},e.prototype.setMessageDataCategory=function(e){this._messageDataCategory=e},e.prototype.getAPIName=function(){return"updateDashboardToRead"},e.prototype.getMockPath=function(){return"./assets/mock/saveSuccess.json"},e.prototype.executeSQL=function(){var i=this;return m.Observable.create(function(t){var e=i.daoFactory.getDefaultDao();if(e!=undefined){var n=i.daoFactory.getDefaultTable("TW_LH_SD_Message");n?(e=new A.ClientCustomDao(e),(n=n).addRestriction(new A.EqualRestriction("MessageCategory",[i._messageDataCategory])),n.addRestriction(new A.EqualRestriction("MessageType",[i._messageType])),n.setValue("Status","Reading"),e.updateByTable(n).subscribe(function(e){t.next(e),t.complete()})):(t.next(!1),t.complete())}else t.next(!1),t.complete()})},e}();e.CustomersModule=$,e.CustomersComponent=V,e.CustomerContactListComponent=G,e.CustomerDetailComponent=z,e.CustomerEditComponent=q,e.CustomerFilterComponent=W,e.CustomerImportComponent=Y,e.CustomerListComponent=H,e.CustomerConfirmAction=N,e.CustomerDetailResult=U,e.CustomerFilterCriteria=_,e.CustomerFilterPreset=P,e.CustomerImportGroup=F,e.syncCustomerToken=M,e.storeCustomerToken=O,e.customerActionToken=L,e.showCustomerRuleToken=R,e.CUSTOMER_STATE=B,e.CustomerAddress=D,e.CustomerAlertItem=k,e.CustomerContactNote=b,e.CustomerDetail=C,e.CustomerEmail=w,e.CustomerItem=v,e.CustomerList=Q,e.CustomerTel=T,e.MobileCustomerItem=J,e.MobileCustomerList=Z,e.CustomerBirthday=S,e.CustomerService=I,e.CustomerUtils=j,e.CustomerAddContactNoteAPI=K,e.CustomerAutoDeleteAPI=X,e.CustomerContactNoteAPI=ee,e.CustomerDeleteAPI=te,e.CustomerDeleteContactNoteAPI=ne,e.CustomerDetailAPI=ie,e.CustomerEditContactNoteAPI=oe,e.CustomerEditOvertimeAPI=ae,e.CustomerGetPresetAPI=re,e.CustomerListAPI=se,e.CustomerSaveDetailAPI=le,e.CustomerSavePresetAPI=ce,e.CustomerTelAPI=pe,e.CustomerUpdateFollowAPI=ue,e.ImportContactAPI=de,e.CustomerBirthdayListAPI=me,e.DashboardUpdateToReadAPI=ge,e.o=G,e.n=z,e.k=q,e.p=W,e.q=Y,e.l=H,e.a=V,e.d=L,e.e=R,e.c=O,e.b=M,e.f=I,e.g=j,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=allianzSND-customer.umd.min.js.map