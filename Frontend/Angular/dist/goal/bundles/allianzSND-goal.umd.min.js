!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@allianzSND/ui"),require("uuid"),require("rxjs"),require("@angular/core"),require("@allianzSND/core")):"function"==typeof define&&define.amd?define("@allianzSND/goal",["exports","@angular/common","@allianzSND/ui","uuid","rxjs","@angular/core","@allianzSND/core"],t):t((e.allianzSND=e.allianzSND||{},e.allianzSND.goal={}),e.ng.common,e.ui,e.uuid,e.rxjs,e.ng.core,e.i1)}(this,function(e,t,n,u,a,r,j){"use strict";var o=new r.InjectionToken("goalSettingStep"),i=new r.InjectionToken("GoalValidExtension"),s=new r.InjectionToken("goalSettingShowRule"),c=new r.InjectionToken("GoalSubmitExtension"),l=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[t.CommonModule,j.CoreModule,n.UIModule],declarations:[],exports:[]}]}],e}(),p=function(){function e(e){this.daoFactory=e,this._dataYear=-1}return e.prototype.setDataYear=function(e){this._dataYear=e},e.prototype.getAPIName=function(){return"getGoalSettingGoalSetting"},e.prototype.getMockPath=function(){return 2019==this._dataYear?"./assets/mock/getGoalSettingGoalSetting_2019.json":2020==this._dataYear?"./assets/mock/getGoalSettingGoalSetting_2020.json":-1==this._dataYear?"./assets/mock/getGoalSettingGoalSetting_all.json":(console.warn("yearStatus dataYear not match"),"")},e.prototype.executeSQL=function(){var r=this;return console.log("queryByTable: getGoalSettingGoalSetting this._dataYear:",this._dataYear),a.Observable.create(function(t){var e=r.daoFactory.getDefaultDao();if(e!=undefined){var n=r.daoFactory.getDefaultTable("TW_LH_SD_VW_Goal_Setting");n?(-1!=r._dataYear&&n.addRestriction(new j.EqualRestriction("DataYear",[r._dataYear])),(e=new j.ClientCustomDao(e)).queryByTable(n).subscribe(function(e){console.log("queryByTable overviewYearStatus: ",JSON.stringify(e)),t.next(e),t.complete()})):(t.next(!1),t.complete())}else t.next(!1),t.complete()})},e}(),g=function(){function e(e){this.daoFactory=e,this._dataYear=-1}return e.prototype.setDataYear=function(e){this._dataYear=e},e.prototype.getAPIName=function(){return"getGoalSettingYearConfig"},e.prototype.getMockPath=function(){return 2019==this._dataYear?"./assets/mock/getGoalSettingYearConfig_2019.json":2020==this._dataYear?"./assets/mock/getGoalSettingYearConfig_2020.json":-1==this._dataYear?"./assets/mock/getGoalSettingYearConfig_all.json":(console.warn("yearConfig dataYear not match"),"")},e.prototype.executeSQL=function(){var r=this;return a.Observable.create(function(t){var e=r.daoFactory.getDefaultDao();if(e!=undefined){var n=r.daoFactory.getDefaultTable("TW_LH_SD_VW_Year_Config");n?(-1!=r._dataYear&&n.addRestriction(new j.EqualRestriction("DataYear",[r._dataYear])),n.addRestriction(new j.OrderByRestriction([{column:"DataYear",order:"ASC"}])),(e=new j.ClientCustomDao(e)).queryByTable(n).subscribe(function(e){console.warn("queryByTable yearConfig: ",JSON.stringify(e)),t.next(e),t.complete()})):(t.next(!1),t.complete())}else t.next(!1),t.complete()})},e}(),f=function(){function e(e){this.daoFactory=e}return e.prototype.setDataYear=function(e){this._dataYear=e},e.prototype.getAPIName=function(){return"getAgencyPlanMain"},e.prototype.getMockPath=function(){return"./assets/mock/getAgencyPlanMainMock.json"},e.prototype.executeSQL=function(){var r=this;return console.log("dataYear",this._dataYear),a.Observable.create(function(t){var e=r.daoFactory.getDefaultTable("TW_LH_SD_VW_Agency_Plan_Main"),n=r.daoFactory.getDefaultDao();e!=undefined&&n!=undefined?(n=new j.ClientCustomDao(n),e.addRestriction(new j.EqualRestriction("DataYear",[r._dataYear])),n.queryByTable(e).subscribe(function(e){console.log("resp",e),t.next(e),t.complete()})):(t.next(!1),t.complete())})},e}(),h=function(){function e(e){this.daoFactory=e}return e.prototype.setDataYear=function(e){this._dataYear=e},e.prototype.getAPIName=function(){return"getAgencyPlanDetail"},e.prototype.getMockPath=function(){return"./assets/mock/getAgencyPlanDetail.json"},e.prototype.executeSQL=function(){var r=this;return a.Observable.create(function(t){var e=r.daoFactory.getDefaultTable("TW_LH_SD_VW_Agency_Detail_Data"),n=r.daoFactory.getDefaultDao();e!=undefined&&n!=undefined?(n=new j.ClientCustomDao(n),e.addRestriction(new j.EqualRestriction("DataYear",[r._dataYear])),n.queryByTable(e).subscribe(function(e){console.log(e),t.next(e),t.complete()})):(t.next(!1),t.complete())})},e}(),d=function(){function e(e){this.daoFactory=e}return e.prototype.setDataYear=function(e){this._dataYear=e},e.prototype.getAPIName=function(){return"getGoalSettingExpected"},e.prototype.getMockPath=function(){return"./assets/mock/getGoalSettingExpected.json"},e.prototype.executeSQL=function(){var r=this;return a.Observable.create(function(t){var e=r.daoFactory.getDefaultTable("TW_LH_SD_VW_Goal_Setting_Expected"),n=r.daoFactory.getDefaultDao();e!=undefined&&n!=undefined?(n=new j.ClientCustomDao(n),e.addRestriction(new j.EqualRestriction("DataYear",[r._dataYear])),n.queryByTable(e).subscribe(function(e){console.log(e),t.next(e),t.complete()})):(t.next(!1),t.complete())})},e}(),y=function(){function e(e){this.daoFactory=e,this._dataYear=-1}return e.prototype.setDataYear=function(e){this._dataYear=e},e.prototype.getAPIName=function(){return"getGoalSettingValue"},e.prototype.getMockPath=function(){return 2019==this._dataYear?"./assets/mock/getGoalSettingValue_2019.json":2020==this._dataYear?"./assets/mock/getGoalSettingValue_2020.json":(console.warn("GoalSettingGetValueAPI mock path not found"),"")},e.prototype.executeSQL=function(){var r=this;return a.Observable.create(function(t){console.log("queryByTable: goalSettingValue this._dataYear:",r._dataYear);var e=r.daoFactory.getDefaultDao();if(e!=undefined){var n=r.daoFactory.getDefaultTable("TW_LH_SD_Goal_Setting_Value");n?(e=new j.ClientCustomDao(e),-1!=r._dataYear&&n.addRestriction(new j.EqualRestriction("DataYear",[r._dataYear])),e.queryByTable(n).subscribe(function(e){console.log("queryByTable: goalSettingValue",e),t.next(e),t.complete()})):(t.next(!1),t.complete())}else t.next(!1),t.complete()})},e}();function S(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(o=e[s])&&(i=(a<3?o(i):3<a?o(t,n,i):o(t,n))||i);return 3<a&&i&&Object.defineProperty(t,n,i),i}function b(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function m(t,i,s,u){return new(s||(s=Promise))(function(e,n){function r(e){try{a(u.next(e))}catch(t){n(t)}}function o(e){try{a(u["throw"](e))}catch(t){n(t)}}function a(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,o)}a((u=u.apply(t,i||[])).next())})}function q(r,o){var a,i,s,e,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),"throw":t(1),"return":t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function n(e){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,i&&(s=2&e[0]?i["return"]:e[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=o.call(r,u)}catch(t){e=[6,t],i=0}finally{a=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([t,e])}}}function L(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a["return"])&&n.call(a)}finally{if(o)throw o.error}}return i}var _=function(){function e(e){this.daoFactory=e,this._expectedRecruitment={},this._indirectRecruitment=0}return e.prototype.setExpectedRecruitment=function(e){this._expectedRecruitment=e},e.prototype.setIndirectRecruitment=function(e){this._indirectRecruitment=e},e.prototype.getAPIName=function(){return"setGoalSettingExpected"},e.prototype.getMockPath=function(){return"./assets/mock/saveSuccess.json"},e.prototype.executeSQL=function(){var e=this;return a.Observable.create(function(s){return m(e,void 0,void 0,function(){var t,n,r,o,a,i;return q(this,function(e){switch(e.label){case 0:return t=this.daoFactory.getDefaultTable("TW_LH_SD_Goal_Setting_Expected"),n=this.daoFactory.getDefaultTable("TW_LH_SD_Goal_Setting_Expected_Extension"),r=this.daoFactory.getDefaultTable("TW_LH_SD_Agency_Plan_Main"),o=this.daoFactory.getDefaultDao(),t==undefined||r==undefined||o==undefined?[3,2]:(o=new j.ClientCustomDao(o),r.addRestriction(new j.EqualRestriction("DataYear",[this._expectedRecruitment.DataYear])),r.addRestriction(new j.EqualRestriction("DataType",["Recruitment"])),r.setValue("MonthPlan",[this._expectedRecruitment.RecruitmentTotal+this._indirectRecruitment]),t.setValue("Q1",this._expectedRecruitment.Q1),t.setValue("Q2",this._expectedRecruitment.Q2),t.setValue("Q3",this._expectedRecruitment.Q3),t.setValue("Q4",this._expectedRecruitment.Q4),t.setValue("FYFC",this._expectedRecruitment.FYFC),t.setValue("ANP",this._expectedRecruitment.ANP),t.setValue("DataYear",this._expectedRecruitment.DataYear),t.addRestriction(new j.EqualRestriction("DataYear",[this._expectedRecruitment.DataYear])),[4,o.queryByTable(t).toPromise()]);case 1:return a=e.sent(),console.log("dataYear: ",this._expectedRecruitment.DataYear," goalExpectedResp:",a),0<a.Body.length?o.transactionUpdate(t):(i=u.v4(),t.setValue("ClientID",i),n.setValue("ClientID",i),o.transactionInsert(t),o.transactionInsert(n)),o.transactionUpdate(r),o.runTransaction().subscribe(function(e){s.next(e),s.complete()}),[3,3];case 2:s.next(!1),s.complete(),e.label=3;case 3:return[2]}})})})},e}(),P=function(){function e(e){this.daoFactory=e,this._dataYear=-1}return e.prototype.setDataYear=function(e){this._dataYear=e},e.prototype.getAPIName=function(){return"getGoalSettingPlan"},e.prototype.getMockPath=function(){return 2019==this._dataYear?"./assets/mock/getGoalSettingPlan_2019.json":2020==this._dataYear?"./assets/mock/getGoalSettingPlan_2020.json":(console.warn("datYear not match mock path"),"")},e.prototype.executeSQL=function(){var r=this;return a.Observable.create(function(t){var e=r.daoFactory.getDefaultDao();if(e!=undefined){var n=r.daoFactory.getDefaultTable("TW_LH_SD_VW_Goal_Setting_Plan_Value");n?(-1!=r._dataYear&&n.addRestriction(new j.EqualRestriction("DataYear",[r._dataYear])),(e=new j.ClientCustomDao(e)).queryByTable(n).subscribe(function(e){console.warn("queryByTable Goal_Setting_Plan_Value: ",JSON.stringify(e)),t.next(e),t.complete()})):(t.next(!1),t.complete())}else t.next(!1),t.complete()})},e}(),A=function(){function e(e){this.daoFactory=e,this._dataYear=-1}return e.prototype.setDataYear=function(e){this._dataYear=e},e.prototype.getAPIName=function(){return"getGoalSettingActualValue"},e.prototype.getMockPath=function(){return 2019==this._dataYear?"./assets/mock/getGoalSettingActualValue_2019.json":2020==this._dataYear?"./assets/mock/getGoalSettingActualValue_2020.json":(console.warn("dataYear not match mock path"),"")},e.prototype.executeSQL=function(){var r=this;return a.Observable.create(function(t){var e=r.daoFactory.getDefaultDao();if(e!=undefined){var n=r.daoFactory.getDefaultTable("TW_LH_SD_VW_Actual_Value");n?(-1!=r._dataYear&&n.addRestriction(new j.EqualRestriction("DataYear",[r._dataYear])),(e=new j.ClientCustomDao(e)).queryByTable(n).subscribe(function(e){console.warn("queryByTable Goal_Setting_Actual_Value: ",e),t.next(e),t.complete()})):(t.next(!1),t.complete())}else t.next(!1),t.complete()})},e}(),v={DAILY:"Daily",WEEKLY:"Weekly",MONTHLY:"Monthly"},F={STEP1:1,STEP2:2,STEP3:3,STEP4:4,STEP5:5};F[F.STEP1]="STEP1",F[F.STEP2]="STEP2",F[F.STEP3]="STEP3",F[F.STEP4]="STEP4",F[F.STEP5]="STEP5";var T={SET_NEXT_YESR:0,ADGUST_GOAL:1};T[T.SET_NEXT_YESR]="SET_NEXT_YESR",T[T.ADGUST_GOAL]="ADGUST_GOAL";var Y=function(){function e(){}return Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(e){this._step=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDataLegal",{get:function(){return this._isDataLegal},set:function(e){this._isDataLegal=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",Number)],e.prototype,"_step",void 0),S([j.Required,b("design:type",Boolean)],e.prototype,"_isDataLegal",void 0),e=S([j.Bean("ValidationState"),b("design:paramtypes",[])],e)}(),D=function(){function e(e,t){this._state=e,this._data=t}return Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(e){this._state=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),e}(),V=function(){function e(){}return Object.defineProperty(e.prototype,"FYFC",{get:function(){return this._FYFC},set:function(e){this._FYFC=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AnnualConvention",{get:function(){return this._AnnualConvention},set:function(e){this._AnnualConvention=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MDRT",{get:function(){return this._MDRT},set:function(e){this._MDRT=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PromotionPlan",{get:function(){return this._PromotionPlan},set:function(e){this._PromotionPlan=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Actual",{get:function(){return this._Actual},set:function(e){this._Actual=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FYFCNowToYearEnd",{get:function(){return this._FYFCNowToYearEnd},set:function(e){this._FYFCNowToYearEnd=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ActivityFYFC",{get:function(){return this._ActivityFYFC},set:function(e){this._ActivityFYFC=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ActivityDays",{get:function(){return this._ActivityDays},set:function(e){this._ActivityDays=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",String)],e.prototype,"_FYFC",void 0),S([j.Required,b("design:type",String)],e.prototype,"_AnnualConvention",void 0),S([j.Required,b("design:type",String)],e.prototype,"_MDRT",void 0),S([j.Required,b("design:type",String)],e.prototype,"_PromotionPlan",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Actual",void 0),S([j.Required,b("design:type",String)],e.prototype,"_FYFCNowToYearEnd",void 0),e=S([j.Bean("GoalSettingStep1"),b("design:paramtypes",[])],e)}(),x=function(){function e(){}return Object.defineProperty(e.prototype,"PerCase",{get:function(){return this._PerCase},set:function(e){this._PerCase=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",String)],e.prototype,"_PerCase",void 0),e=S([j.Bean("GoalSettingStep2"),b("design:paramtypes",[])],e)}(),B=function(){function e(){this._ActivityValues=[]}return Object.defineProperty(e.prototype,"Activity",{get:function(){return this._Activity},set:function(e){this._Activity=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ActivityValues",{get:function(){return this._ActivityValues},set:function(e){this._ActivityValues=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",Array)],e.prototype,"_ActivityValues",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Activity",void 0),e=S([j.Bean("GoalSettingStep3"),b("design:paramtypes",[])],e)}(),Q=function(){function e(){this._MonthList=[]}var t;return t=e,Object.defineProperty(e.prototype,"Forecast",{get:function(){return this._Forecast},set:function(e){this._Forecast=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Shortfall",{get:function(){return this._Shortfall},set:function(e){this._Shortfall=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Actual",{get:function(){return this._Actual},set:function(e){this._Actual=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MonthList",{get:function(){return this._MonthList},set:function(e){this._MonthList=e},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var e=new t;return e.Forecast=this._Forecast,e.Shortfall=this._Shortfall,e.MonthList=this._MonthList.map(function(e){return e.clone()}),e.Actual=this._Actual,e},S([j.Required,b("design:type",String)],e.prototype,"_Forecast",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Shortfall",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Actual",void 0),S([j.Required,b("design:type",Array)],e.prototype,"_MonthList",void 0),e=t=S([j.Bean("GoalSettingStep4"),b("design:paramtypes",[])],e)}(),H=function(){function e(){}return Object.defineProperty(e.prototype,"TeamFYFC",{get:function(){return this._TeamFYFC},set:function(e){this._TeamFYFC=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TeamANP",{get:function(){return this._TeamANP},set:function(e){this._TeamANP=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Manpower",{get:function(){return this._Manpower},set:function(e){this._Manpower=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Recruitment",{get:function(){return this._Recruitment},set:function(e){this._Recruitment=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TeamFYFCActual",{get:function(){return this._TeamFYFCActual},set:function(e){this._TeamFYFCActual=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TeamANPActual",{get:function(){return this._TeamANPActual},set:function(e){this._TeamANPActual=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TeamFYFCNowToYearEnd",{get:function(){return this._TeamFYFCNowToYearEnd},set:function(e){this._TeamFYFCNowToYearEnd=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TeamANPNowToYearEnd",{get:function(){return this._TeamANPNowToYearEnd},set:function(e){this._TeamANPNowToYearEnd=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",String)],e.prototype,"_TeamFYFC",void 0),S([j.Required,b("design:type",String)],e.prototype,"_TeamANP",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Manpower",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Recruitment",void 0),S([j.Required,b("design:type",String)],e.prototype,"_TeamFYFCActual",void 0),S([j.Required,b("design:type",String)],e.prototype,"_TeamANPActual",void 0),S([j.Required,b("design:type",String)],e.prototype,"_TeamFYFCNowToYearEnd",void 0),S([j.Required,b("design:type",String)],e.prototype,"_TeamANPNowToYearEnd",void 0),e=S([j.Bean("GoalSettingStep5"),b("design:paramtypes",[])],e)}(),k=function(){function e(){}return e.prototype.getExtension=function(){return this._Extension},e.prototype.setExtension=function(e){this._Extension=e},Object.defineProperty(e.prototype,"IsCurrent",{get:function(){return this._IsCurrent},set:function(e){this._IsCurrent=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DataYear",{get:function(){return this._DataYear},set:function(e){this._DataYear=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"QuarterStartMonth",{get:function(){return this._QuarterStartMonth},set:function(e){this._QuarterStartMonth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"QuarterEndMonth",{get:function(){return this._QuarterEndMonth},set:function(e){this._QuarterEndMonth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GoalSettingActivityProcMode",{get:function(){return this._GoalSettingActivityProcMode},set:function(e){this._GoalSettingActivityProcMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GoalAndPlanDifferenceLimit",{get:function(){return this._GoalAndPlanDifferenceLimit},set:function(e){this._GoalAndPlanDifferenceLimit=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PerformanceSettlementMonth",{get:function(){return this._PerformanceSettlementMonth},set:function(e){this._PerformanceSettlementMonth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WorkingMonth",{get:function(){return this._WorkingMonth},set:function(e){this._WorkingMonth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WorkingQuarter",{get:function(){return this._WorkingQuarter},set:function(e){this._WorkingQuarter=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MonthQuantityOfYear",{get:function(){return this._MonthQuantityOfYear},set:function(e){this._MonthQuantityOfYear=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FyfcCovertAnpRate",{get:function(){return this._FyfcCovertAnpRate},set:function(e){this._FyfcCovertAnpRate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InforceConvertSubmitRate",{get:function(){return this._InforceConvertSubmitRate},set:function(e){this._InforceConvertSubmitRate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InforceConvertMeetRate",{get:function(){return this._InforceConvertMeetRate},set:function(e){this._InforceConvertMeetRate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InforceConvertScheduleRate",{get:function(){return this._InforceConvertScheduleRate},set:function(e){this._InforceConvertScheduleRate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InforceConvertFindRate",{get:function(){return this._InforceConvertFindRate},set:function(e){this._InforceConvertFindRate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NowToYearEndDays",{get:function(){return this._NowToYearEndDays},set:function(e){this._NowToYearEndDays=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",Number)],e.prototype,"_DataYear",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_GoalAndPlanDifferenceLimit",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_PerformanceSettlementMonth",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_WorkingMonth",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_MonthQuantityOfYear",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_InforceConvertSubmitRate",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_InforceConvertMeetRate",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_InforceConvertScheduleRate",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_InforceConvertFindRate",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_NowToYearEndDays",void 0),e=S([j.Bean("GoalSettingYearConfig"),b("design:paramtypes",[])],e)}(),C=function(){function e(e,t,n,r,o,a){this._TimeBase=e,this._Schedule=n,this._Find=t,this._Meet=r,this._Submit=o,this._Inforce=a}return Object.defineProperty(e.prototype,"TimeBase",{get:function(){return this._TimeBase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Find",{get:function(){return this._Find},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Schedule",{get:function(){return this._Schedule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Meet",{get:function(){return this._Meet},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Submit",{get:function(){return this._Submit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Inforce",{get:function(){return this._Inforce},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",String)],e.prototype,"_TimeBase",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Find",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Schedule",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Meet",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Submit",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Inforce",void 0),e=S([j.Bean("ActivityValue"),b("design:paramtypes",[Object,Object,Object,Object,Object,Object])],e)}(),U=function(){function e(){}return e.prototype.getExtension=function(){return this._Extension},e.prototype.setExtension=function(e){this._Extension=e},Object.defineProperty(e.prototype,"PersonnelGoalApplicableYM",{get:function(){return this._PersonnelGoalApplicableYM},set:function(e){this._PersonnelGoalApplicableYM=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TeamGoalApplicableYM",{get:function(){return this._TeamGoalApplicableYM},set:function(e){this._TeamGoalApplicableYM=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GoalSetMonth",{get:function(){return this._GoalSetMonth},set:function(e){this._GoalSetMonth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ApproveStatus",{get:function(){return this._ApproveStatus},set:function(e){this._ApproveStatus=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsFirstTime",{get:function(){return this._IsFirstTime},set:function(e){this._IsFirstTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsNeedSetting",{get:function(){return this._IsNeedSetting},set:function(e){this._IsNeedSetting=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RemainingDays",{get:function(){return this._RemainingDays},set:function(e){this._RemainingDays=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DataYear",{get:function(){return this._DataYear},set:function(e){this._DataYear=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsCurrent",{get:function(){return this._IsCurrent},set:function(e){this._IsCurrent=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SupervisorComment",{get:function(){return this._SupervisorComment},set:function(e){this._SupervisorComment=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",Number)],e.prototype,"_DataYear",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_PersonnelGoalApplicableYM",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_TeamGoalApplicableYM",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_GoalSetMonth",void 0),S([j.Required,b("design:type",String)],e.prototype,"_ApproveStatus",void 0),e=S([j.Bean("GoalSettingGoalStatus"),b("design:paramtypes",[])],e)}(),W=function(){function e(e){this._ActualList=[],this._DataYear=e}return Object.defineProperty(e.prototype,"DataYear",{get:function(){return this._DataYear},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"YearConfig",{get:function(){return this._YearConfig},set:function(e){this._YearConfig=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GoalStatus",{get:function(){return this._GoalStatus},set:function(e){this._GoalStatus=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Step1",{get:function(){return this._Step1},set:function(e){this._Step1=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Step2",{get:function(){return this._Step2},set:function(e){this._Step2=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Step3",{get:function(){return this._Step3},set:function(e){this._Step3=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Step4",{get:function(){return this._Step4},set:function(e){this._Step4=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Step5",{get:function(){return this._Step5},set:function(e){this._Step5=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AgencyPlan",{get:function(){return this._AgencyPlan},set:function(e){this._AgencyPlan=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ActualList",{get:function(){return this._ActualList},set:function(e){this._ActualList=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",Number)],e.prototype,"_DataYear",void 0),S([j.Required,b("design:type",k)],e.prototype,"_YearConfig",void 0),S([j.Required,b("design:type",U)],e.prototype,"_GoalStatus",void 0),S([j.Required,b("design:type",Q)],e.prototype,"_Step4",void 0),e=S([j.Bean("GoalSettingStepData"),b("design:paramtypes",[Object])],e)}(),M=function(){function e(e,t){this._IsNeedApprove=e,this._IsPopup=t}return Object.defineProperty(e.prototype,"IsNeedApprove",{get:function(){return this._IsNeedApprove},set:function(e){this._IsNeedApprove=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsPopup",{get:function(){return this._IsPopup},set:function(e){this._IsPopup=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PopupType",{get:function(){return this._PopupType},set:function(e){this._PopupType=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",Boolean)],e.prototype,"_IsNeedApprove",void 0),S([j.Required,b("design:type",Boolean)],e.prototype,"_IsPopup",void 0),e=S([j.Bean("IsApproveInfo"),b("design:paramtypes",[Object,Object])],e)}(),E=function(){function e(e,t,n){this._Month=e,this._Plan=t,this._Actual=n}var t;return t=e,Object.defineProperty(e.prototype,"Month",{get:function(){return this._Month},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Actual",{get:function(){return this._Actual},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Plan",{get:function(){return this._Plan},set:function(e){this._Plan=e},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new t(this._Month,this._Plan,this._Actual)},S([j.Required,b("design:type",Number)],e.prototype,"_Month",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Plan",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Actual",void 0),e=t=S([j.Bean("MonthlyPlanFYFCData"),b("design:paramtypes",[Number,String,String])],e)}(),N=function(){function e(e,t,n,r){this._AgentID=e,this._AgentName=t,this._DataYear=n,this._AppUseMode=r}return Object.defineProperty(e.prototype,"AgentID",{get:function(){return this._AgentID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AgentName",{get:function(){return this._AgentName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DataYear",{get:function(){return this._DataYear},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AppUseMode",{get:function(){return this._AppUseMode},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",String)],e.prototype,"_AgentID",void 0),S([j.Required,b("design:type",String)],e.prototype,"_AgentName",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_DataYear",void 0),S([j.Required,b("design:type",String)],e.prototype,"_AppUseMode",void 0),e=S([j.Bean("AgencyPlanAgentInfo"),b("design:paramtypes",[String,String,Number,String])],e)}(),R=function(){function e(){}return Object.defineProperty(e.prototype,"AgentID",{get:function(){return this._AgentID},set:function(e){this._AgentID=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AgentName",{get:function(){return this._AgentName},set:function(e){this._AgentName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DataYear",{get:function(){return this._DataYear},set:function(e){this._DataYear=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AppUseMode",{get:function(){return this._AppUseMode},set:function(e){this._AppUseMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"JobGrade",{get:function(){return this._JobGrade},set:function(e){this._JobGrade=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Actual",{get:function(){return this._Actual},set:function(e){this._Actual=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CaseCount",{get:function(){return this._CaseCount},set:function(e){this._CaseCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ClientID",{get:function(){return this._ClientID},set:function(e){this._ClientID=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DataType",{get:function(){return this._DataType},set:function(e){this._DataType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DirectUnitType",{get:function(){return this._DirectUnitType},set:function(e){this._DirectUnitType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Drilldown",{get:function(){return this._Drilldown},set:function(e){this._Drilldown=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Forecast",{get:function(){return this._Forecast},set:function(e){this._Forecast=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Goal",{get:function(){return this._Goal},set:function(e){this._Goal=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsApprove",{get:function(){return this._IsApprove},set:function(e){this._IsApprove=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Manpower",{get:function(){return this._Manpower},set:function(e){this._Manpower=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MonthPlan",{get:function(){return this._MonthPlan},set:function(e){this._MonthPlan=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Orders",{get:function(){return this._Orders},set:function(e){this._Orders=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PerCase",{get:function(){return this._PerCase},set:function(e){this._PerCase=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Recruitment",{get:function(){return this._Recruitment},set:function(e){this._Recruitment=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsHasDot",{get:function(){return this._IsHasDot},set:function(e){this._IsHasDot=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TextColor",{get:function(){return this._TextColor},set:function(e){this._TextColor=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",String)],e.prototype,"_AgentID",void 0),S([j.Required,b("design:type",String)],e.prototype,"_AgentName",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_DataYear",void 0),S([j.Required,b("design:type",String)],e.prototype,"_AppUseMode",void 0),S([j.Required,b("design:type",String)],e.prototype,"_JobGrade",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Actual",void 0),S([j.Required,b("design:type",String)],e.prototype,"_CaseCount",void 0),S([j.Required,b("design:type",String)],e.prototype,"_ClientID",void 0),S([j.Required,b("design:type",String)],e.prototype,"_DataType",void 0),S([j.Required,b("design:type",String)],e.prototype,"_DirectUnitType",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Drilldown",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Forecast",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Goal",void 0),S([j.Required,b("design:type",String)],e.prototype,"_IsApprove",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_Manpower",void 0),S([j.Required,b("design:type",String)],e.prototype,"_MonthPlan",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_Orders",void 0),S([j.Required,b("design:type",String)],e.prototype,"_PerCase",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_Recruitment",void 0),S([j.Required,b("design:type",Boolean)],e.prototype,"_IsHasDot",void 0),S([j.Required,b("design:type",String)],e.prototype,"_TextColor",void 0),e=S([j.Bean("AgencyPlanDetail"),b("design:paramtypes",[])],e)}(),I=function(){function e(e){this._ANP="0",this._DataYear=0,this._WorkingQuarter=0,this._FYFC="0",this._Q1="0",this._Q2="0",this._Q3="0",this._Q4="0",this._RecruitmentTotal=0,this._DataYear=e}var t;return t=e,Object.defineProperty(e.prototype,"ANP",{get:function(){return this._ANP},set:function(e){this._ANP=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DataYear",{get:function(){return this._DataYear},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WorkingQuarter",{get:function(){return this._WorkingQuarter},set:function(e){this._WorkingQuarter=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FYFC",{get:function(){return this._FYFC},set:function(e){this._FYFC=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Q1",{get:function(){return this._Q1},set:function(e){this._Q1=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Q2",{get:function(){return this._Q2},set:function(e){this._Q2=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Q3",{get:function(){return this._Q3},set:function(e){this._Q3=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Q4",{get:function(){return this._Q4},set:function(e){this._Q4=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RecruitmentTotal",{get:function(){return this._RecruitmentTotal},set:function(e){this._RecruitmentTotal=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FYFCConvertANPRate",{get:function(){return this._FYFCConvertANPRate},set:function(e){this._FYFCConvertANPRate=e},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var e=new t(this._DataYear);return e.WorkingQuarter=this._WorkingQuarter,e.ANP=this._ANP,e.FYFC=this._FYFC,e.Q1=this._Q1,e.Q2=this._Q2,e.Q3=this._Q3,e.Q4=this._Q4,e.RecruitmentTotal=this._RecruitmentTotal,e.FYFCConvertANPRate=this._FYFCConvertANPRate,e},S([j.Required,b("design:type",String)],e.prototype,"_ANP",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_DataYear",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_WorkingQuarter",void 0),S([j.Required,b("design:type",String)],e.prototype,"_FYFC",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Q1",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Q2",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Q3",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Q4",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_RecruitmentTotal",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_FYFCConvertANPRate",void 0),e=t=S([j.Bean("AgencyPlanGoalExpected"),b("design:paramtypes",[Number])],e)}(),O=function(){function e(e,t,n,r,o){this._eachMonthPlan=[],this._FYFCGoal=e,this._actual=t,this._performanceMonthStart=n,this._performanceMonthEnd=r,this._monthPlanList=o}var t;return t=e,Object.defineProperty(e.prototype,"FYFCGoal",{get:function(){return this._FYFCGoal},set:function(e){this._FYFCGoal=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actual",{get:function(){return this._actual},set:function(e){this._actual=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"performanceMonthStart",{get:function(){return this._performanceMonthStart},set:function(e){this._performanceMonthStart=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"performanceMonthEnd",{get:function(){return this._performanceMonthEnd},set:function(e){this._performanceMonthEnd=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"monthPlanList",{get:function(){return this._monthPlanList},set:function(e){this._monthPlanList=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"approveThreshold",{get:function(){return this._approveThreshold},set:function(e){this._approveThreshold=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eachMonthPlan",{get:function(){return this._eachMonthPlan},set:function(e){this._eachMonthPlan=e},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var e=new t(this._FYFCGoal,this._actual,this._performanceMonthStart,this._performanceMonthEnd,this.monthPlanList.map(function(e){return e.clone()}));return e._eachMonthPlan=this.eachMonthPlan.map(function(e){return e}),e._approveThreshold=this._approveThreshold,e},S([j.Required,b("design:type",Number)],e.prototype,"_FYFCGoal",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_actual",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_performanceMonthStart",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_performanceMonthEnd",void 0),S([j.Required,b("design:type",Array)],e.prototype,"_monthPlanList",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_approveThreshold",void 0),S([j.Required,b("design:type",Array)],e.prototype,"_eachMonthPlan",void 0),e=t=S([j.Bean("GoalSettingPlanPopup"),b("design:paramtypes",[Object,Object,Object,Object,Object])],e)}(),w=function(){function e(){this._Manpower="",this._Recruitment=0}return Object.defineProperty(e.prototype,"Manpower",{get:function(){return this._Manpower},set:function(e){this._Manpower=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Recruitment",{get:function(){return this._Recruitment},set:function(e){this._Recruitment=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",String)],e.prototype,"_Manpower",void 0),S([j.Required,b("design:type",Number)],e.prototype,"_Recruitment",void 0),e=S([j.Bean("AgencyPlanDirectUnitDetail"),b("design:paramtypes",[])],e)}(),G=function(){function e(){}return Object.defineProperty(e.prototype,"DataYear",{get:function(){return this._DataYear},set:function(e){this._DataYear=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DataType",{get:function(){return this._DataType},set:function(e){this._DataType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Forecast",{get:function(){return this._Forecast},set:function(e){this._Forecast=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Actual",{get:function(){return this._Actual},set:function(e){this._Actual=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MonthPlan",{get:function(){return this._MonthPlan},set:function(e){this._MonthPlan=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",Number)],e.prototype,"_DataYear",void 0),S([j.Required,b("design:type",String)],e.prototype,"_DataType",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Forecast",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Actual",void 0),S([j.Required,b("design:type",String)],e.prototype,"_MonthPlan",void 0),e=S([j.Bean("AgencyPlanMainData"),b("design:paramtypes",[])],e)}(),J=function(){function e(){}return Object.defineProperty(e.prototype,"FYFCForecast",{get:function(){return this._FYFCForecast},set:function(e){this._FYFCForecast=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ANPForecast",{get:function(){return this._ANPForecast},set:function(e){this._ANPForecast=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ManpowerPlan",{get:function(){return this._ManpowerPlan},set:function(e){this._ManpowerPlan=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RecruitmentPlan",{get:function(){return this._RecruitmentPlan},set:function(e){this._RecruitmentPlan=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CompletionRate",{get:function(){return this._CompletionRate},set:function(e){this._CompletionRate=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",String)],e.prototype,"_FYFCForecast",void 0),S([j.Required,b("design:type",String)],e.prototype,"_ANPForecast",void 0),S([j.Required,b("design:type",String)],e.prototype,"_ManpowerPlan",void 0),S([j.Required,b("design:type",String)],e.prototype,"_RecruitmentPlan",void 0),S([j.Required,b("design:type",String)],e.prototype,"_CompletionRate",void 0),e=S([j.Bean("AgencyPlanDataForOverview"),b("design:paramtypes",[])],e)}(),z=function(){function e(e,t,n){this._step=e,this._column=t,this._value=n}return Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(e){this._step=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"column",{get:function(){return this._column},set:function(e){this._column=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",Number)],e.prototype,"_step",void 0),S([j.Required,b("design:type",String)],e.prototype,"_column",void 0),S([j.Required,b("design:type",Object)],e.prototype,"_value",void 0),e=S([j.Bean("SettingChangeEvent"),b("design:paramtypes",[Number,String,Object])],e)}(),K=function(){function e(){this._TeamGoalEffectiveMonthTitle="",this._PersonalGoalEffectiveMonthTitle="",this._NowToYearEndTitle="",this._FYFCNowToYearEndTitle="",this._ANPNowToYearEndTitle="",this._PersonalFYFCActualVariableTitle="",this._TeamFYFCActualVariableTitle="",this._TeamANPActualVariableTitle="",this._FYFCActualDashTitle=""}return Object.defineProperty(e.prototype,"TeamGoalEffectiveMonthTitle",{get:function(){return this._TeamGoalEffectiveMonthTitle},set:function(e){this._TeamGoalEffectiveMonthTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PersonalGoalEffectiveMonthTitle",{get:function(){return this._PersonalGoalEffectiveMonthTitle},set:function(e){this._PersonalGoalEffectiveMonthTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NowToYearEndTitle",{get:function(){return this._NowToYearEndTitle},set:function(e){this._NowToYearEndTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FYFCNowToYearEndTitle",{get:function(){return this._FYFCNowToYearEndTitle},set:function(e){this._FYFCNowToYearEndTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ANPNowToYearEndTitle",{get:function(){return this._ANPNowToYearEndTitle},set:function(e){this._ANPNowToYearEndTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PersonalFYFCActualVariableTitle",{get:function(){return this._PersonalFYFCActualVariableTitle},set:function(e){this._PersonalFYFCActualVariableTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TeamFYFCActualVariableTitle",{get:function(){return this._TeamFYFCActualVariableTitle},set:function(e){this._TeamFYFCActualVariableTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TeamANPActualVariableTitle",{get:function(){return this._TeamANPActualVariableTitle},set:function(e){this._TeamANPActualVariableTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FYFCActualDashTitle",{get:function(){return this._FYFCActualDashTitle},set:function(e){this._FYFCActualDashTitle=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",String)],e.prototype,"_TeamGoalEffectiveMonthTitle",void 0),S([j.Required,b("design:type",String)],e.prototype,"_PersonalGoalEffectiveMonthTitle",void 0),S([j.Required,b("design:type",String)],e.prototype,"_NowToYearEndTitle",void 0),S([j.Required,b("design:type",String)],e.prototype,"_FYFCNowToYearEndTitle",void 0),S([j.Required,b("design:type",String)],e.prototype,"_ANPNowToYearEndTitle",void 0),S([j.Required,b("design:type",String)],e.prototype,"_PersonalFYFCActualVariableTitle",void 0),S([j.Required,b("design:type",String)],e.prototype,"_TeamFYFCActualVariableTitle",void 0),S([j.Required,b("design:type",String)],e.prototype,"_TeamANPActualVariableTitle",void 0),S([j.Required,b("design:type",String)],e.prototype,"_FYFCActualDashTitle",void 0),e=S([j.Bean("GoalSettingTranslate"),b("design:paramtypes",[])],e)}(),X=function(){function e(e,t,n){this._Step5ItemList=[],this._AgencyPlanItemList=[],this._ItemTextIsRedList=[],this._Step5ItemList=e,this._AgencyPlanItemList=t,this._ItemTextIsRedList=n}return Object.defineProperty(e.prototype,"Step5ItemList",{get:function(){return this._Step5ItemList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AgencyPlanItemList",{get:function(){return this._AgencyPlanItemList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ItemTextIsRedList",{get:function(){return this._ItemTextIsRedList},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",Array)],e.prototype,"_Step5ItemList",void 0),S([j.Required,b("design:type",Array)],e.prototype,"_AgencyPlanItemList",void 0),S([j.Required,b("design:type",Array)],e.prototype,"_ItemTextIsRedList",void 0),e=S([j.Bean("CombineStep5AndAgecyPlanData"),b("design:paramtypes",[Array,Array,Array])],e)}(),Z=function(){function e(e,t){this._ActivityValue=null,this._Unit="",this._ActivityValue=e,this._Unit=t}return Object.defineProperty(e.prototype,"ActivityValue",{get:function(){return this._ActivityValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Unit",{get:function(){return this._Unit},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",C)],e.prototype,"_ActivityValue",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Unit",void 0),e=S([j.Bean("GoalSettingStep3ForTabChange"),b("design:paramtypes",[C,String])],e)}(),$=function(){function e(e,t,n){this._Step=e,this._ColId=t,this._Msg=n}return Object.defineProperty(e.prototype,"Step",{get:function(){return this._Step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ColId",{get:function(){return this._ColId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Msg",{get:function(){return this._Msg},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",Number)],e.prototype,"_Step",void 0),S([j.Required,b("design:type",String)],e.prototype,"_ColId",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Msg",void 0),e=S([j.Bean("ValidError"),b("design:paramtypes",[Number,String,String])],e)}(),ee=function(){function e(e,t,n,r){this._DataYear=e,this._AgentID=t,this._IsApprove=n,this._Comment=r}return Object.defineProperty(e.prototype,"Comment",{get:function(){return this._Comment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsApprove",{get:function(){return this._IsApprove},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AgentID",{get:function(){return this._AgentID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DataYear",{get:function(){return this._DataYear},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",Number)],e.prototype,"_DataYear",void 0),S([j.Required,b("design:type",String)],e.prototype,"_AgentID",void 0),S([j.Required,b("design:type",Boolean)],e.prototype,"_IsApprove",void 0),S([j.Required,b("design:type",String)],e.prototype,"_Comment",void 0),e=S([j.Bean("ApproveInfo"),b("design:paramtypes",[Number,String,Boolean,String])],e)}(),te=function(){function e(e,t){this._DataYear=e,this._isAdjust=t}return Object.defineProperty(e.prototype,"DataYear",{get:function(){return this._DataYear},set:function(e){this._DataYear=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAdjust",{get:function(){return this._isAdjust},set:function(e){this._isAdjust=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",Number)],e.prototype,"_DataYear",void 0),S([j.Required,b("design:type",Boolean)],e.prototype,"_isAdjust",void 0),e=S([j.Bean("GoalSettingStepDataParams"),b("design:paramtypes",[Number,Boolean])],e)}(),ne={DISPLAY:"display",ACCEPT:"accept",REJECT:"reject",FIRST:"first"},re=function(){function e(e,t){this.state=e,this.agentID=t}return Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(e){this._state=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"agentID",{get:function(){return this._agentID},set:function(e){this._agentID=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",String)],e.prototype,"_state",void 0),S([j.Required,b("design:type",String)],e.prototype,"_agentID",void 0),e=S([j.Bean("AgencyPlanStatus"),b("design:paramtypes",[Object,Object])],e)}(),oe=function(){function e(){}return Object.defineProperty(e.prototype,"CompletionRate",{get:function(){return this._CompletionRate},set:function(e){this._CompletionRate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AgencyMainDataList",{get:function(){return this._AgencyMainDataList},set:function(e){this._AgencyMainDataList=e},enumerable:!0,configurable:!0}),S([j.Required,b("design:type",String)],e.prototype,"_CompletionRate",void 0),S([j.Required,b("design:type",Array)],e.prototype,"_AgencyMainDataList",void 0),e=S([j.Bean("AgencyPlanMainInfo"),b("design:paramtypes",[])],e)}(),ae=function(){function e(e){var t=this;this.loginMgr=e,this.syncGoalDatas=null,this.settingYear=null,this.isPromo=!1,this.canSkip=!0,this.planFYFCPopupInfo=new D(ue.CLOSE,null),this.landingStatus=se.FIRST_INIT,this.yearSubject=new a.BehaviorSubject(this.settingYear),this.statusSubject=new a.BehaviorSubject(this.landingStatus),this.isPromoSubject=new a.BehaviorSubject(this.isPromo),this.canSkipSubject=new a.BehaviorSubject(this.canSkip),this.planFYFCPopupInfoSubject=new a.BehaviorSubject(this.planFYFCPopupInfo),this.syncGoalDatasSubject=new a.BehaviorSubject(this.syncGoalDatas),this.goalPopupResponseSubject=new a.Subject,this.loginMgr.subscribeLogout().subscribe(function(){t.setSyncGoalDatas(null),t.setGoalLandingStatus(se.FIRST_INIT),t.setSettingYear(null),t.setIsPromo(!1),t.setCanSkip(!0),t.setPlanFYFCPopupInfo(new D(ue.CLOSE,null))})}return e.prototype.getSyncGoalDatas=function(){return this.syncGoalDatasSubject.asObservable()},e.prototype.setSyncGoalDatas=function(e){this.syncGoalDatas=e,this.syncGoalDatasSubject.next(this.syncGoalDatas)},e.prototype.getGoalLandingStatus=function(){return this.statusSubject.asObservable()},e.prototype.setGoalLandingStatus=function(e){this.landingStatus=e,this.statusSubject.next(this.landingStatus)},e.prototype.getSettingYear=function(){return this.yearSubject.asObservable()},e.prototype.setSettingYear=function(e){this.settingYear=e,this.yearSubject.next(this.settingYear)},e.prototype.getIsPromo=function(){return this.isPromoSubject.asObservable()},e.prototype.setIsPromo=function(e){this.isPromo=e,this.isPromoSubject.next(this.isPromo)},e.prototype.getCanSkip=function(){return this.canSkipSubject.asObservable()},e.prototype.setCanSkip=function(e){this.canSkip=e,this.canSkipSubject.next(this.canSkip)},e.prototype.setPopupResp=function(e){this.goalPopupResponseSubject.next(e)},e.prototype.getPopupResp=function(){return this.goalPopupResponseSubject.asObservable()},e.prototype.setPlanFYFCPopupInfo=function(e){console.log("Set info"),(this.planFYFCPopupInfo=e).data&&(this.planFYFCPopupInfo.data.Step4=this.planFYFCPopupInfo.data.Step4.clone()),this.planFYFCPopupInfoSubject.next(this.planFYFCPopupInfo)},e.prototype.getPlanFYFCPopupInfo=function(){return this.planFYFCPopupInfoSubject.asObservable()},e.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:j.DefaultLoginMgr}]},e.ngInjectableDef=r.defineInjectable({factory:function(){return new e(r.inject(j.DefaultLoginMgr))},token:e,providedIn:"root"}),e}(),ie=function de(){},se={SETTING_SUBMITTED:0,FIRST_INIT:1,FIRST_SET:2,ADJUST_GOAL:3};se[se.SETTING_SUBMITTED]="SETTING_SUBMITTED",se[se.FIRST_INIT]="FIRST_INIT",se[se.FIRST_SET]="FIRST_SET",se[se.ADJUST_GOAL]="ADJUST_GOAL";var ue={DISPLAY:0,NEEDAPPROVESUBMIT:1,NOTNEEDAPPROVESUBMIT:2,CLOSE:3};ue[ue.DISPLAY]="DISPLAY",ue[ue.NEEDAPPROVESUBMIT]="NEEDAPPROVESUBMIT",ue[ue.NOTNEEDAPPROVESUBMIT]="NOTNEEDAPPROVESUBMIT",ue[ue.CLOSE]="CLOSE";var ce={SYNC:0,FINISH:1};ce[ce.SYNC]="SYNC",ce[ce.FINISH]="FINISH";var le=function(){function e(e,t,n,r,o,a,i,s,u){var c=this;this.dispatcher=e,this.APIFactory=t,this.goalStore=n,this.errorHandler=r,this.goalSettingStep=o,this.yearConfigExtension=a,this.goalSettingExtension=i,this.dataSyncService=s,this.profileCodeService=u,this.TextConvertStep1Map=new Map,this.TextConvertStep2Map=new Map,this.TextConvertStep5Map=new Map,this.StepTextConvertMap=new Map,this.ColMapToProfile=new Map,this.ColMapToProfileCodeMap=new Map,this.DASH="--",this._isPopup=!1,this.TextConvertStep1Map.set("FYFC","PERSON_FYFC"),this.TextConvertStep1Map.set("AnnualConvention","ANNUAL_CONVENTION"),this.TextConvertStep1Map.set("MDRT","MDRT"),this.TextConvertStep1Map.set("PromotionPlan","PROMOTION_PLAN"),this.TextConvertStep1Map.set("ActivityFYFC","ACTIVITY_FYFC"),this.TextConvertStep1Map.set("ActivityDays","ACTIVITY_DAYS"),this.TextConvertStep2Map.set("PerCase","PER_CASE_FYFC"),this.TextConvertStep5Map.set("TeamFYFC","TEAM_FYFC"),this.TextConvertStep5Map.set("TeamANP","TEAM_ANP"),this.TextConvertStep5Map.set("Manpower","TEAM_MANPOWER"),this.TextConvertStep5Map.set("Recruitment","TEAM_RECRUITMENT"),this.StepTextConvertMap.set("Step1",this.TextConvertStep1Map),this.StepTextConvertMap.set("Step2",this.TextConvertStep2Map),this.StepTextConvertMap.set("Step5",this.TextConvertStep5Map),this.ColMapToProfile.set("AnnualConvention","GoalSetting_AnnualConvention"),this.ColMapToProfile.set("MDRT","GoalSetting_MDRT"),this.ColMapToProfile.set("PromotionPlan","Promotion_Plan"),this.ColMapToProfile.forEach(function(e,t){c.ColMapToProfileCodeMap.set(t,c.profileCodeService.getCodeArray(e))})}return e.prototype.getGoalSettingStep1_5Data=function(e,t){return a.from(this._getGoalSettingStep1_5Data(e,t))},e.prototype._getGoalSettingStep1_5Data=function(w,G){return m(this,void 0,void 0,function(){var t,n,r,o,a,i,s,u,c,l,p,g,f,h,d,y,S,b,m,_,P,A,v,F,T,Y,D,C,M,E,N,R,I,O;return q(this,function(e){switch(e.label){case 0:console.log("into _getGoalSettingStep1_5Data year:",w,"isAdjust",G),n=new W(w),e.label=1;case 1:return e.trys.push([1,7,,8]),i=a=o=r=void 0,s=this.APIFactory.getAPI("getGoalSettingYearConfig"),u=this.APIFactory.getAPI("getGoalSettingGoalSetting"),c=this.APIFactory.getAPI("getGoalSettingValue"),l=this.APIFactory.getAPI("getGoalSettingActualValue"),c.setDataYear(w),l.setDataYear(w),[4,Promise.all([this.dispatcher.dispatch(s).toPromise(),this.dispatcher.dispatch(u).toPromise(),this.dispatcher.dispatch(c).toPromise(),this.dispatcher.dispatch(l).toPromise()])];case 2:return t=L.apply(void 0,[e.sent(),4]),r=t[0],o=t[1],a=t[2],i=t[3],console.log("yearConfigResp",r),console.log("goalSettingResp",o),console.log("goalSettingValueResp",a),console.log("actualResp",i),r.Header.status&&o.Header.status&&a.Header.status&&i.Header.status?(p=this.yearJsonToMap(r.Body),g=this.yearJsonToMap(o.Body),f=p.get(w),h=g.get(w),console.log("yearConfigObj",f),console.log("goalSettingObj",h),f==undefined||h==undefined?[3,6]:(d={},a.Body.forEach(function(e){d[e.DataType]=e.Value}),console.log("goalSettingValueObj",d),b=S=y=-1,m=f.MonthQuantityOfYear,_=Array(m).fill(this.DASH,0),P=i.Body,0<(A=P.filter(function(e){return e.DataYear==w&&e.PerformanceType==j.PERFORMANCETYPE.PERSONAL&&"FYFC"==e.DataType})).length&&(b=0,A.forEach(function(e){e.Month<=f.PerformanceSettlementMonth&&(_[e.Month-1]=e.Value,b+=e.Value)})),(v=P.filter(function(e){return e.DataYear==w&&e.PerformanceType==j.PERFORMANCETYPE.TEAM&&"FYFC"==e.DataType})).length&&(S=y=0,v.forEach(function(e){y+=e.Month<=f.PerformanceSettlementMonth?e.Value:0}),S=this.numberToFix(y*f.FyfcCovertAnpRate,0)),console.log("actuallist",_),F=new k,T=new U,Y=new V,D=new x,C=new B,M=new Q,E=new H,F.DataYear=f.DataYear,F.IsCurrent=f.IsCurrent,F.QuarterStartMonth=f.QuarterStartMonth,F.QuarterEndMonth=f.QuarterEndMonth,F.GoalSettingActivityProcMode=f.GoalSettingActivityProcMode,F.GoalAndPlanDifferenceLimit=f.GoalAndPlanDifferenceLimit,F.FyfcCovertAnpRate=f.FyfcCovertAnpRate,F.InforceConvertSubmitRate=f.InforceConvertSubmitRate,F.InforceConvertMeetRate=f.InforceConvertMeetRate,F.InforceConvertScheduleRate=f.InforceConvertScheduleRate,F.InforceConvertFindRate=f.InforceConvertFindRate,F.NowToYearEndDays=f.NowToYearEndDays,F.PerformanceSettlementMonth=f.PerformanceSettlementMonth,F.MonthQuantityOfYear=f.MonthQuantityOfYear,F.WorkingMonth=f.WorkingMonth,this.yearConfigExtension&&(N=this.yearConfigExtension.getExtensionData(f,{source:"SQL"}),F.setExtension(N)),T.DataYear=w,T.PersonnelGoalApplicableYM=h.PersonnelGoalApplicableYM,T.TeamGoalApplicableYM=h.TeamGoalApplicableYM,T.GoalSetMonth=h.GoalSetMonth,T.ApproveStatus=h.ApproveStatus,T.IsFirstTime="Y"==h.IsFirstTime,T.IsNeedSetting="Y"==h.IsNeedSetting,T.SupervisorComment=h.SupervisorComment,this.goalSettingExtension&&(R=this.goalSettingExtension.getExtensionData(h,{source:"SQL"}),T.setExtension(R)),Y.FYFC=d.PERSON_FYFC,Y.AnnualConvention=d.ANNUAL_CONVENTION,Y.MDRT=d.MDRT,Y.PromotionPlan=d.PROMOTION_PLAN,Y.Actual=this.changeToDash(b),Y.FYFCNowToYearEnd=this.calculateNowToYearEndGoal(d.PERSON_FYFC,Y.Actual),Y.ActivityFYFC=d.ACTIVITY_FYFC,Y.ActivityDays=d.ACTIVITY_DAYS,D.PerCase=d.PER_CASE_FYFC,I=G?Y.FYFCNowToYearEnd:Y.FYFC,C=this.calculateActivityData(I,D.PerCase,F),G?[4,this._getMonthActualPlanBySQL(j.PERFORMANCETYPE.PERSONAL,w,F.MonthQuantityOfYear,F.PerformanceSettlementMonth)]:[3,4])):[3,6];case 3:return(M=e.sent()).Shortfall=this.calculateShortfall(Y.FYFC,M.Forecast),[3,5];case 4:(M=this.calculateMonthActualPlan(F,Y.FYFC,_)).Shortfall=this.calculateShortfall(Y.FYFC,M.Forecast),e.label=5;case 5:E.TeamFYFC=d.TEAM_FYFC,E.TeamANP=d.TEAM_ANP,E.Manpower=d.TEAM_MANPOWER,E.Recruitment=d.TEAM_RECRUITMENT,E.TeamFYFCActual=this.changeToDash(y),E.TeamANPActual=this.changeToDash(S),E.TeamFYFCNowToYearEnd=this.calculateNowToYearEndGoal(d.TEAM_FYFC,E.TeamFYFCActual),E.TeamANPNowToYearEnd=this.calculateANPFromFYFC(E.TeamFYFCNowToYearEnd,F.FyfcCovertAnpRate),n.YearConfig=F,n.GoalStatus=T,n.Step1=Y,n.Step2=D,n.Step3=C,n.Step4=M,n.Step5=E,n.ActualList=_,e.label=6;case 6:return[3,8];case 7:return O=e.sent(),this.errorHandler.handleError(new j.APPError("F00400","getGoalSettingStep1_5Data fail!"+O.message)),[3,8];case 8:return console.log("getGoalSettingStep1_5Data returnData",n),[2,n]}})})},e.prototype.calculateActivityData=function(e,t,n,r){var o=this;void 0===r&&(r=""),console.log("calculateActivityData:",e,t,n,r);var a=new B,i=[];try{var s=Number(e),u=Number(t);if(j.NumberUtils.isNumber(e)&&j.NumberUtils.isNumber(t)&&0<u){console.warn("calculateActivityData on service: ",e,t,n);var c=j.StringUtils.isEmpty(r)?Number(n.NowToYearEndDays):Number(r),l=365/Number(n.MonthQuantityOfYear),p=s/u/c,g=7*p,f=p*l;p=p;var h=[{name:j.TIMEBASE.DAY,inforce:p},{name:j.TIMEBASE.WEEK,inforce:g},{name:j.TIMEBASE.MONTH,inforce:f}];this.goalSettingStep&&(i=this.goalSettingStep.calculateOtherRuleActivityInforce(h,n));var d=i[0].TimeBase;a.Activity=d,a.ActivityValues=i}else{var y=[j.TIMEBASE.DAY,j.TIMEBASE.WEEK,j.TIMEBASE.MONTH];a.Activity=j.TIMEBASE.DAY,y.forEach(function(e){var t=new C(e,o.DASH,o.DASH,o.DASH,o.DASH,o.DASH);i.push(t)}),a.ActivityValues=i}}catch(S){this.errorHandler.handleError(new j.APPError("F00401","calculateActivityData fail!"+S.message))}return console.log("calculateActivityData return obj: ",JSON.stringify(a)),a},e.prototype.calculateMonthActualPlan=function(e,t,n){console.log("calculateMonthActualPlan goal:",t);var r=new Q,o=[];try{if(j.NumberUtils.isNumber(t)){this.goalSettingStep&&(o=this.goalSettingStep.calculateMonthActualPlan(e,Number(t),n));var a=this.calculateForecast(e.PerformanceSettlementMonth,o),i=this.calculateShortfall(t,a),s=this.calulateSumByArray(n);r.MonthList=o,r.Forecast=a,r.Shortfall=i,r.Actual=s}else{for(var u=0;u<e.MonthQuantityOfYear;u++){var c=new E(u,this.DASH,this.DASH);o.push(c)}r.Actual=this.DASH,r.Forecast=this.DASH,r.Shortfall=this.DASH,r.MonthList=o}}catch(l){this.errorHandler.handleError(new j.APPError("F00402","calculateMonthActualPlan fail!"+l.message))}return console.log("calculateMonthActualPlan:",o),r},e.prototype.calculateActual=function(t,e){var n=this;return 0<t?e.map(function(e){return Number(e.Actual)<0||e.Actual==n.DASH||e.Month>t?0:Number(e.Actual)}).reduce(function(e,t){return e+Number(t)},0).toString():this.DASH},e.prototype.calculateForecast=function(e,t){return this.calulateSumByArray(this.getActualPlanFromMonthList(t,e))},e.prototype.calulateSumByArray=function(e){var t=this,n=!0;e.forEach(function(e){e!=t.DASH&&(n=!1)});var r=this.DASH;return n||(r=e.map(function(e){return Number(e)<0||e==t.DASH||j.StringUtils.isEmpty(e)?0:e}).reduce(function(e,t){return e+Number(t)},0).toString()),r},e.prototype.calculateShortfall=function(e,t){var n=this.DASH;if(j.NumberUtils.isNumber(e)&&j.NumberUtils.isNumber(t))if(this.goalSettingStep)n=this.goalSettingStep.getShortfall(e,t).toString();else{var r=Number(e)-Number(t);n=r<0?"0":r.toString()}return n},e.prototype.isNeedApprove=function(e,t,n){return a.from(this._isNeedApprove(e,t,n))},e.prototype._isNeedApprove=function(o,a,i){return m(this,void 0,void 0,function(){var t,n,r;return q(this,function(e){switch(e.label){case 0:console.log("_isNeedApprove adjustDatas",i,o,a),e.label=1;case 1:return e.trys.push([1,5,,6]),this.goalSettingStep?[4,this._getGoalSettingStep1_5Data(a,!0)]:[3,3];case 2:return n=e.sent(),t=this.goalSettingStep.isNeedApprove(i,n),[3,4];case 3:t=new M(!0,!1),e.label=4;case 4:return[3,6];case 5:return r=e.sent(),this.errorHandler.handleError(new j.APPError("F00403","isNeedApprove fail!"+r.message)),[3,6];case 6:return console.log("isNeedApprove",t),[2,t]}})})},e.prototype.isNeedApprove_plan=function(e,t,n){var r;console.log("isNeedApprove_plan FYFC",e,"Forecast",t,"GoalAndPlanDifferenceLimit",n);try{r=this.goalSettingStep?this.goalSettingStep.isNeedApprove_plan(Number(e),Number(t),n):new M(!0,!1)}catch(o){this.errorHandler.handleError(new j.APPError("F00404","isNeedApprove_plan fail!"+o.message))}return console.log("isNeedApprove_plan isApproveInfo:",r),a.of(r)},e.prototype.submitGoal=function(e,t,n){return a.from(this._submitGoal(e,t,n))},e.prototype._submitGoal=function(c,l,p){return m(this,void 0,void 0,function(){var t,r,n,o,a,i,s,u=this;return q(this,function(e){switch(e.label){case 0:console.log("[_submitGoal] submitData",p),r=[],n=new j.SubmitGoalPlan,o=new j.SubmitGoalInfo,i=new j.SuccessStatus(!1),e.label=1;case 1:return e.trys.push([1,6,,7]),c==j.SUBMITGOALTYPE.ALL&&(["Step1","Step2","Step5"].forEach(function(n){u.StepTextConvertMap.get(n).forEach(function(e,t){p[n][t]&&r.push(new j.SubmitGoalSettingValue(e,p[n][t],[]))})}),t=p.Step3.Activity),console.log("GoalSettingValue",r),n.TimeBase=j.TIMEBASE.MONTH,n.Values=p.Step4.MonthList.filter(function(e){return e.Plan!=u.DASH}).map(function(e){return new j.SubmitGoalPlanInfo(j.PERFORMANCETYPE.PERSONAL,e.Month,Number(e.Plan),[])}),console.log("GoalPlan",n),o.DataYear=p.DataYear,o.SubmitType=c,o.ActivityGoalBase=t,o.IsNeedApprove=l?j.YESNO.YES:j.YESNO.NO,o.Extensions=[],console.log("SubmitInfo",o),a=new j.SubmitGoalData(o,r,n),[4,this._pushGoalSetting(a)];case 2:return e.sent().isSuccess?[4,this.syncGoalDatas()]:[3,4];case 3:return e.sent(),i.isSuccess=!0,[3,5];case 4:throw"submit goal fail! ";case 5:return[3,7];case 6:return s=e.sent(),this.errorHandler.handleError(new j.APPError("F00405","submitGoal fail!"+s.message)),i.isSuccess=!1,[3,7];case 7:return console.log("_submitGoal resp2",i),[2,i]}})})},e.prototype.getIsFirstUse=function(){var r=this;return a.Observable.create(function(t){var e=r.APIFactory.getAPI("getDeviceInfo");e.setDataType("FirstUseAPP");try{r.dispatcher.dispatch(e).toPromise().then(function(e){console.log("getIsFirstUse","Y"==e.Body[0].CategoryVal),t.next("Y"==e.Body[0].CategoryVal),t.complete()})}catch(n){r.errorHandler.handleError(new j.APPError("F00408","getIsFirstUse fail!"+n.message))}})},e.prototype.getSettingStatus=function(){return a.from(this._getSettingStatus())},e.prototype._getSettingStatus=function(){return m(this,void 0,void 0,function(){var t,n,r,o,a,i,s,u,c;return q(this,function(e){switch(e.label){case 0:o=[],e.label=1;case 1:return e.trys.push([1,3,,4]),a=this.APIFactory.getAPI("getGoalSettingGoalSetting"),i=this.APIFactory.getAPI("getGoalSettingYearConfig"),[4,Promise.all([this.dispatcher.dispatch(a).toPromise(),this.dispatcher.dispatch(i).toPromise()])];case 2:return t=L.apply(void 0,[e.sent(),2]),n=t[0],r=t[1],s=new Map,u=new Map,n.Header.status&&r.Header.status&&(s=this.yearJsonToMap(n.Body),u=this.yearJsonToMap(r.Body),o=[],s.forEach(function(e,t){var n=new U;n.DataYear=t,n.IsCurrent=u.get(t).IsCurrent,n.IsNeedSetting=e.IsNeedSetting==j.YESNO.YES,n.IsFirstTime=e.IsFirstTime==j.YESNO.YES,n.ApproveStatus=e.ApproveStatus,n.RemainingDays=e.Remainingdays,o.push(n)})),[3,4];case 3:return c=e.sent(),this.errorHandler.handleError(new j.APPError("F00409","getSettingStatus fail!"+c.message)),[3,4];case 4:return console.log("getSettingStatus returnDatas",o),[2,o]}})})},e.prototype.yearJsonToMap=function(e){console.log("yearJson",e);var t=new Map;return null!=e&&e.forEach(function(e){e.DataYear!=undefined&&t.set(e.DataYear,e)}),t},e.prototype.getOverviewData=function(e,t,n){return void 0===t&&(t=-1),void 0===n&&(n=""),j.StringUtils.isEmpty(n)?a.from(this._getOverviewDataBySQL(e,t)):a.from(this._getOverviewDataByRestful(e,t,n))},e.prototype._getOverviewDataBySQL=function(l,p){return void 0===p&&(p=-1),m(this,void 0,void 0,function(){var t,n,r,o,a,i,s,u,c;return q(this,function(e){switch(e.label){case 0:t=new W(p),e.label=1;case 1:return e.trys.push([1,9,,10]),[4,this._getGoalSettingStep1_5Data(p,!0)];case 2:return t=e.sent(),console.log("_getOverviewDataBySQL goalStepDatas",JSON.stringify(t)),null==t?[3,7]:[4,this._getMonthActualPlanBySQL(l,p,t.YearConfig.MonthQuantityOfYear,t.YearConfig.PerformanceSettlementMonth)];case 3:if(null==(n=e.sent()))throw"get MonthActualPlan data fail.";return t.Step4=n,t.Step4.Shortfall=this.calculateShortfall(t.Step1.FYFC,t.Step4.Forecast).toString(),r=new J,l!=j.PERFORMANCETYPE.PERSONAL?[3,4]:(o=t.Step2.PerCase?t.Step2.PerCase:"1",a=t.Step1.ActivityFYFC?t.Step1.ActivityFYFC:t.Step1.FYFC,i=t.Step1.ActivityDays?t.Step1.ActivityDays:t.YearConfig.NowToYearEndDays.toString(),t.Step3=this.calculateActivityData(a,o,t.YearConfig,i),[3,6]);case 4:return l!=j.PERFORMANCETYPE.TEAM?[3,6]:[4,this.getAgencyPlanMainData(p).toPromise()];case 5:if(!(s=e.sent())||!s.AgencyMainDataList.length)throw"get agencyPlan data fail.";u=s.AgencyMainDataList,console.warn("agencyPlanMainList: ",JSON.stringify(u)),console.log(u.filter(function(e){return"FYFC"==e.DataType})[0].Forecast),console.log("agencyPlanObj",r),r.FYFCForecast=u.filter(function(e){return"FYFC"==e.DataType})[0].Forecast,r.ANPForecast=u.filter(function(e){return"ANP"==e.DataType})[0].Forecast,r.ManpowerPlan=this.changeToDash(u.filter(function(e){return"Manpower"==e.DataType})[0].MonthPlan),r.RecruitmentPlan=u.filter(function(e){return"Recruitment"==e.DataType})[0].MonthPlan,r.CompletionRate=s.CompletionRate,t.AgencyPlan=r,e.label=6;case 6:return[3,8];case 7:throw"get 1_5Data Fail. goalStepDatas:"+t;case 8:return t=this._converSelectCode(t),this.goalSettingStep&&(t=this.goalSettingStep.changeEmptyToDash(t)),[3,10];case 9:return c=e.sent(),this.errorHandler.handleError(new j.APPError("F00504","getOverviewDataBySQL fail!"+c)),[3,10];case 10:return console.log("_getOverviewDataBySQL goalStepDatas",t,JSON.stringify(t)),[2,t]}})})},e.prototype._getOverviewDataByRestful=function(I,O,w){return void 0===O&&(O=-1),void 0===w&&(w=""),m(this,void 0,void 0,function(){var t,n,r,o,a,i,s,u,c,l,p,g,f,h,d,y,S,b,m,_,P,A,v,F,T,Y,D,C,M,E,N,R;return q(this,function(e){switch(e.label){case 0:console.warn("performanceType: ",I," DataYear: ",O," AgentID: ",w),i={},s=new k,u=new U,c=new V,l=new x,p=new B,g=new Q,f=new H,h=new J,s.DataYear=O,u.DataYear=O,d=new W(O),e.label=1;case 1:return e.trys.push([1,7,,8]),(y=this.APIFactory.getAPI("getGoal")).setAgentID(w),(S=this.APIFactory.getAPI("getYearConfig")).setAgentID(w),[4,Promise.all([this.dispatcher.dispatch(y).toPromise(),this.dispatcher.dispatch(S).toPromise()])];case 2:return t=L.apply(void 0,[e.sent(),2]),n=t[0],r=t[1],console.log("_getOverviewDataByRestful GetGoalResp",n),console.log("_getOverviewDataByRestful GetYearConfigResp",r),b=this.yearJsonToMap(n.Goals),m=this.yearJsonToMap(r.Configurations),_=b.get(O),P=m.get(O),_==undefined||P==undefined?[3,6]:(o=b.get(O).GoalSetting,a=b.get(O).GoalValue,console.log("_getOverviewDataByRestful goalSettingObj",o),console.log("_getOverviewDataByRestful GoalValues",a),a.forEach(function(e){i[e.DataType]=e.Value}),A=P.MonthQuantityOfYear,v=P.PerformanceSettlementMonth,[4,this._getMonthActualPlanByRestful(I,O,A,v,w)]);case 3:return(g=e.sent()).Shortfall=this.calculateShortfall(c.FYFC,g.Forecast),F=this.calculateActual(P.PerformanceSettlementMonth,g.MonthList),s.InforceConvertSubmitRate=P.InforceConvertSubmitRate,s.InforceConvertMeetRate=P.InforceConvertMeetRate,s.InforceConvertScheduleRate=P.InforceConvertScheduleRate,s.InforceConvertFindRate=P.InforceConvertFindRate,s.NowToYearEndDays=P.NowToYearEndDays,s.PerformanceSettlementMonth=P.PerformanceSettlementMonth,s.MonthQuantityOfYear=P.MonthQuantityOfYear,s.WorkingMonth=P.WorkingMonth,s.GoalAndPlanDifferenceLimit=P.GoalAndPlanDifferenceLimit,this.yearConfigExtension&&(T=this.yearConfigExtension.getExtensionData(P,{source:"Restful"}),s.setExtension(T)),u.PersonnelGoalApplicableYM=o.PersonnelGoalApplicableYM,u.TeamGoalApplicableYM=o.TeamGoalApplicableYM,u.GoalSetMonth=o.GoalSetMonth,u.ApproveStatus=o.Status,this.goalSettingExtension&&(Y=this.goalSettingExtension.getExtensionData(o,{source:"Restful"}),u.setExtension(Y)),I!=j.PERFORMANCETYPE.PERSONAL?[3,4]:(c.FYFC=i.PERSON_FYFC,c.AnnualConvention=i.ANNUAL_CONVENTION,c.MDRT=i.MDRT,c.PromotionPlan=i.PROMOTION_PLAN,c.Actual=F,c.FYFCNowToYearEnd=this.calculateNowToYearEndGoal(i.PERSON_FYFC,F),l.PerCase=i.PER_CASE_FYFC,D=i.PER_CASE_FYFC,C=i.ACTIVITY_FYFC?i.ACTIVITY_FYFC:i.PERSON_FYFC,M=i.ACTIVITY_DAYS?i.ACTIVITY_DAYS:P.NowToYearEndDays,p=this.calculateActivityData(C,D,s,M),d.YearConfig=s,d.GoalStatus=u,d.Step1=c,d.Step2=l,d.Step3=p,d.Step4=g,[3,6]);case 4:return f.TeamFYFC=i.TEAM_FYFC,f.TeamANP=i.TEAM_ANP,f.Manpower=i.TEAM_MANPOWER,f.Recruitment=i.TEAM_RECRUITMENT,[4,this.getAgencyPlanMainDataByRestful(O,w)];case 5:if(null==(E=e.sent()))throw"get agencyPlan fail.";N=E.AgencyMainDataList,h.FYFCForecast=N.filter(function(e){return"FYFC"==e.DataType})[0].Forecast,h.ANPForecast=N.filter(function(e){return"ANP"==e.DataType})[0].Forecast,h.ManpowerPlan=this.changeToDash(N.filter(function(e){return"Manpower"==e.DataType})[0].MonthPlan),h.RecruitmentPlan=N.filter(function(e){return"Recruitment"==e.DataType})[0].MonthPlan,h.CompletionRate=E.CompletionRate,d.YearConfig=s,d.GoalStatus=u,d.Step4=g,d.Step5=f,d.AgencyPlan=h,e.label=6;case 6:return d=this._converSelectCode(d),this.goalSettingStep&&(d=this.goalSettingStep.changeEmptyToDash(d)),[3,8];case 7:return R=e.sent(),this.errorHandler.handleError(new j.APPError("F00505","getOverviewDataByRestful fail!"+R.message)),[3,8];case 8:return console.log("_getOverviewDataByRestful returnDatas",d,JSON.parse(JSON.stringify(d))),[2,d]}})})},e.prototype.getMonthActualPlan=function(e,t,n,r,o){return void 0===n&&(n=12),void 0===r&&(r=99),void 0===o&&(o=""),j.StringUtils.isEmpty(o)?a.from(this._getMonthActualPlanBySQL(e,t,n,r)):a.from(this._getMonthActualPlanByRestful(e,t,n,r,o))},e.prototype._getMonthActualPlanByRestful=function(f,h,d,y,S){return m(this,void 0,void 0,function(){var t,n,r,o,a,i,s,u,c,l,p,g;return q(this,function(e){switch(e.label){case 0:o=new Q,a=[],e.label=1;case 1:return e.trys.push([1,3,,4]),i=this.APIFactory.getAPI("getGoal"),s=this.APIFactory.getAPI("getActual"),i.setAgentID(S),s.setAgentID(S),[4,Promise.all([this.dispatcher.dispatch(i).toPromise(),this.dispatcher.dispatch(s).toPromise()])];case 2:if(t=L.apply(void 0,[e.sent(),2]),n=t[0],r=t[1],console.log("GoalResp",n),console.log("ActualResp",r),u=new Map,c=new Map,l=[],null==n.Goals||null==r.Actual)throw"get Goal fail. GoalResp:"+n;for(n.Goals.forEach(function(e){e.DataYear==h&&null!=e.GoalPlan.Values&&e.GoalPlan.Values.forEach(function(e){e.PerformanceType==f&&u.set(e.Month,e.Value.toString())})}),l=r.Actual.filter(function(e){return e.DataYear==h}).map(function(e){return e.Values}),console.log("thisActual",l),l.forEach(function(e){e.forEach(function(e){"FYFC"==e.DataType&&e.PerformanceType==f&&c.set(e.Month,e.Value.toString())})}),p=1;p<=d;p++)a.push(new E(p,this.changeToDash(u.get(p)),null==c.get(p)||y<p?this.DASH:c.get(p)));return o.MonthList=a,o.Actual=this.calculateActual(y,a).toString(),o.Forecast=this.calculateForecast(y,a).toString(),o.Shortfall=null,[3,4];case 3:return g=e.sent(),this.errorHandler.handleError(new j.APPError("F00410","getMonthActualPlanByRestful fail!"+g.message)),[3,4];case 4:return console.log("_getMonthActualPlanByRestful Datas",o),[2,o]}})})},e.prototype._getMonthActualPlanBySQL=function(g,f,h,d){return m(this,void 0,void 0,function(){var t,n,r,o,a,i,s,u,c,l,p;return q(this,function(e){switch(e.label){case 0:console.log("_getMonthActualPlanBySQL performanceType",g,"DataYear",f,"monthQuantityOfYear",h,"PerformanceSettlementMonth",d),n=new Q,r=[],e.label=1;case 1:return e.trys.push([1,3,,4]),a=o=void 0,i=Array(h).fill(this.DASH,0),s=Array(h).fill(this.DASH,0),u=this.APIFactory.getAPI("getGoalSettingPlan"),c=this.APIFactory.getAPI("getGoalSettingActualValue"),u.setDataYear(f),c.setDataYear(f),[4,Promise.all([this.dispatcher.dispatch(u).toPromise(),this.dispatcher.dispatch(c).toPromise()])];case 2:if(t=L.apply(void 0,[e.sent(),2]),a=t[0],o=t[1],console.log("goalPlanResp",a),console.log("actualResp",o),!a.Header.status||!o.Header.status)throw"get GoalSetting fail. goalPlanResp"+a.Header.msg+"actualResp:"+o.Header.msg;for(a.Body.filter(function(e){return e.PerformanceType==g}).map(function(e){i[e.Month-1]=e.Value.toString()}),o.Body.filter(function(e){return e.PerformanceType==g&&"FYFC"==e.DataType&&e.Month<=d}).map(function(e){s[e.Month-1]=e.Value.toString()}),console.log("goalPlanList",i),console.log("actuallist",s),l=1;l<=h;l++)r.push(new E(l,i[l-1],s[l-1]));return n.MonthList=r,n.Actual=this.calculateActual(d,r).toString(),n.Forecast=this.calculateForecast(d,r).toString(),n.Shortfall=null,[3,4];case 3:return p=e.sent(),this.errorHandler.handleError(new j.APPError("F00411","getMonthActualPlanBySQL fail!"+p.message)),[3,4];case 4:return console.log("_getMonthActualPlanBySQL returnData",n),[2,n]}})})},e.prototype.getAgencyPlanMainData=function(e,t){return void 0===t&&(t=""),""==t?a.from(this.getAgencyPlanMainDataBySQL(e)):""!=t?a.from(this.getAgencyPlanMainDataByRestful(e,t)):void 0},e.prototype.getAgencyPlanMainDataBySQL=function(f){return m(this,void 0,void 0,function(){var t,n,r,o,a,i,s,u,c,l,p,g=this;return q(this,function(e){switch(e.label){case 0:console.log("getAgencyPlanMainDataBySQL DataYear",f),n=new oe,e.label=1;case 1:return e.trys.push([1,3,,4]),a=this.APIFactory.getAPI("getOtherParameter"),i=this.APIFactory.getAPI("getAgencyPlanMain"),a.SetYear(f),i.setDataYear(f),[4,Promise.all([a,i].map(function(e){return g.dispatcher.dispatch(e).toPromise()}))];case 2:if(t=L.apply(void 0,[e.sent(),2]),r=t[0],o=t[1],console.log("otherParaResp: ",r,"agencyPlanResp",o),r.Header.status&&o.Header.status){if(s=r.Body.filter(function(e){return"CompletionRate"===e.MappingID}),u=0<s.length?s[0].SetValue:"",c=[],l=o.Body,console.log("getAgencyPlanMainDataBySQL AgencyPlanMainList",l),!l)throw"get AgencyPlanMainList fail.";c=l.map(function(e){return g._agencyPlanMainDataObjToBean(e)}),console.log("getAgencyPlanMainDataBySQL returnList:",c),console.log("completionRate:",u),n.CompletionRate=u,n.AgencyMainDataList=c}return[3,4];case 3:return p=e.sent(),this.errorHandler.handleError(new j.APPError("F00300","getAgencyPlanMainDataBySQL fail!"+p)),[3,4];case 4:return console.log("getAgencyPlanMainDataBySQL returnData",n),[2,n]}})})},e.prototype._agencyPlanMainDataObjToBean=function(e){var t=new G;return t.Actual=e.Actual,t.DataType=e.DataType,t.DataYear=e.DataYear,t.Forecast=e.Forecast,t.MonthPlan=this.changeToDash(e.MonthPlan),t},e.prototype.getAgencyPlanMainDataByRestful=function(l,p){return m(this,void 0,void 0,function(){var t,n,r,o,a,i,s,u,c=this;return q(this,function(e){switch(e.label){case 0:console.log("getAgencyPlanMainDataByRestful dataYear",l,"AgentID",p),t=new oe,n=[],e.label=1;case 1:return e.trys.push([1,3,,4]),(r=this.APIFactory.getAPI("getAgencyPlan")).setAgentID(p),[4,this.dispatcher.dispatch(r).toPromise()];case 2:if(o=e.sent(),console.log("getAgencyPlanMainDataByRestful agencyPlanResp ",o),null==o.AgencyPlans)throw"get AgencyPlan fail. agencyPlanResp:"+o;return a=this.yearJsonToMap(o.AgencyPlans),i=a.get(l).CompletionRate,(s=a.get(l).Values).forEach(function(e){e.MonthPlan=e.Plan,e.DataYear=l}),n=s.map(function(e){return c._agencyPlanMainDataObjToBean(e)}),t.AgencyMainDataList=n,t.CompletionRate=i,[3,4];case 3:return u=e.sent(),this.errorHandler.handleError(new j.APPError("F00301","getAgencyPlanMainDataByRestful fail!"+u.message)),[3,4];case 4:return console.log("getAgencyPlanMainDataByRestful returnData ",t),[2,t]}})})},e.prototype.getAgencyPlanDetailData=function(e){var r=this,t=this.APIFactory.getAPI("getAgencyPlanDetail");return t.setDataYear(e),a.Observable.create(function(n){try{r.dispatcher.dispatch(t).subscribe(function(e){if(!e.Body)throw"get agencyPlanGetDetail fail. resp:"+e;var t;t=e.Body.map(function(e){return r._agencyPlanDetailObjToBean(e)}),console.log("returnList in service: ",t),n.next(t),n.complete()})}catch(e){r.errorHandler.handleError(new j.APPError("F00302","getAgencyPlanDetailData fail!"+e.message))}})},e.prototype._agencyPlanDetailObjToBean=function(e){var t=new R;return t.AgentID=e.AgentID,t.AgentName=e.AgentName,t.DataYear=e.DataYear,t.AppUseMode=e.AppUseMode,t.JobGrade=e.JobGrade,t.Actual=this.changeToDash(e.Actual),t.CaseCount=this.changeToDash(e.CaseCount),t.ClientID=e.ClientID,t.DataType=e.DataType,t.DirectUnitType=e.DirectUnitType,t.Drilldown=e.Drilldown,t.TextColor="Y"==t.Drilldown?"blue":"default",t.Forecast=this.changeToDash(e.Forecast),t.Goal=this.changeToDash(e.Goal),t.IsApprove=e.IsApprove,t.IsHasDot="Y"===t.IsApprove,t.Manpower=e.Manpower,t.MonthPlan=this.changeToDash(e.MonthPlan),t.Orders=e.Orders,t.PerCase=this.changeToDash(e.PerCase),t.Recruitment=e.Recruitment,t},e.prototype.getGoalExpected=function(l){return m(this,void 0,void 0,function(){var t,n,r,o,a,i,s,u,c;return q(this,function(e){switch(e.label){case 0:(r=this.APIFactory.getAPI("getGoalSettingYearConfig")).setDataYear(l),(o=this.APIFactory.getAPI("getGoalSettingExpected")).setDataYear(l),e.label=1;case 1:return e.trys.push([1,3,,4]),i=a=void 0,[4,Promise.all([this.dispatcher.dispatch(r).toPromise(),this.dispatcher.dispatch(o).toPromise()])];case 2:if(t=L.apply(void 0,[e.sent(),2]),a=t[0],!(i=t[1])||!a)throw"get goal expected and yearConfigfail.";return s=i.Body,u=a.Body,(n=0<s.length?this._agencyPlanGoalExpectedObjToBean(s[0]):new I(l)).FYFCConvertANPRate=u[0].FyfcCovertAnpRate,n.WorkingQuarter=u[0].WorkingQuarter,console.log("getGoalExpected trans",n),[2,n];case 3:return c=e.sent(),this.errorHandler.handleError(new j.APPError("F00303","getGoalExpected fail!"+c.message)),[3,4];case 4:return[2]}})})},e.prototype._agencyPlanGoalExpectedObjToBean=function(e){var t=new I(e.DataYear);t.ANP=e.ANP.toString(),t.FYFC=e.FYFC.toString(),t.Q1=e.Q1.toString(),t.Q2=e.Q2.toString(),t.Q3=e.Q3.toString(),t.Q4=e.Q4.toString();var n=j.NumberUtils.isNumber(e.RecruitmentTotal)?Number(e.RecruitmentTotal):0;return t.RecruitmentTotal=n,t},e.prototype.calculaRecruitmentSum=function(e){return[e.Q1,e.Q2,e.Q3,e.Q4].reduce(function(e,t){return e+(j.NumberUtils.isNumber(t)?Number(t):0)},0)},e.prototype.saveGoalExpected=function(e,t){var n=this,r=this.APIFactory.getAPI("setGoalSettingExpected");return r.setExpectedRecruitment(e),r.setIndirectRecruitment(t),a.Observable.create(function(t){try{n.dispatcher.dispatch(r).subscribe(function(e){t.next(e.Header),t.complete()})}catch(e){n.errorHandler.handleError(new j.APPError("F00304","saveGoalExpected fail!"+e.message))}})},e.prototype.numberToFix=function(e,t){var n=Math.pow(10,t);return Math.round(this.strip(e)*n)/n},e.prototype.strip=function(e,t){return void 0===t&&(t=12),Number(e.toPrecision(t))},e.prototype.calculateNowToYearEndGoal=function(e,t){console.log("calculateNowToYearEndGoal FYFC:",e,"actual:",t);var n=j.NumberUtils.isNumber(t)?Number(t):0;return j.NumberUtils.isNumber(e)?(Number(e)-n<0?0:Number(e)-n).toString():this.DASH},e.prototype.calculateAllYearGoal=function(e,t){console.log("calculateNowToYearEndGoal NowToYearEnd:",e,"actual:",t);var n=j.NumberUtils.isNumber(t)?Number(t):0;return j.NumberUtils.isNumber(e)?(Number(e)+n).toString():this.DASH},Object.defineProperty(e.prototype,"saveFeedbackState",{get:function(){return this._isPopup},set:function(e){this._isPopup=e},enumerable:!0,configurable:!0}),e.prototype.getActualPlanFromMonthList=function(e,n){return console.log("getActualPlanFromMonthList:",e,n),e.map(function(e,t){return t+1<n||t+1===n?e.Actual:e.Plan})},e.prototype.calculateANPFromFYFC=function(e,t){return j.StringUtils.isEmpty(e)||e==this.DASH?this.DASH:this.numberToFix(Number(e)*Number(t),0).toString()},e.prototype.calculateFYFCFromANP=function(e,t){return j.StringUtils.isEmpty(e)||e==this.DASH?this.DASH:this.numberToFix(Number(e)/Number(t),0).toString()},e.prototype.syncGoalDatas=function(){return m(this,void 0,void 0,function(){return q(this,function(e){switch(e.label){case 0:return this.goalStore.setSyncGoalDatas(ce.SYNC),[4,this.dataSyncService.syncFunc(["GOAL","PROGRESS"],!0)];case 1:return e.sent(),this.goalStore.setSyncGoalDatas(ce.FINISH),[2]}})})},e.prototype.syncAgencyPlan=function(){return m(this,void 0,void 0,function(){return q(this,function(e){return[2,this.dataSyncService.syncFunc(["AGENCY_PLAN"],!0)]})})},e.prototype.syncYearConfig=function(){return m(this,void 0,void 0,function(){return q(this,function(e){return[2,this.dataSyncService.syncFunc(["YEAR_CONFIG"],!0)]})})},e.prototype.pushApproveGoal=function(t){return m(this,void 0,void 0,function(){return q(this,function(e){return[2,this._pushApproveGoal(t)]})})},e.prototype.changeToDash=function(e){return-1===e||null===e||""===e?this.DASH:e.toString()},e.prototype._pushApproveGoal=function(s){return m(this,void 0,void 0,function(){var t,n,r,o,a,i;return q(this,function(e){switch(e.label){case 0:t=new j.SuccessStatus(!1),n={AgentID:s.AgentID,DataYear:s.DataYear,isApprove:s.IsApprove,comment:s.Comment},e.label=1;case 1:return e.trys.push([1,6,,7]),r=n,(o=this.APIFactory.getAPI("pushApproveGoal")).mainData=r,console.log("pushApproveGoal mainData",r),[4,this.dispatcher.dispatch(o).toPromise()];case 2:return a=e.sent(),console.log("getResp",a),a.success?[4,this.dataSyncService.syncFunc(["DASHBOARD","GOAL","PROGRESS"])]:[3,4];case 3:return e.sent(),t.isSuccess=!0,[3,5];case 4:throw"Approve Goal fail.";case 5:return[3,7];case 6:return i=e.sent(),this.errorHandler.handleError(new j.APPError("F00100","pushApproveGoal fail!"+i.message)),[3,7];case 7:return console.log("[_pushApproveGoal] returnResp:",t),[2,t]}})})},e.prototype._pushGoalSetting=function(a){return m(this,void 0,void 0,function(){var t,n,r,o;return q(this,function(e){switch(e.label){case 0:t=new j.SuccessStatus(!1),e.label=1;case 1:return e.trys.push([1,3,,4]),console.log("pushGoalSettingDataAPI mainData",a),(n=this.APIFactory.getAPI("pushGoalSettingData")).mainData=a,[4,this.dispatcher.dispatch(n).toPromise()];case 2:if(!(r=e.sent()).success)throw"push Goal failed,"+r.Header.msg;return t.isSuccess=!0,[3,4];case 3:return o=e.sent(),this.errorHandler.handleError(new j.APPError("F00101",o)),[3,4];case 4:return[2,t]}})})},e.prototype._converSelectCode=function(o){var a=this;return this.ColMapToProfile.forEach(function(e,t){var n=a.ColMapToProfileCodeMap.get(t);if(n.length&&o.Step1&&o.Step1[t]){var r=o.Step1[t];n=n.filter(function(e){return e.getCode()==r}),o.Step1[t]=n.length?n[0].getMappingID():a.DASH}}),o},e.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:j.APIDispatch},{type:j.APIFactory},{type:ae},{type:r.ErrorHandler},{type:undefined,decorators:[{type:r.Optional},{type:r.Inject,args:[o]}]},{type:undefined,decorators:[{type:r.Optional},{type:r.Inject,args:[j.yearConfigExtensionDataToken]}]},{type:undefined,decorators:[{type:r.Optional},{type:r.Inject,args:[j.goalSettingExtensionDataToken]}]},{type:j.DataSyncService},{type:j.ProfileCodeService}]},e.ngInjectableDef=r.defineInjectable({factory:function(){return new e(r.inject(j.APIDispatch),r.inject(j.APIFactory),r.inject(ae),r.inject(r.ErrorHandler),r.inject(o,8),r.inject(j.yearConfigExtensionDataToken,8),r.inject(j.goalSettingExtensionDataToken,8),r.inject(j.DataSyncService),r.inject(j.ProfileCodeService))},token:e,providedIn:"root"}),S([j.Valid("GoalSettingStepData"),b("design:type",Function),b("design:paramtypes",[Number,Boolean]),b("design:returntype",a.Observable)],e.prototype,"getGoalSettingStep1_5Data",null),S([j.Valid("GoalSettingStep3"),b("design:type",Function),b("design:paramtypes",[String,String,k,String]),b("design:returntype",B)],e.prototype,"calculateActivityData",null),S([j.Valid("GoalSettingStep4"),b("design:type",Function),b("design:paramtypes",[k,String,Array]),b("design:returntype",Q)],e.prototype,"calculateMonthActualPlan",null),S([j.Valid("IsApproveInfo"),b("design:type",Function),b("design:paramtypes",[String,Number,W]),b("design:returntype",a.Observable)],e.prototype,"isNeedApprove",null),S([j.Valid("IsApproveInfo"),b("design:type",Function),b("design:paramtypes",[String,String,Number]),b("design:returntype",a.Observable)],e.prototype,"isNeedApprove_plan",null),S([j.Valid("SuccessStatus"),b("design:type",Function),b("design:paramtypes",[String,Boolean,W]),b("design:returntype",a.Observable)],e.prototype,"submitGoal",null),S([j.Valid("GoalSettingStepData"),b("design:type",Function),b("design:paramtypes",[String,Number,String]),b("design:returntype",a.Observable)],e.prototype,"getOverviewData",null),S([j.Valid("GoalSettingStep4"),b("design:type",Function),b("design:paramtypes",[String,Number,Number,Number,String]),b("design:returntype",a.Observable)],e.prototype,"getMonthActualPlan",null),S([j.Valid("AgencyPlanDetail"),b("design:type",Function),b("design:paramtypes",[Number]),b("design:returntype",a.Observable)],e.prototype,"getAgencyPlanDetailData",null),S([j.Valid("AgencyPlanGoalExpected"),b("design:type",Function),b("design:paramtypes",[Number]),b("design:returntype",Promise)],e.prototype,"getGoalExpected",null),S([j.Valid("SuccessStatus"),b("design:type",Function),b("design:paramtypes",[ee]),b("design:returntype",Promise)],e.prototype,"pushApproveGoal",null),e}(),pe=function(){function e(e,t,n,r){this.errorHandler=e,this.goalSettingService=t,this.goalSettingStep=n,this.goalValid=r,this.numberValid=[],this.requiredValid=[],this.goalValid?(this.numberValid=this.goalValid.getNumberArray(),this.requiredValid=this.goalValid.getRequiredArray()):(this.numberValid=["FYFC","FYFCNowToYearEnd","PerCase","TeamFYFC","TeamFYFCNowToYearEnd","Recruitment","Manpower"],this.requiredValid=["FYFC","FYFCNowToYearEnd","AnnualConvention","MDRT","PerCase","TeamFYFC","TeamFYFCNowToYearEnd","Manpower","Recruitment"])}return e.prototype.onChangeValid=function(e,t,n,r,o,a,i){void 0===i&&(i=!1),console.log("onChangeValid colId",t,"val",n,"validDatas",r,a,"isPageValid",i);try{var s=void 0,u=-1!=t.indexOf("Plan_")&&j.StringUtils.isEmpty(n),c=-1!=this.requiredValid.indexOf(t)&&j.StringUtils.isEmpty(n),l=-1!=this.numberValid.indexOf(t)&&!j.NumberUtils.isPositive(n),p=c||l||u,g=-1!=t.indexOf("Plan_")?"Plan_required":t+"_required";if(a=this._setError(e,t,"_required",p,a,g),p||-1==this.numberValid.indexOf(t)&&-1==t.indexOf("Plan_")||(s=j.NumberUtils.isDecimal(n),a=this._setError(e,t,"_point",s,a)),console.log("isDecimalResult",s,"vaildEmptyResult",p,"isPageValid",i),!s&&!p&&!i)if(console.log("onChangeValid no error"),-1!=t.indexOf("Plan_")&&(r.Step4.Forecast=this.goalSettingService.calculateForecast(r.YearConfig.PerformanceSettlementMonth,r.Step4.MonthList),r.Step4.Shortfall=this.goalSettingService.calculateShortfall(r.Step1.FYFC,r.Step4.Forecast),a=this._validShortfall(r.Step4,a)),o){var f=Number(r.Step1.Actual)>Number(r.Step1.FYFC),h=j.NumberUtils.isPositive(r.Step1.FYFCNowToYearEnd);switch(t){case"FYFC":r.Step1.FYFCNowToYearEnd=this.goalSettingService.calculateNowToYearEndGoal(n,r.Step1.Actual),a=this._setError(1,t,"_small",f,a),a=this._setError(1,"FYFCNowToYearEnd","_required",!h,a),!f&&h&&(r.Step3=this.goalSettingService.calculateActivityData(r.Step1.FYFCNowToYearEnd,r.Step2.PerCase,r.YearConfig),r.Step4.Forecast=this.goalSettingService.calculateForecast(r.YearConfig.PerformanceSettlementMonth,r.Step4.MonthList),r.Step4.Shortfall=this.goalSettingService.calculateShortfall(Number(n),r.Step4.Forecast),a=this._validShortfall(r.Step4,a));break;case"FYFCNowToYearEnd":r.Step1.FYFC=this.goalSettingService.calculateAllYearGoal(n,r.Step1.Actual),a=this.onChangeValid(1,"FYFC",r.Step1.FYFC,r,!0,a);break;case"PerCase":!f&&h&&(r.Step3=this.goalSettingService.calculateActivityData(r.Step1.FYFCNowToYearEnd,n,r.YearConfig));break;case"TeamFYFC":r.Step5.TeamFYFCNowToYearEnd=this.goalSettingService.calculateNowToYearEndGoal(n,r.Step5.TeamFYFCActual);var d=Number(r.Step5.TeamFYFCActual)>Number(r.Step5.TeamFYFC),y=j.NumberUtils.isPositive(r.Step5.TeamFYFCNowToYearEnd);r.Step5.TeamANP=this.goalSettingService.calculateANPFromFYFC(r.Step5.TeamFYFC,r.YearConfig.FyfcCovertAnpRate),r.Step5.TeamANPNowToYearEnd=this.goalSettingService.calculateANPFromFYFC(r.Step5.TeamFYFCNowToYearEnd,r.YearConfig.FyfcCovertAnpRate),a=this._setError(5,"TeamFYFC","_small",d,a),a=this._setError(5,"TeamFYFCNowToYearEnd","_required",!y,a);break;case"TeamFYFCNowToYearEnd":r.Step5.TeamFYFC=this.goalSettingService.calculateAllYearGoal(n,r.Step5.TeamFYFCActual),a=this.onChangeValid(1,"TeamFYFC",r.Step5.TeamFYFC,r,!0,a)}}else switch(t){case"TeamFYFC":r.Step5.TeamANP=this.goalSettingService.calculateANPFromFYFC(n,r.YearConfig.FyfcCovertAnpRate);break;case"TeamFYFCNowToYearEnd":r.Step5.TeamANPNowToYearEnd=this.goalSettingService.calculateANPFromFYFC(n,r.YearConfig.FyfcCovertAnpRate);break;case"FYFC":r.Step3=this.goalSettingService.calculateActivityData(n,r.Step2.PerCase,r.YearConfig),r.Step4=this.goalSettingService.calculateMonthActualPlan(r.YearConfig,n,r.ActualList),r.Step4.Shortfall=this.goalSettingService.calculateShortfall(Number(n),r.Step4.Forecast),a=this.unitPageValid(4,r,!1,a);break;case"PerCase":r.Step3=this.goalSettingService.calculateActivityData(r.Step1.FYFC,n,r.YearConfig)}}catch(S){this.errorHandler.handleError(new j.APPError("F00406","onChangeValid fail!"+S.message))}return console.log("onChangeValid errorResult",a),a},e.prototype.pageValid=function(t,n,r){var o=this;console.log("pageValid step",t,"validDatas",JSON.stringify(n),r);var a=[];try{[5,4,2,1].forEach(function(e){e<=t&&null!=n["Step"+e]&&n["Step"+e]!=undefined&&(a=o.unitPageValid(e,n,r,a))})}catch(e){this.errorHandler.handleError(new j.APPError("F00407","pageValid fail!"+e.message))}return a},e.prototype.unitPageValid=function(t,n,r,o){var a=this,e=new Map,i=["FYFC","AnnualConvention","MDRT","PromotionPlan"],s=["TeamFYFC","TeamANP","Manpower","Recruitment"];if(e.set(1,i),e.set(2,["PerCase"]),e.set(5,s),4==t){var u=n.Step4.MonthList,c=n.YearConfig.PerformanceSettlementMonth;u.filter(function(e){return e.Month>c}).forEach(function(e){o=a.onChangeValid(4,"Plan_"+e.Month,e.Plan,n,!1,o,!0)}),o=this._validShortfall(n.Step4,o)}else{r&&(s.push("TeamFYFCNowToYearEnd"),i.push("FYFCNowToYearEnd")),e.get(t).forEach(function(e){o=a.onChangeValid(t,e,n["Step"+t][e],n,r,o,!0)})}return o},e.prototype._setError=function(e,t,n,r,o,a){return void 0===a&&(a=""),console.log("step",e,"colId",t,"errorType",n,"validresult",r,"errorResult",o),a=j.StringUtils.isEmpty(a)?t+n:a,o=o.filter(function(e){return e.ColId!=t||e.ColId==t&&e.Msg.indexOf(a)}),r&&o.push(new $(e,t,a)),console.log("errorResult",o),o},e.prototype._validShortfall=function(e,t){if(this.goalSettingStep){var n=this.goalSettingStep.validateGoal_Forecast(Number(e.Shortfall));t=this._setError(4,"Shortfall","value",n,t,"Shortfall_nonZero")}else{n=0!=Number(e.Shortfall);t=this._setError(4,"Shortfall","value",n,t,"Shortfall_nonZero")}return t},e.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:r.ErrorHandler},{type:le},{type:undefined,decorators:[{type:r.Optional},{type:r.Inject,args:[o]}]},{type:undefined,decorators:[{type:r.Optional},{type:r.Inject,args:[i]}]}]},e.ngInjectableDef=r.defineInjectable({factory:function(){return new e(r.inject(r.ErrorHandler),r.inject(le),r.inject(o,8),r.inject(i,8))},token:e,providedIn:"root"}),e}(),ge=function(){function e(){this._agencyState=new re(ne.DISPLAY,null),this._stateBehaviorSubject=new a.BehaviorSubject(this._agencyState),this._detailBehaviorSubject=new a.BehaviorSubject(this._agencyDetail)}return e.prototype.setState=function(e){this._agencyState=e,this._stateBehaviorSubject.next(this._agencyState)},e.prototype.getState=function(){return this._stateBehaviorSubject},e.prototype.setCurrentAgencyDetail=function(e){console.log("setCurrentAgencyDetail agentInfo:",e),this._agencyDetail=e,this._detailBehaviorSubject.next(this._agencyDetail)},e.prototype.getCurrentAgencyDetail=function(){return this._detailBehaviorSubject},e.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=r.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),fe=function(){function e(e,t){this.title=e,this.desc=t}return e.prototype.getTitle=function(){return this.title},e.prototype.setTitle=function(e){this.title=e},e.prototype.getDesc=function(){return this.desc},e.prototype.setDesc=function(e){this.desc=e},e}(),he=function(){function e(e){this.translateService=e}return e.prototype.getStep3TabOptionList=function(e){var t=v.DAILY,n=v.WEEKLY,r=v.MONTHLY,o=[];switch(e){case"Day":o=[t,n,r];break;case"Week":o=[n,r];break;case"Month":o=[r]}return o},e.prototype.transformTeamStep5Data=function(e,t){var n=[new fe(this.translateService.translate("FYFC_Goal"),e.TeamFYFC),new fe(this.translateService.translate("ANP_Goal"),e.TeamANP),new fe(this.translateService.translate("Manpower_Goal"),e.Manpower),new fe(this.translateService.translate("Recruitment_Goal"),e.Recruitment)],r=[new fe(this.translateService.translate("FYFC_Forecast"),t.FYFCForecast.toString()),new fe(this.translateService.translate("ANP_Forecast"),t.ANPForecast.toString()),new fe(this.translateService.translate("Manpower_Plan"),t.ManpowerPlan.toString()),new fe(this.translateService.translate("Recruitment_Plan"),t.RecruitmentPlan.toString())],o=Array(n.length).fill(!1).map(function(e,t){return!isNaN(Number(r[t].getDesc()))&&Number(n[t].getDesc())>Number(r[t].getDesc())});return new X(n,r,o)},e.prototype.getTabChangeStep3=function(e,t){var n,r;return e==v.DAILY?(n=t.ActivityValues.filter(function(e){return e.TimeBase==j.TIMEBASE.DAY})[0],r="Goal_Setting_Day"):e==v.WEEKLY?(n=t.ActivityValues.filter(function(e){return e.TimeBase==j.TIMEBASE.WEEK})[0],r="Goal_Setting_Week"):e==v.MONTHLY&&(n=t.ActivityValues.filter(function(e){return e.TimeBase==j.TIMEBASE.MONTH})[0],r="Goal_Setting_Month"),new Z(n,r)},e.prototype.translateByStepData=function(e){return this.translateByYearConfigAndGoaslStatus(e.YearConfig,e.GoalStatus)},e.prototype.translateByYearConfigAndGoaslStatus=function(e,t){var n=this._getTranslateVariable(e,t),r=new K;return r.TeamGoalEffectiveMonthTitle=this.translateService.translateWithVariable("Goal_Effective_Month",{effectiveMonthWithUnit:this.translateService.translate("Month_"+t.TeamGoalApplicableYM)}),r.PersonalGoalEffectiveMonthTitle=this.translateService.translateWithVariable("Goal_Effective_Month",n),r.NowToYearEndTitle=this.translateService.translateWithVariable("Now_To_Year_End",n),r.FYFCNowToYearEndTitle=this.translateService.translateWithVariable("FYFC_Now_To_Year_End",n),r.ANPNowToYearEndTitle=this.translateService.translateWithVariable("ANP_Now_To_Year_End",n),this._isHasEffectiveMonthAndSettlementMonth(n.effectiveMonth,n.settlementMonth)?r.PersonalFYFCActualVariableTitle=this.translateService.translateWithVariable("FYFC_Actual_Variable",n):r.PersonalFYFCActualVariableTitle=this.translateService.translate("FYFC_Actual_Dash"),this._isHasEffectiveMonthAndSettlementMonth(t.TeamGoalApplicableYM,e.PerformanceSettlementMonth)?(r.TeamFYFCActualVariableTitle=this.translateService.translateWithVariable("FYFC_Actual_Variable",{effectiveMonth:t.TeamGoalApplicableYM,settlementMonth:e.PerformanceSettlementMonth}),r.TeamANPActualVariableTitle=this.translateService.translateWithVariable("ANP_Actual_Variable",{effectiveMonth:t.TeamGoalApplicableYM,settlementMonth:e.PerformanceSettlementMonth})):(r.TeamFYFCActualVariableTitle=this.translateService.translate("FYFC_Actual_Dash"),r.TeamANPActualVariableTitle=this.translateService.translate("ANP_Actual_Dash")),r},e.prototype._getTranslateVariable=function(e,t){return{effectiveMonthWithUnit:this.translateService.translate("Month_"+t.PersonnelGoalApplicableYM),workingMonth:0==e.WorkingMonth?1:e.WorkingMonth,theLastMonth:e.MonthQuantityOfYear,effectiveMonth:t.PersonnelGoalApplicableYM,settlementMonth:e.PerformanceSettlementMonth}},e.prototype._isHasEffectiveMonthAndSettlementMonth=function(e,t){var n=j.StringUtils.isNotEmpty(e)&&j.StringUtils.isNotEmpty(t),r=!isNaN(Number(e))&&!isNaN(Number(t)),o=0<Number(e)&&0<Number(t);return n&&r&&o},e.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:j.TranslateService}]},e.ngInjectableDef=r.defineInjectable({factory:function(){return new e(r.inject(j.TranslateService))},token:e,providedIn:"root"}),e}();e.goalSettingStepToken=o,e.goalValidToken=i,e.goalSettingShowRuleToken=s,e.GoalSubmitExtensionToken=c,e.GoalModule=l,e.GoalSettingGetGoalSettingAPI=p,e.GoalSettingGetYearConfigAPI=g,e.AgencyPlanGetMainAPI=f,e.AgencyPlanGetDetailAPI=h,e.GoalSettingGetExpectedAPI=d,e.GoalSettingGetValueAPI=y,e.GoalSettingSetExpectedAPI=_,e.GoalSettingGetPlanAPI=P,e.GoalSettingGetActualAPI=A,e.DWM_DATETYPE=v,e.GOALSETTINGSTEP=F,e.GOALSETTINGSETMODE=T,e.ROLE={AGENT:"AG",AGENTLEADER:"AL",ZONEHEAD:"Manager",CAO:"Supervisor"},e.APPROVESTATUS={PENDING:"P",WAINTING:"W",NONE:"N",APPROVE:"A"},e.APITYPE={SQLITE:"SQLITE",RESTFUL:"RESTFUL",MOCK:"MOCK"},e.ValidationState=Y,e.PlanFYFCPopupInfo=D,e.GoalSettingStep1=V,e.GoalSettingStep2=x,e.GoalSettingStep3=B,e.GoalSettingStep4=Q,e.GoalSettingStep5=H,e.GoalSettingYearConfig=k,e.ActivityValue=C,e.GoalSettingStepData=W,e.GoalSettingGoalStatus=U,e.IsApproveInfo=M,e.MonthlyPlanFYFCData=E,e.AgencyPlanAgentInfo=N,e.AgencyPlanDetail=R,e.AgencyPlanGoalExpected=I,e.GoalSettingPlanPopup=O,e.AgencyPlanDirectUnitDetail=w,e.AgencyPlanMainData=G,e.AgencyPlanDataForOverview=J,e.SettingChangeEvent=z,e.GoalSettingTranslate=K,e.CombineStep5AndAgecyPlanData=X,e.GoalSettingStep3ForTabChange=Z,e.ValidError=$,e.ApproveInfo=ee,e.GoalSettingStepDataParams=te,e.AGENCY_STATE=ne,e.AgencyPlanStatus=re,e.AgencyPlanMainInfo=oe,e.GoalSettingService=le,e.GoalValidService=pe,e.GoalStoreService=ae,e.GoalPopupResponse=ie,e.GOAL_LANDING_STATUS=se,e.PLAN_FYFC_POPUP_STATE=ue,e.SYNC_STATUS=ce,e.AgencyPlanStoreService=ge,e.GoalSettingUtilService=he,e.GoalTitleListItem=fe,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=allianzSND-goal.umd.min.js.map