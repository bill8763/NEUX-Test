/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { from } from 'rxjs';
import { PersonalDataType } from '../service/model/Enum/PersonalDataType';
import { PersonalDataTimeBase } from '../service/model/Enum/PersonalDataTimeBase';
export class GetProgressDataAPI {
    /**
     * @param {?} daoFactory
     */
    constructor(daoFactory) {
        this._clientID = 0;
        this._personalDataType = PersonalDataType.Actual;
        this._personalDataTimeBase = PersonalDataTimeBase.Day;
        this._searchYear = 0;
        this._daoFactory = daoFactory;
    }
    //condition year
    /**
     * @param {?} value
     * @return {?}
     */
    set SearchYear(value) {
        this._searchYear = value;
    }
    /**
     * @return {?}
     */
    get SearchYear() {
        return this._searchYear;
    }
    //condition client id
    /**
     * @param {?} id
     * @return {?}
     */
    set SearchClientId(id) {
        this._clientID = id;
    }
    /**
     * @return {?}
     */
    get SearchCLientId() {
        return this._clientID;
    }
    //condition data type
    /**
     * @param {?} type
     * @return {?}
     */
    set SearchDataType(type) {
        this._personalDataType = type;
    }
    /**
     * @return {?}
     */
    get SearchDataType() {
        return this._personalDataType;
    }
    //condition time base
    /**
     * @param {?} time
     * @return {?}
     */
    set SearchTimeBase(time) {
        this._personalDataTimeBase = time;
    }
    /**
     * @return {?}
     */
    get SearchTimeBase() {
        return this._personalDataTimeBase;
    }
    /**
     * @return {?}
     */
    getAPIName() {
        return 'getProgressData';
    }
    /**
     * @return {?}
     */
    getMockPath() {
        return './assets/mock/getProgressDataMock.json';
    }
    /**
     * @return {?}
     */
    executeSQL() {
        console.debug("SQLite progress start ");
        /*
                let defaultProgressObj =
                {
                    "lastUpdateTime": "",
                    "Progress":[],
                };
                */
        /*
                // Progress [progressObj, progressObj] *2
                let progressObj:
                {
                    "DataYear": "",
                    "YesterdayPoint": "",
                    "Values":[]
                };
                */
        /*
                // progressObj.Value[] * n
                let progresValueObj =
                {
                    "DataType":"",
                    "TimeBase": "",
                    "FYFC": 0,
                    "Find": 0,
                    "Schedule": 0,
                    "Meet": 0,
                    "Submit": 0,
                    "Inforce": 0
                };
                */
        // test class to obj type
        /** @type {?} */
        let defaultDao = this._daoFactory.getDefaultDao();
        console.debug("SQLite progress defaultDao: ", defaultDao);
        /** @type {?} */
        let progressTableObj = this._daoFactory.getDefaultTable("TW_LH_SD_VW_Personal_Progress");
        console.debug("SQLite progress progressTableObj: ", progressTableObj);
        if (progressTableObj != undefined && defaultDao != undefined) {
            return from(defaultDao.queryByTable(progressTableObj).toPromise().then((/**
             * @param {?} resp
             * @return {?}
             */
            resp => {
                console.debug("SQLite progress data api resp: ", resp);
                return resp;
            })).then((/**
             * @param {?} resp
             * @return {?}
             */
            resp => {
                /** @type {?} */
                let data = resp["Body"];
                /** @type {?} */
                let filterData = data.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                x => x.DataYear == 2019));
                /** @type {?} */
                let filterData2 = data.filter((/**
                 * @param {?} x
                 * @return {?}
                 */
                x => x.DataYear == 2020));
                console.debug("SQLite progress test date body: ", data);
                console.debug("SQLite progress test filterData: ", filterData);
                console.debug("SQLite progress test filterData2: ", filterData2);
                /** @type {?} */
                let arr = [];
                arr.push(filterData);
                arr.push(filterData2);
                console.debug("SQLite progress test arr: ", arr);
                return arr;
            })).then((/**
             * @param {?} resp
             * @return {?}
             */
            resp => {
                /** @type {?} */
                let data = resp;
                /** @type {?} */
                let progressObj1 = {
                    "DataYear": "2019",
                    "YesterdayPoint": "20",
                    "Personal": { Values: [] },
                };
                /** @type {?} */
                let progressObj2 = {
                    "DataYear": "2020",
                    "YesterdayPoint": "20",
                    "Personal": { Values: [] },
                };
                progressObj1.Personal.Values.push(data[0]);
                progressObj2.Personal.Values.push(data[1]);
                /** @type {?} */
                let progressObjArr = [];
                progressObjArr.push(progressObj1);
                progressObjArr.push(progressObj2);
                console.debug("SQLite progress test progressObj123: ", progressObjArr);
                return progressObjArr;
            })).then((/**
             * @param {?} resp
             * @return {?}
             */
            resp => {
                /** @type {?} */
                let data = resp;
                console.debug("SQLite progress test resp progressObj123 : ", resp);
                console.debug("SQLite progress test data progressObj123 : ", data);
                /** @type {?} */
                let defaultProgressObj = {
                    "lastUpdateTime": "2019-06-19",
                    "Progress": [],
                };
                defaultProgressObj.Progress.push(data[0]);
                defaultProgressObj.Progress.push(data[1]);
                console.debug("SQLite progress test defaultProgressObj123 : ", defaultProgressObj);
                return defaultProgressObj;
            })));
        }
        else {
            console.debug("SQLite progress fail.....");
        }
    }
}
if (false) {
    /**
     * @type {?}
     * @private
     */
    GetProgressDataAPI.prototype._clientID;
    /**
     * @type {?}
     * @private
     */
    GetProgressDataAPI.prototype._daoFactory;
    /**
     * @type {?}
     * @private
     */
    GetProgressDataAPI.prototype._personalDataType;
    /**
     * @type {?}
     * @private
     */
    GetProgressDataAPI.prototype._personalDataTimeBase;
    /**
     * @type {?}
     * @private
     */
    GetProgressDataAPI.prototype._searchYear;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2V0UHJvZ3Jlc3NEYXRhQVBJLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGFsbGlhbnpTTkQvcHJvZ3Jlc3MvIiwic291cmNlcyI6WyJsaWIvYXBpL0dldFByb2dyZXNzRGF0YUFQSS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBR0EsT0FBTyxFQUFhLElBQUksRUFBQyxNQUFNLE1BQU0sQ0FBQztBQUt0QyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTyx3Q0FBd0MsQ0FBQztBQUMzRSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTyw0Q0FBNEMsQ0FBQztBQUVuRixNQUFNOzs7O0lBOENGLFlBQVksVUFBcUI7UUE1Q3pCLGNBQVMsR0FBVyxDQUFDLENBQUM7UUFFdEIsc0JBQWlCLEdBQXFCLGdCQUFnQixDQUFDLE1BQU0sQ0FBQztRQUM5RCwwQkFBcUIsR0FBeUIsb0JBQW9CLENBQUMsR0FBRyxDQUFDO1FBQ3ZFLGdCQUFXLEdBQVcsQ0FBQyxDQUFDO1FBeUM1QixJQUFJLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQztJQUNsQyxDQUFDOzs7Ozs7SUF2Q0QsSUFBVyxVQUFVLENBQUMsS0FBWTtRQUM5QixJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztJQUM3QixDQUFDOzs7O0lBRUQsSUFBVyxVQUFVO1FBQ2pCLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUM1QixDQUFDOzs7Ozs7SUFHRCxJQUFXLGNBQWMsQ0FBQyxFQUFTO1FBQy9CLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0lBQ3hCLENBQUM7Ozs7SUFFRCxJQUFXLGNBQWM7UUFDckIsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzFCLENBQUM7Ozs7OztJQUdELElBQVcsY0FBYyxDQUFDLElBQXFCO1FBQzNDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUM7SUFDbEMsQ0FBQzs7OztJQUVELElBQVcsY0FBYztRQUNyQixPQUFPLElBQUksQ0FBQyxpQkFB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IjpbImltcG9ydCB7IElBUEkgfSBmcm9tIFwiQGFsbGlhbnpTTkQvY29yZVwiO1xuaW1wb3J0IHsgSU1vY2tBUEkgfSBmcm9tIFwiQGFsbGlhbnpTTkQvY29yZVwiO1xuaW1wb3J0IHtJU1FMaXRlQVBJfSBmcm9tICdAYWxsaWFuelNORC9jb3JlJztcbmltcG9ydCB7T2JzZXJ2YWJsZSwgZnJvbX0gZnJvbSAncnhqcyc7XG5pbXBvcnQge0Rhb0ZhY3Rvcnl9IGZyb20gJ0BhbGxpYW56U05EL2NvcmUnO1xuaW1wb3J0IHtDbGllbnRDdXN0b21EYW99IGZyb20gJ0BhbGxpYW56U05EL2NvcmUnO1xuaW1wb3J0IHtFcXVhbFJlc3RyaWN0aW9ufSBmcm9tICdAYWxsaWFuelNORC9jb3JlJztcblxuaW1wb3J0IHsgUGVyc29uYWxEYXRhVHlwZSB9IGZyb20gICcuLi9zZXJ2aWNlL21vZGVsL0VudW0vUGVyc29uYWxEYXRhVHlwZSc7XG5pbXBvcnQgeyBQZXJzb25hbERhdGFUaW1lQmFzZSB9IGZyb20gICcuLi9zZXJ2aWNlL21vZGVsL0VudW0vUGVyc29uYWxEYXRhVGltZUJhc2UnO1xuXG5leHBvcnQgY2xhc3MgR2V0UHJvZ3Jlc3NEYXRhQVBJIGltcGxlbWVudHMgSUFQSSwgSU1vY2tBUEksIElTUUxpdGVBUEkge1xuXG4gICAgcHJpdmF0ZSBfY2xpZW50SUQ6IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBfZGFvRmFjdG9yeTogRGFvRmFjdG9yeTtcbiAgICBwcml2YXRlIF9wZXJzb25hbERhdGFUeXBlOiBQZXJzb25hbERhdGFUeXBlID0gUGVyc29uYWxEYXRhVHlwZS5BY3R1YWw7XG4gICAgcHJpdmF0ZSBfcGVyc29uYWxEYXRhVGltZUJhc2U6IFBlcnNvbmFsRGF0YVRpbWVCYXNlID0gUGVyc29uYWxEYXRhVGltZUJhc2UuRGF5O1xuICAgIHByaXZhdGUgX3NlYXJjaFllYXI6IG51bWJlciA9IDA7XG5cbiAgICAvL2NvbmRpdGlvbiB5ZWFyXG4gICAgcHVibGljIHNldCBTZWFyY2hZZWFyKHZhbHVlOm51bWJlcikge1xuICAgICAgICB0aGlzLl9zZWFyY2hZZWFyID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBTZWFyY2hZZWFyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VhcmNoWWVhcjtcbiAgICB9XG5cbiAgICAvL2NvbmRpdGlvbiBjbGllbnQgaWRcbiAgICBwdWJsaWMgc2V0IFNlYXJjaENsaWVudElkKGlkOm51bWJlcikge1xuICAgICAgICB0aGlzLl9jbGllbnRJRCA9IGlkO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgU2VhcmNoQ0xpZW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jbGllbnRJRDtcbiAgICB9XG5cbiAgICAvL2NvbmRpdGlvbiBkYXRhIHR5cGVcbiAgICBwdWJsaWMgc2V0IFNlYXJjaERhdGFUeXBlKHR5cGU6UGVyc29uYWxEYXRhVHlwZSkge1xuICAgICAgICB0aGlzLl9wZXJzb25hbERhdGFUeXBlID0gdHlwZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IFNlYXJjaERhdGFUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGVyc29uYWxEYXRhVHlwZTtcbiAgICB9XG5cblxuICAgIC8vY29uZGl0aW9uIHRpbWUgYmFzZVxuICAgIHB1YmxpYyBzZXQgU2VhcmNoVGltZUJhc2UodGltZTpQZXJzb25hbERhdGFUaW1lQmFzZSkge1xuICAgICAgICB0aGlzLl9wZXJzb25hbERhdGFUaW1lQmFzZSA9IHRpbWU7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBTZWFyY2hUaW1lQmFzZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BlcnNvbmFsRGF0YVRpbWVCYXNlO1xuICAgIH1cblxuICAgIFxuICAgIGNvbnN0cnVjdG9yKGRhb0ZhY3Rvcnk6RGFvRmFjdG9yeSkge1xuICAgICAgICB0aGlzLl9kYW9GYWN0b3J5ID0gZGFvRmFjdG9yeTtcbiAgICB9XG5cbiAgICBnZXRBUElOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiAnZ2V0UHJvZ3Jlc3NEYXRhJztcbiAgICB9XG5cbiAgICBnZXRNb2NrUGF0aCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gJy4vYXNzZXRzL21vY2svZ2V0UHJvZ3Jlc3NEYXRhTW9jay5qc29uJztcbiAgICB9XG5cblxuICAgIGV4ZWN1dGVTUUwoKTogT2JzZXJ2YWJsZTxhbnk+IHtcblxuICAgICAgICBjb25zb2xlLmRlYnVnKFwiU1FMaXRlIHByb2dyZXNzIHN0YXJ0IFwiKTtcblxuICAgICAgICAvKlxuICAgICAgICBsZXQgZGVmYXVsdFByb2dyZXNzT2JqID0gXG4gICAgICAgIHtcbiAgICAgICAgICAgIFwibGFzdFVwZGF0ZVRpbWVcIjogXCJcIixcbiAgICAgICAgICAgIFwiUHJvZ3Jlc3NcIjpbXSxcbiAgICAgICAgfTtcbiAgICAgICAgKi9cblxuICAgICAgICAvKlxuICAgICAgICAvLyBQcm9ncmVzcyBbcHJvZ3Jlc3NPYmosIHByb2dyZXNzT2JqXSAqMlxuICAgICAgICBsZXQgcHJvZ3Jlc3NPYmo6XG4gICAgICAgIHtcbiAgICAgICAgICAgIFwiRGF0YVllYXJcIjogXCJcIixcbiAgICAgICAgICAgIFwiWWVzdGVyZGF5UG9pbnRcIjogXCJcIixcbiAgICAgICAgICAgIFwiVmFsdWVzXCI6W11cbiAgICAgICAgfTtcbiAgICAgICAgKi9cblxuXG4gICAgICAgIC8qXG4gICAgICAgIC8vIHByb2dyZXNzT2JqLlZhbHVlW10gKiBuXG4gICAgICAgIGxldCBwcm9ncmVzVmFsdWVPYmogPVxuICAgICAgICB7XG4gICAgICAgICAgICBcIkRhdGFUeXBlXCI6XCJcIixcbiAgICAgICAgICAgIFwiVGltZUJhc2VcIjogXCJcIixcbiAgICAgICAgICAgIFwiRllGQ1wiOiAwLFxuICAgICAgICAgICAgXCJGaW5kXCI6IDAsXG4gICAgICAgICAgICBcIlNjaGVkdWxlXCI6IDAsXG4gICAgICAgICAgICBcIk1lZXRcIjogMCxcbiAgICAgICAgICAgIFwiU3VibWl0XCI6IDAsXG4gICAgICAgICAgICBcIkluZm9yY2VcIjogMFxuICAgICAgICB9O1xuICAgICAgICAqL1xuXG5cbiAgICAgICAgLy8gdGVzdCBjbGFzcyB0byBvYmogdHlwZVxuXG5cbiAgICAgICAgbGV0IGRlZmF1bHREYW8gPSB0aGlzLl9kYW9GYWN0b3J5LmdldERlZmF1bHREYW8oKTtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhcIlNRTGl0ZSBwcm9ncmVzcyBkZWZhdWx0RGFvOiBcIiwgZGVmYXVsdERhbyk7XG5cbiAgICAgICAgbGV0IHByb2dyZXNzVGFibGVPYmogPSB0aGlzLl9kYW9GYWN0b3J5LmdldERlZmF1bHRUYWJsZShcIlRXX0xIX1NEX1ZXX1BlcnNvbmFsX1Byb2dyZXNzXCIpOyBcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhcIlNRTGl0ZSBwcm9ncmVzcyBwcm9ncmVzc1RhYmxlT2JqOiBcIiwgcHJvZ3Jlc3NUYWJsZU9iaik7XG5cbiAgICAgICAgaWYocHJvZ3Jlc3NUYWJsZU9iaiAhPSB1bmRlZmluZWQgJiYgZGVmYXVsdERhbyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmcm9tKGRlZmF1bHREYW8ucXVlcnlCeVRhYmxlKHByb2dyZXNzVGFibGVPYmopLnRvUHJvbWlzZSgpLnRoZW4ocmVzcCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhcIlNRTGl0ZSBwcm9ncmVzcyBkYXRhIGFwaSByZXNwOiBcIiwgcmVzcCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3A7XG4gICAgICAgICAgICB9KS50aGVuKHJlc3AgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBkYXRhID0gcmVzcFtcIkJvZHlcIl07XG4gICAgICAgICAgICAgICAgbGV0IGZpbHRlckRhdGEgPSBkYXRhLmZpbHRlcih4ID0+IHguRGF0YVllYXIgPT0gMjAxOSk7XG4gICAgICAgICAgICAgICAgbGV0IGZpbHRlckRhdGEyID0gZGF0YS5maWx0ZXIoeCA9PiB4LkRhdGFZZWFyID09IDIwMjApO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJTUUxpdGUgcHJvZ3Jlc3MgdGVzdCBkYXRlIGJvZHk6IFwiLCBkYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiU1FMaXRlIHByb2dyZXNzIHRlc3QgZmlsdGVyRGF0YTogXCIsIGZpbHRlckRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJTUUxpdGUgcHJvZ3Jlc3MgdGVzdCBmaWx0ZXJEYXRhMjogXCIsIGZpbHRlckRhdGEyKTtcblxuICAgICAgICAgICAgICAgIGxldCBhcnIgPSBbXTtcbiAgICAgICAgICAgICAgICBhcnIucHVzaChmaWx0ZXJEYXRhKTtcbiAgICAgICAgICAgICAgICBhcnIucHVzaChmaWx0ZXJEYXRhMik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhcIlNRTGl0ZSBwcm9ncmVzcyB0ZXN0IGFycjogXCIsIGFycik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgICAgICAgfSkudGhlbihyZXNwID0+IHtcblxuICAgICAgICAgICAgICAgIGxldCBkYXRhID0gcmVzcDtcblxuICAgICAgICAgICAgICAgIGxldCBwcm9ncmVzc09iajEgPSBcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFwiRGF0YVllYXJcIjogXCIyMDE5XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiWWVzdGVyZGF5UG9pbnRcIjogXCIyMFwiLFxuICAgICAgICAgICAgICAgICAgICBcIlBlcnNvbmFsXCI6e1ZhbHVlczpbXX0sXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGxldCBwcm9ncmVzc09iajIgPSBcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFwiRGF0YVllYXJcIjogXCIyMDIwXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiWWVzdGVyZGF5UG9pbnRcIjogXCIyMFwiLFxuICAgICAgICAgICAgICAgICAgICBcIlBlcnNvbmFsXCI6e1ZhbHVlczpbXX0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBwcm9ncmVzc09iajEuUGVyc29uYWwuVmFsdWVzLnB1c2goZGF0YVswXSk7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NPYmoyLlBlcnNvbmFsLlZhbHVlcy5wdXNoKGRhdGFbMV0pO1xuXG4gICAgICAgICAgICAgICAgbGV0IHByb2dyZXNzT2JqQXJyID0gW107XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NPYmpBcnIucHVzaChwcm9ncmVzc09iajEpO1xuICAgICAgICAgICAgICAgIHByb2dyZXNzT2JqQXJyLnB1c2gocHJvZ3Jlc3NPYmoyKTtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJTUUxpdGUgcHJvZ3Jlc3MgdGVzdCBwcm9ncmVzc09iajEyMzogXCIsIHByb2dyZXNzT2JqQXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvZ3Jlc3NPYmpBcnI7XG5cbiAgICAgICAgICAgIH0pLnRoZW4ocmVzcCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGRhdGEgPSByZXNwO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJTUUxpdGUgcHJvZ3Jlc3MgdGVzdCByZXNwIHByb2dyZXNzT2JqMTIzIDogXCIsIHJlc3ApO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJTUUxpdGUgcHJvZ3Jlc3MgdGVzdCBkYXRhIHByb2dyZXNzT2JqMTIzIDogXCIsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGxldCBkZWZhdWx0UHJvZ3Jlc3NPYmogPSBcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFwibGFzdFVwZGF0ZVRpbWVcIjogXCIyMDE5LTA2LTE5XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiUHJvZ3Jlc3NcIjpbXSxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdFByb2dyZXNzT2JqLlByb2dyZXNzLnB1c2goZGF0YVswXSk7XG4gICAgICAgICAgICAgICAgZGVmYXVsdFByb2dyZXNzT2JqLlByb2dyZXNzLnB1c2goZGF0YVsxXSk7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiU1FMaXRlIHByb2dyZXNzIHRlc3QgZGVmYXVsdFByb2dyZXNzT2JqMTIzIDogXCIsIGRlZmF1bHRQcm9ncmVzc09iaik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRQcm9ncmVzc09iajtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJTUUxpdGUgcHJvZ3Jlc3MgZmFpbC4uLi4uXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICBsZXQgY3VzdG9tZXIgPSByZXNwO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY2xpZW50SUQgPSBjdXN0b21lclsnQm9keSddWzBdLkNsaWVudElEO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VzdG9tZXJUZWxPYmogPSB0aGlzLmRhb0ZhY3RvcnkuZ2V0RGVmYXVsdFRhYmxlKFwiVFdfTEhfU0RfQ3VzdG9tZXJfVGVsXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VzdG9tZXJUZWxPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyVGVsT2JqID0gKDxTUUxpdGVUYWJsZT5jdXN0b21lclRlbE9iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lclRlbE9iai5hZGRSZXN0cmljdGlvbihuZXcgRXF1YWxSZXN0cmljdGlvbignQ3VzdG9tZXJDbGllbnRJRCcsIFtjbGllbnRJRF0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYW8ucXVlcnlCeVRhYmxlKGN1c3RvbWVyVGVsT2JqKS50b1Byb21pc2UoKS50aGVuKChyZXNwKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbExpc3QgPSByZXNwWydCb2R5J107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJbJ0JvZHknXVswXVsndGVsJ10gPSB0ZWxMaXN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGN1c3RvbWVyLCBjbGllbnRJRCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgY3VzdG9tZXIsIGNsaWVudElEIH07XG4gICAgICAgICAgICAgICAgICAgICovXG5cblxuXG5cblxuXG5cblxuXG4gICAgLypcbiAgICBleGVjdXRlU1FMKCk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjdXN0b21lciBEZXRhaWw6ZXhlY3V0ZSBTUUwnKTtcbiAgICAgICAgbGV0IGRlZmF1bHRPYmogPSB7XG4gICAgICAgICAgICBcIkNsaWVudElEXCI6IFwiXCIsXG4gICAgICAgICAgICBcIkxhc3ROYW1lXCI6IFwiXCIsXG4gICAgICAgICAgICBcIkZpcnN0TmFtZVwiOiBcIlwiLFxuICAgICAgICAgICAgXCJPY2N1cGF0aW9uXCI6IFwiXCIsXG4gICAgICAgICAgICBcIkNvbXBhbnlcIjogXCJcIixcbiAgICAgICAgICAgIFwiQmlydGhkYXlZZWFyXCI6IFwiXCIsXG4gICAgICAgICAgICBcIkJpcnRoZGF5TW9udGhcIjogXCJcIixcbiAgICAgICAgICAgIFwiQmlydGhkYXlEYXRlXCI6IFwiXCIsXG4gICAgICAgICAgICBcIkJpcnRoZGF5XCI6IG51bGwsXG4gICAgICAgICAgICBcIkFnZVJhbmdlXCI6IG51bGwsXG4gICAgICAgICAgICBcIkdlbmRlclwiOiBudWxsLFxuICAgICAgICAgICAgXCJJbmNvbWVcIjogbnVsbCxcbiAgICAgICAgICAgIFwiU291cmNlXCI6IG51bGwsXG4gICAgICAgICAgICBcIk1hcnJpYWdlXCI6IG51bGwsXG4gICAgICAgICAgICBcIkNoaWxkcmVuXCI6IG51bGwsXG4gICAgICAgICAgICBcIkZhbWlsaWFyaXR5XCI6IG51bGwsXG4gICAgICAgICAgICBcIlJlY2VudFN0YXR1c1wiOiBcIlwiLFxuICAgICAgICAgICAgXCJNQU5QQVwiOiBcIlwiLFxuICAgICAgICAgICAgXCJDb250YWN0RnJlcXVhbmN5XCI6IFwiXCIsXG4gICAgICAgICAgICBcIlBvc3NpYmlsaXR5XCI6IFwiXCIsXG4gICAgICAgICAgICBcIklzRm9sbG93XCI6IFwiTlwiLFxuICAgICAgICAgICAgXCJEYXRhU291cmNlXCI6IFwiQVBQXCIsXG4gICAgICAgICAgICBcInRlbFwiOiBbXSxcbiAgICAgICAgICAgIFwiZW1haWxcIjogW10sXG4gICAgICAgICAgICBcImFkZHJlc3NcIjogW11cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2lkIHx8ICh0aGlzLl9pZC5sZW5ndGggPT0gMCkpIHtcbiAgICAgICAgICAgIC8vQWRkXG4gICAgICAgICAgICBsZXQgcmVzcCA9IG5ldyBTUUxpdGVSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgXCJpc1N1Y2Nlc3NcIjogdHJ1ZVxuICAgICAgICAgICAgfSwgW2RlZmF1bHRPYmpdKTtcbiAgICAgICAgICAgIHJldHVybiBvZihyZXNwKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBjdXN0b21lck9iaiA9IHRoaXMuZGFvRmFjdG9yeS5nZXREZWZhdWx0VGFibGUoXCJUV19MSF9TRF9WV19DdXN0b21lclwiKTtcbiAgICAgICAgICAgIGxldCBkZWZhdWx0RGFvID0gdGhpcy5kYW9GYWN0b3J5LmdldERlZmF1bHREYW8oKTtcbiAgICAgICAgICAgIGlmIChjdXN0b21lck9iaiAhPSB1bmRlZmluZWQgJiYgZGVmYXVsdERhbyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZGFvID0gbmV3IENsaWVudEN1c3RvbURhbyhkZWZhdWx0RGFvKTtcbiAgICAgICAgICAgICAgICBjdXN0b21lck9iai5hZGRSZXN0cmljdGlvbihuZXcgRXF1YWxSZXN0cmljdGlvbihcIkNsaWVudElEXCIsIFt0aGlzLl9pZF0pKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbShkYW8ucXVlcnlCeVRhYmxlKGN1c3RvbWVyT2JqKS50b1Byb21pc2UoKS50aGVuKHJlc3AgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VzdG9tZXIgPSByZXNwO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY2xpZW50SUQgPSBjdXN0b21lclsnQm9keSddWzBdLkNsaWVudElEO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VzdG9tZXJUZWxPYmogPSB0aGlzLmRhb0ZhY3RvcnkuZ2V0RGVmYXVsdFRhYmxlKFwiVFdfTEhfU0RfQ3VzdG9tZXJfVGVsXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VzdG9tZXJUZWxPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyVGVsT2JqID0gKDxTUUxpdGVUYWJsZT5jdXN0b21lclRlbE9iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lclRlbE9iai5hZGRSZXN0cmljdGlvbihuZXcgRXF1YWxSZXN0cmljdGlvbignQ3VzdG9tZXJDbGllbnRJRCcsIFtjbGllbnRJRF0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYW8ucXVlcnlCeVRhYmxlKGN1c3RvbWVyVGVsT2JqKS50b1Byb21pc2UoKS50aGVuKChyZXNwKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbExpc3QgPSByZXNwWydCb2R5J107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJbJ0JvZHknXVswXVsndGVsJ10gPSB0ZWxMaXN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGN1c3RvbWVyLCBjbGllbnRJRCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgY3VzdG9tZXIsIGNsaWVudElEIH07XG4gICAgICAgICAgICAgICAgfSkudGhlbigoeyBjdXN0b21lciwgY2xpZW50SUQgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VzdG9tZXJFbWFpbE9iaiA9IHRoaXMuZGFvRmFjdG9yeS5nZXREZWZhdWx0VGFibGUoXCJUV19MSF9TRF9DdXN0b21lcl9FbWFpbFwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1c3RvbWVyRW1haWxPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyRW1haWxPYmogPSAoPFNRTGl0ZVRhYmxlPmN1c3RvbWVyRW1haWxPYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJFbWFpbE9iai5hZGRSZXN0cmljdGlvbihuZXcgRXF1YWxSZXN0cmljdGlvbignQ3VzdG9tZXJDbGllbnRJRCcsIFtjbGllbnRJRF0pKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhby5xdWVyeUJ5VGFibGUoY3VzdG9tZXJFbWFpbE9iaikudG9Qcm9taXNlKCkudGhlbigocmVzcCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZWxMaXN0ID0gcmVzcFsnQm9keSddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyWydCb2R5J11bMF1bJ2VtYWlsJ10gPSB0ZWxMaXN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGN1c3RvbWVyLCBjbGllbnRJRCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgY3VzdG9tZXIsIGNsaWVudElEIH07XG5cbiAgICAgICAgICAgICAgICB9KS50aGVuKCh7IGN1c3RvbWVyLCBjbGllbnRJRCB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXN0b21lckFkZHJPYmogPSB0aGlzLmRhb0ZhY3RvcnkuZ2V0RGVmYXVsdFRhYmxlKFwiVFdfTEhfU0RfQ3VzdG9tZXJfQWRkcmVzc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1c3RvbWVyQWRkck9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJBZGRyT2JqID0gKDxTUUxpdGVUYWJsZT5jdXN0b21lckFkZHJPYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJBZGRyT2JqLmFkZFJlc3RyaWN0aW9uKG5ldyBFcXVhbFJlc3RyaWN0aW9uKCdDdXN0b21lckNsaWVudElEJywgW2NsaWVudElEXSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGFvLnF1ZXJ5QnlUYWJsZShjdXN0b21lckFkZHJPYmopLnRvUHJvbWlzZSgpLnRoZW4oKHJlc3ApID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGVsTGlzdCA9IHJlc3BbJ0JvZHknXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lclsnQm9keSddWzBdWydhZGRyZXNzJ10gPSB0ZWxMaXN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21lcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21lcjtcbiAgICAgICAgICAgICAgICB9KS50aGVuKGN1c3RvbWVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy9jaGFuZ2UgYmlydGhEYXkgdG8gRGF0ZSBPYmplY3RcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXJbJ0JvZHknXVswXVsnQmlydGhkYXknXSA9IG5ldyBEYXRlKGN1c3RvbWVyWydCb2R5J11bMF1bJ0JpcnRoZGF5WWVhciddLCBwYXJzZUludChjdXN0b21lclsnQm9keSddWzBdWydCaXJ0aGRheU1vbnRoJ10pIC0gMSwgY3VzdG9tZXJbJ0JvZHknXVswXVsnQmlydGhkYXlEYXRlJ10pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VzdG9tZXI7XG4gICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2YoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgICovXG59Il19